/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
function algaeTank(){function u(e,n){this.x=e,this.y=n,this.state="dead",this.draw=function(){t.beginPath(),this.state=="alive"?t.fillStyle="#1bbd61":t.fillStyle="#e8effa",t.strokeStyle="#d3e0f5",t.fillRect(this.x,this.y,i,i),t.strokeRect(this.x,this.y,i,i),t.closePath()}}function a(){var e=0,t=0;for(var o=0;o<n*r/Math.pow(i,2);o++)s.push(new u(e,t)),e+=i,e%r/i==0&&(e=0,t+=i);_.each(s,function(e){e.draw()}),$("#run").removeClass("disable").addClass("start"),$("#run").on("click",function(){$("#run").removeClass("start").addClass("disable"),f(),$("#run").off()})}function f(){var e=[];_.each(s,function(t,n){var r=l(t.x,n),i=$.extend({},t,i),s=0;_.each(r,function(e){e.state=="alive"&&(s+=1)});if(i.state=="alive"){if(s<2||s>3)i.state="dead"}else s==3&&(i.state="alive");e.push(i)}),s=e,o=setTimeout(c,40)}function l(e,t){var n=[s[t+1],s[t-1],s[t+r/i],s[t-r/i],s[t+r/i+1],s[t-r/i+1],s[t+r/i-1],s[t-r/i-1]];return e==0?(n[1]=undefined,n[6]=undefined,n[7]=undefined):e==r-i&&(n[0]=undefined,n[4]=undefined,n[5]=undefined),n=_.reject(n,function(e){return e==undefined}),n}function c(){t.clearRect(0,0,r,n),_.each(s,function(e){e.draw()}),f()}function h(e,t){_.each(s,function(n){e>n.x&&e<n.x+i&&t>n.y&&t<n.y+i&&(n.state="alive",n.draw())})}var e=$("canvas")[0],t=e.getContext("2d"),n=550,r=900,i=10,s=[],o=null;e.height=n,e.width=r,a(),$("body").on("mousedown",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;h(n,r),$("canvas").on("mousemove",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;h(n,r)}),$("body").on("mouseup",function(){$("canvas").off()})}),$(".reset").on("click",function(){clearTimeout(o),s=[],a()}),$("body").disableSelection()}function audioRecorder(){function r(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,window.URL=window.URL||window.webkitURL,e=new AudioContext,navigator.getUserMedia?navigator.getUserMedia({audio:!0},o,function(e){alert("This app requires access to your microphone.")}):s()}catch(t){s()}}function i(){var e=$.trim($("#title_input").val());e&&(n=e+".wav")}function s(){$("#container").html(""),$("#replacement_container").show()}function o(n){var r=e.createMediaStreamSource(n);r.connect(e.destination),t=new Recorder(r),$("#start").attr("disabled",!1)}function u(){t&&t.record(),$("#start").attr("disabled",!0),$("#stop").attr("disabled",!1),$(".rec_light_bulb").addClass("recording")}function a(){t&&t.stop(),$("#stop").attr("disabled",!0),$("#start").attr("disabled",!1),$(".rec_light_bulb").removeClass("recording"),f()}function f(){t&&t.exportWAV(function(e){var t=URL.createObjectURL(e),r=document.createElement("li"),i=document.createElement("audio"),s=document.createElement("p"),o=document.createElement("a"),u=document.getElementById("recordings_list");i.controls=!0,i.src=t,s.innerHTML=n,o.href=t,o.className="btn",o.download=n,o.innerHTML="Download",r.appendChild(i),r.appendChild(s),r.appendChild(o),u.appendChild(r)}),t.clear()}var e,t,n="my_recording.wav";r(),$("#start").on("click",function(e){u(),i()}),$("#stop").on("click",function(e){a()})}function balloon(){function a(e,t){var n=new Date,r=n.getTime(),i=r-e;o.draw(),f(i,t),requestAnimFrame(function(){a(r,t)})}function f(o,u){var a=u.getX(),f=u.getY(),l=s.getMousePosition();if(u.isDragging()){if(l){var c=l.y,h=l.x;u.vx=i*(h-u.last_mouse_x),u.vy=i*(c-u.last_mouse_y),u.last_mouse_x=h,u.last_mouse_y=c}}else u.vy+=n*o/1e3,u.setX(a+u.vx),u.setY(f+u.vy),a<0&&(u.setX(0),u.vx*=-1*r),a>e-u.getWidth()&&(u.setX(e-u.getWidth()),u.vx*=-1*r),f<0&&(u.setY(0),u.vy*=-1*r,u.vx*=r/1.3),f>t-u.getHeight()&&(u.setY(t-u.getHeight()),u.vy*=-1*r)}var e=window.innerWidth,t=window.innerHeight,n=-2.5,r=.6,i=.06,s=new Kinetic.Stage({container:"container",width:e,height:t}),o=new Kinetic.Layer,u=new Image;u.onload=function(){var n=u.width,r=u.height,i=new Kinetic.Image({x:e/4,y:t/2,image:u,width:n,height:r,draggable:!0});i.vx=2,i.vy=0,i.createImageHitRegion(function(){o.draw()}),o.add(i),s.add(o),i.on("dragstart",function(){i.vx=0,i.vy=0}),i.on("mouseover",function(){document.body.style.cursor="pointer"}),i.on("mouseout",function(){document.body.style.cursor="default"});var f=new Date,l=f.getTime();a(l,i)},u.src="/assets/blue_balloon.png"}function boomPage(){function m(n,r,i){function s(e){e.width=e.orig_width/(e.time*e.time)*f,e.height=e.orig_height/(e.time*e.time)*f,e.x=(e.orig_width-e.width)/2+e.x_offset,e.y=(e.orig_height-e.height)/2+e.y_offset,e.time+=1,_.each(e.orbs,function(t){t.x=e.x+e.width*t.x_offset,t.y=e.y+e.height*t.y_offset,t.radius=250/(e.time*e.time)*f}),e.draw()}this.orig_width=this.width=n,this.orig_height=this.height=r,this.x=(e.width-n)/2,this.y=(e.height-r)/2,this.x_offset=(e.width-n)/2,this.y_offset=(e.height-r)/2,this.time=1,this.orbs=[],this.makeOrb=function(){var e={},t=randomNumWithGap(0,20,80,100)/100,n=randomNumWithGap(0,20,80,100)/100;e.radius=400,e.x_offset=t,e.y_offset=n,e.x=this.width*t-this.x_offset,e.y=this.height*n-this.y_offset,this.orbs.push(e)},this.evolve=function(){s(this)},this.draw=function(){t.beginPath(),t.fillStyle="transparent",t.fillRect(this.x,this.y,this.width,this.height),t.closePath(),_.each(this.orbs,function(e){t.beginPath(),t.fillStyle="rgba(255,255,255,0.4)",t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="rgba(255,255,255,0.85)",t.arc(e.x,e.y,e.radius/1.2,0,2*Math.PI),t.fill(),t.closePath()})};for(var o=0;o<randomInt(1,3);o++)this.makeOrb()}function g(){o.push(new m(e.width*2,e.height*2,2))}function y(e,t,n){for(var r=0;r<100;r++)l.push(new b(e,t,c,Math.random()*5.2/(n*.002),n))}function b(e,t,n,r,i){this.x=e,this.y=t,this.x0=e,this.y0=t,this.v0=Math.random()/(i*.003),this.angle=Math.random()*(360*Math.PI/180),this.time=0,this.r=r,this.color=n,this.scale=i}function w(){_.each(l,function(e){r.fillStyle=e.color,r.beginPath(),r.arc(e.x,e.y,e.r,0,2*Math.PI),r.fill(),r.closePath()}),E()}function E(){l=_.reject(l,function(e,t){var n=e.v0*Math.sin(e.angle),r=e.v0*Math.cos(e.angle);e.time+=h,e.x=e.x0+n*e.time,e.y=e.y0-r*e.time+p*Math.pow(e.time,2);if(e.time>randomInt(500,1200))return!0})}function S(){t.clearRect(0,0,e.width,e.height),_.each(o,function(t,n){t.evolve(),t.width<10&&(o[n]=new m(e.width*2,e.height*2,2))}),w(),setTimeout(S,u)}function x(e,t,n,r,i){var s=e-n,o=t-r;return s*s+o*o<=i*i}function T(){g(),o.length<10&&setTimeout(T,3e3)}var e=$("canvas")[0],t=e.getContext("2d"),n=$("canvas")[1],r=e.getContext("2d"),i=window.innerHeight,s=window.innerWidth,o=[],u=40,a={},f=300,l=[],c="#ebf9ff",h=10,p=1e-4,d=new Howl({urls:["/assets/bells.mp3","/assets/bells.ogg"],volume:.5}),v=new Howl({urls:["/assets/boom.mp3","/assets/boom.ogg"],volume:.75});e.height=i,e.width=s,n.height=i,n.width=s,T(),S(),$("canvas").on("mousemove",function(t){a.x=t.pageX-e.offsetLeft,a.y=t.pageY-e.offsetTop}),document.addEventListener("touchmove",function(t){t.preventDefault(),a.x=t.pageX-e.offsetLeft,a.y=t.pageX-e.offsetTop},!1),$("canvas").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;_.each(o,function(e){var t=e.time*e.time;e.orbs=_.reject(e.orbs,function(e){if(x(n,r,e.x,e.y,e.radius))return y(e.x,e.y,t),d.play(),v.play(),!0})})}),$("body").disableSelection()}function brickSmasher(){function w(){g.move(r,i),p.draw(),g.getY()>m.getHeight()+g.getRadius()?($("h2").text("Bricks Smashed: "+l),$(".modal").fadeIn(500)):x()}function E(e,t,n,r){this.x=e,this.y=t,this.i=r,this.color=n,this.top=t,this.bottom=t+a,this.left=e,this.right=e+u,this.dead=!1;var i=new Kinetic.Rect({x:this.x,y:this.y,width:u,height:a,fill:this.color,id:"brick"+r});v.add(i)}function S(){var e=0,t=h[e],n=0,r=50;_.each(_.range(c),function(i){f.push(new E(n,r,t,i)),n+=u,n>=m.getWidth()&&(n=0,r+=a+3,e+=1,t=h[e])})}function x(){var e=g.getRadius(),t=g.getX(),n=g.getY(),s=y.getX(),o=y.getY();if(t<0+e||t>m.getWidth()-e)r*=-1;n+e<0+e&&(i*=-1),t-e>s-y.getOffsetX()&&t+e<s+y.getOffsetX()&&n+e>=o&&(g.setY(o-1-e),i*=-1,t<s?r=Math.abs(r)*-1:t>=s&&(r=Math.abs(r))),f=_.reject(f,function(r){if(r.left<=t&&t<=r.right)if(r.top<=n-e&&n-e<=r.bottom||r.top<=n-e&&n-e<=r.bottom)return i*=-1,m.get("#brick"+r.i).destroy(),v.draw(),l+=1,T(),!0;if(r.top<=n&&n<=r.bottom)if(r.left<=t-e&&t-e<=r.right||r.left<=t-e&&t-e<=r.right)return i*=-1,m.get("#brick"+r.i).destroy(),v.draw(),l+=1,T(),!0;return!1}),setTimeout(w,b)}function T(){l%4==0&&l!=0&&(b*=.85)}var e=600,t=500,n=randomInt(0,1)*2-1,r=3*n,i=-3,s=150,o=10,u=50,a=30,f=[],l=0,c=e/u*8,h=["#e8566c","#e8566c","#1CCFC7","#1CCFC7","#FFC54A","#FFC54A","#19E1B2","#19E1B2"],p=new Kinetic.Layer,d=new Kinetic.Layer,v=new Kinetic.Layer,m=new Kinetic.Stage({container:"game",width:e,height:t}),g=new Kinetic.Circle({x:randomInt(30,m.getWidth()-30),y:m.getHeight()-30,radius:10,fill:"#0f0b7a",id:"ball"}),y=new Kinetic.Rect({x:m.getWidth()/2,y:m.getHeight()-10,width:s,height:o,offsetX:s/2,fill:"#e8566c",id:"paddle"}),b=20;S(),p.add(g),d.add(y),m.add(p),m.add(d),m.add(v),w(),$("body").on("mousemove",function(e){var t=m.getMousePosition();t&&(y.setX(t.x),d.draw())})}function buttonMaker(){var e=["border","cursor","padding","text-decoration","font-family","font-size","line-height","color","background-color","border-radius","border-top","border-bottom","border-left","border-right","text-shadow","box-shadow"],t=!1;$("#arrow").on("click",function(){t?($(".css_code").animate({opacity:0},500),$(this).text("▲")):($(this).text("▼"),$(".css_code").animate({opacity:1},500)),t=!t}),$(".button").on("click",function(e){e.preventDefault()}),$("#background-color").on("change",function(){$(".button").css("background-color","#"+this.color)}),$("#font-color").on("change",function(){$(".button").css("color","#"+this.color)}),$("#box-shadow").on("change",function(){$(".button").css("box-shadow",$(this).val())}),$("#text-shadow").on("change",function(){$(".button").css("text-shadow",$(this).val())}),$("#font-size").on("change",function(){$(".button").css("font-size",$(this).val())}),$("#line-height").on("change",function(){$(".button").css("line-height",$(this).val())}),$("#border-left").on("change",function(){$(".button").css("border-left",$(this).val())}),$("#border-right").on("change",function(){$(".button").css("border-right",$(this).val())}),$("#border-top").on("change",function(){$(".button").css("border-top",$(this).val())}),$("#border-bottom").on("change",function(){$(".button").css("border-bottom",$(this).val())}),$("#border-radius").on("change",function(){$(".button").css("border-radius",$(this).val())}),$("#padding").on("change",function(){$(".button").css("padding",$(this).val())}),$("#line-height").on("change",function(){$(".button").css("line-height",$(this).val())})}function captureGame(){function h(){t.fillStyle="#fff",t.fillRect(0,0,r,n),E(),_.each(i,function(e){e.move()}),_.each(s,function(e){e.draw()}),l&&(i=y(),s=b(),w())}function p(){i=[],u=0,_.each(_.range(c[f].num_balls),function(e){m(randomInt(20,r-20),randomInt(20,n-42))}),$("canvas").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;g(n,r,"100, 100, 100"),l=!0,$("canvas").off()})}function d(e,i,s,o){this.x=e,this.y=i,this.vx=s,this.vy=o,this.r=8,this.color=randomColorRGB(),this.move=function(){this.x>r-8?(this.x=r-8,this.vx=-this.vx):this.x<8&&(this.x=8,this.vx=-this.vx),this.y>n-8?(this.y=n-8,this.vy=-this.vy):this.y<38&&(this.y=38,this.vy=-this.vy),this.x+=this.vx,this.y+=this.vy,t.fillStyle="rgba("+this.color+", 1)",t.beginPath(),t.arc(this.x,this.y,this.r,0,Math.PI*2),t.closePath(),t.fill()}}function v(e,n,r){this.x=e,this.y=n,this.r=40,this.color=r,this.time=a,this.draw=function(){t.fillStyle="rgba("+this.color+", 0.75)",t.beginPath(),t.arc(this.x,this.y,this.r,0,Math.PI*2),t.closePath(),t.fill(),this.time+=50}}function m(e,t){var n=randomFloat(-5,5),r=randomFloat(-5,5);n<3&&n>0?n+=3:n>-3&&n<0&&(n-=3),r<3&&r>0?r+=3:r>-3&&r<0&&(r-=3),i.push(new d(e,t,n,r))}function g(e,t,n){s.push(new v(e,t,n))}function y(){return _.reject(i,function(e){var t=!1;return _.each(s,function(n){e.x-e.r>n.x-n.r&&e.x+e.r<n.x+n.r&&e.y-e.r>n.y-n.r&&e.y+e.r<n.y+n.r&&(g(e.x,e.y,e.color),u=c[f].num_balls-i.length,t=!0)}),t})}function b(){return _.reject(s,function(e){return e.time>1500})}function w(){u=c[f].num_balls-i.length,s.length==0&&(l=!1,u<c[f].target?setTimeout(function(){S(),p()},300):(o+=u,f++,f<=c.length-1?setTimeout(function(){x(),p()},300):T()))}function E(){t.fillStyle="#eb7405",t.fillRect(0,0,r,30),t.fillStyle="#fff",t.font="16px Open Sans",t.fillText("Target: "+c[f].target,20,20),t.fillText("Captured: "+u,120,20),t.fillText("Score: "+o*100,250,20)}function S(){$(".fail").fadeIn("300")}function x(){$(".next h2").text("Target: "+c[f].target),$(".next").fadeIn("300"),setTimeout(function(){$(".next").fadeOut("300")},800)}function T(){$(".win").fadeIn("300")}var e=$("canvas")[0],t=e.getContext("2d"),n=500,r=700,i=[],s=[],o=0,u=0,a=50,f=0,l=!1,c=[{num_balls:3,target:1},{num_balls:8,target:2},{num_balls:12,target:4},{num_balls:20,target:6},{num_balls:25,target:8},{num_balls:25,target:10},{num_balls:40,target:13},{num_balls:40,target:15},{num_balls:45,target:20},{num_balls:40,target:25},{num_balls:50,target:30},{num_balls:50,target:35},{num_balls:55,target:40},{num_balls:58,target:45},{num_balls:65,target:55},{num_balls:73,target:65},{num_balls:80,target:70},{num_balls:80,target:75},{num_balls:80,target:78}];e.height=n,e.width=r,$("body").disableSelection(),setInterval(function(){h()},a),p(),$(".retry").on("click",function(){$(".modal").fadeOut("300")})}function catWall(){function i(e){e.target.mute(),e.target.playVideo()}var e=["INscMGmhmX4","0M7ibPk37_U","R7ssVT6T3mQ","2CNd6OGdMO8","bzvUyu3zOmE","pwHy4gMO6sU","fzzjgBAaWZw","C_S5cXbXe-4","hPzNl6NKAG0","REQRHdMRimw","0Bmhjf0rKe8","SaOqf2d-y30"],t=document.createElement("script");t.src="http://www.youtube.com/player_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var r;window.onYouTubePlayerAPIReady=function(){window.location.pathname=="/cat_wall/page"&&_.each(e,function(e,t){$("<div />",{id:"player"+t,"class":"video"}).appendTo("#video_container"),r=new YT.Player("player"+t,{playerVars:{autohide:1,wmode:"opaque",controls:0,playlist:e,loop:1},videoId:e,events:{onReady:i}})})}}function checkSketch(){var e=window.innerHeight,t=window.innerWidth,n=e*t/324,r=!1;$("#sketch_pad").css({height:e,width:t}),_.each(_.range(1,n),function(e){$("<input>",{type:"checkbox"}).on("mouseover",function(){r&&this.setAttribute("checked","checked")}).appendTo("#sketch_pad")}),$("#turbo").on("click",function(){r?$(this).text("Turbo Mode Off").addClass("turbo_off"):$(this).text("Turbo Mode On").removeClass("turbo_off"),r=!r}),$("#reset").on("click",function(){window.location="/check_sketch/page"})}function clickCounter(){function e(){var e=$("#click_num").text();e++,$("#click_num").text(e)}$("button").on("click",function(t){function n(){$(this).removeAttr("disabled")}t.preventDefault(),$(this).attr("disabled","disabled"),$.ajax({type:"PUT",url:"/click_counter/buttons/1"}),e(),setTimeout($.proxy(n,this),400)}),$("body").disableSelection()}function colorPickerPage(){function l(e){var t=$("<div />",{"class":"swatch_container"}),n=$("<div />",{"class":"swatch",style:"background-color: rgb("+e.r+", "+e.g+", "+e.b+")"}),r=$("<div />",{"class":"close",text:"X"}).on("click",function(){$(this).parent().remove()});$(t).append(r).append(n).append('<div class="swatch_info"><div class="label">RGB: '+e.r+", "+e.g+", "+e.b+'</div><div class="label">HEX: #'+rgbComponentToHex(e.r)+rgbComponentToHex(e.g)+rgbComponentToHex(e.b)+"</div>").prependTo("#palette_container")}var e=$("canvas")[0],t=e.getContext("2d"),n=$("canvas")[1],r=n.getContext("2d"),i=300,s=300,o=40,u=300,a=new Image;e.width=i,e.height=s,n.width=o,n.height=u;var f={color:{r:255,g:0,b:0},makePalette:function(){var i=r.createLinearGradient(0,0,0,n.height);i.addColorStop(0,"rgb(255,   0,   0)"),i.addColorStop(.02,"rgb(255,   0,   0)"),i.addColorStop(.15,"rgb(255,   0, 255)"),i.addColorStop(.33,"rgb(0,     0, 255)"),i.addColorStop(.49,"rgb(0,   255, 255)"),i.addColorStop(.67,"rgb(0,   255,   0)"),i.addColorStop(.84,"rgb(255, 255,   0)"),i.addColorStop(.98,"rgb(255,   0,   0)"),i.addColorStop(1,"rgb(255,   0,   0)"),r.fillStyle=i,r.fillRect(0,0,n.width,n.height),a.onload=function(){t.fillStyle="rgb(255, 0, 0)",t.fillRect(0,0,e.width,e.height),t.drawImage(a,0,0,e.width,e.height)},$("#hue").on("mousedown",function(e){$("#hue").on("mousemove",function(e){var t=e.pageX-n.offsetLeft,i=e.pageY-n.offsetTop,s=f.color,o=r.getImageData(t,i,1,1);$(document).css("cursor","crosshair"),f.color={r:o.data[0],g:o.data[1],b:o.data[2]},f.drawMainCanvas("rgb("+s.r+", "+s.g+", "+s.b+")")}),$(document).on("mouseup",function(){$("canvas").off("mousemove")})}),$("#main").on("mousedown",function(n){$("#main").on("mousemove",function(n){var r=n.pageX-e.offsetLeft,i=n.pageY-e.offsetTop,s=t.getImageData(r,i,1,1);$(document).css("cursor","crosshair"),f.color={r:s.data[0],g:s.data[1],b:s.data[2]},f.updateSwatch()}),$(document).on("mouseup",function(){$("canvas").off("mousemove")})})},drawMainCanvas:function(n){var r=f.color;t.clearRect(0,0,t.width,t.height),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),t.drawImage(a,0,0,e.width,e.height),f.updateSwatch()},colorAsRGB:function(){var e=f.color;return e.r+", "+e.g+", "+e.b},colorAsHex:function(){var e=f.color,t=rgbComponentToHex(e.r),n=rgbComponentToHex(e.g),r=rgbComponentToHex(e.b);return t+n+r},updateSwatch:function(){$("#swatch").css("background-color","#"+f.colorAsHex()),$("#rgb").val(f.colorAsRGB),$("#hex").val(f.colorAsHex)}};$("input").on("change",function(){var e=$(this).val().replace(" ","");if(this.id=="hex"){e=hexToRgb(e.replace("#",""));if(e){var t=180/Math.PI*Math.atan2(Math.sqrt(3)*(e.g-e.b),2*e.r-e.g-e.b)+360;f.color=e,f.updateSwatch(),f.drawMainCanvas("hsl("+t+", 100%, 50%)")}}else if(this.id=="rgb"){var n=[];e=e.replace(" ","").split(","),_.each(e,function(e){var t=parseInt(e);t<=255&&t>=0&&n.push(t)});if(n.length==3){var t=180/Math.PI*Math.atan2(Math.sqrt(3)*(e[1]-e[2]),2*e[0]-e[1]-e[2])+360;f.color.r=n[0],f.color.g=n[1],f.color.b=n[2],f.updateSwatch(),f.drawMainCanvas("hsl("+t+", 100%, 50%)")}}}),f.makePalette(),$("button").on("click",function(){l(f.color)}),$("canvas").disableSelection(),a.src="/assets/color_picker_gradient.png"}function colorWorks(){function e(){var e=$("#color").val();/^([0-9a-fA-F]{6})?$/.test(e)&&e!=""?$("#submit").removeAttr("disabled"):$("#submit").attr("disabled","disabled")}function t(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function n(e,t,n){e/=255,t/=255,n/=255;var r=Math.max(e,t,n),i=Math.min(e,t,n),s,o,u=(r+i)/2;if(r==i)s=o=0;else{var a=r-i;o=u>.5?a/(2-r-i):a/(r+i);switch(r){case e:s=(t-n)/a+(t<n?6:0);break;case t:s=(n-e)/a+2;break;case n:s=(e-t)/a+4}s/=6}return[s,o,u]}function r(e,t){var n=e[0],r=e[1],i=e[2],s="Lightened",o=[];return t<0&&(s="Darkened"),_.each(_.range(5),function(e){var u=i+t*e;u=u<1?u:1,u=u>0?u:0,o.push({h:n,s:r,l:u,label:s,percent:(t*e*100).toFixed(2)})}),o}function i(e,t){var n=e[0],r=e[1],i=e[2],s="Saturated",o=[];return t<0&&(s="Desaturated"),_.each(_.range(5),function(e){var u=r+t*e;u=u<1?u:1,u=u>0?u:0,o.push({h:n,s:u,l:i,label:s,percent:(t*e*100).toFixed(2)})}),o}function s(e,t,n){var r,i,s;if(t==0)r=i=s=n;else{function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return Math.round(r*255+65536).toString(16).substr(-2)+Math.round(i*255+65536).toString(16).substr(-2)+Math.round(s*255+65536).toString(16).substr(-2)}function o(e){var t=$("<div />",{"class":"swatch_row"}).prependTo("#swatch_section");_.each(e,function(e){var n=s(e.h,e.s,e.l),r=$("<div />",{"class":"swatch_container"}),i=$("<div />",{"class":"swatch","data-color":n,style:"background-color: #"+n}).on("click",function(){$("#color").val($(this).data("color")),$("#color").focus()});$(r).append(i).append('<div class="swatch_info"><div class="label">HEX: '+n+'</div><div class="label">'+e.label+": "+Math.abs(e.percent)+"%</div></div>").appendTo(t)})}$("#color_input").on("keyup",function(){e()}),$("#color_input").on("change",function(){e()}),$("form").on("submit",function(e){e.preventDefault();var s=$("#color").val();if(/^([0-9a-fA-F]{6})?$/.test(s)&&s!=""){var u=$("input:radio:checked").val(),a=$("#percent").val().replace("%","")*.01,f=t(s),l=n(f.r,f.g,f.b),c;if(u=="darken"||u=="desaturate")a*=-1;if(u=="darken"||u=="lighten")c=r(l,a);else if(u=="saturate"||u=="desaturate")c=i(l,a);o(c)}else alert("Please enter a 6 digit hex number.")}),$("#reset").on("click",function(){$("#swatch_section").html(""),$("#submit").attr("disabled","disabled")})}function confusedTwitter(){}function countdownClock(){function u(){$("#container").hide(),$(".modal").show()}function a(){var s=new Date,o=i-s;r=Math.floor(o/864e5);var u=o%864e5;n=Math.floor(u/36e5),u=o%36e5,t=Math.floor(u/6e4),u=o%6e4,e=Math.floor(u/1e3),r>9999?(d(),alert("Date too far in the future.")):(f(),setTimeout(a,500))}function f(){l(e,"sec_ones"),l(t,"min_ones"),l(n,"hour_ones"),l(r,"day_ones"),c(e,"sec_tens"),c(t,"min_tens"),c(n,"hour_tens"),c(r,"day_tens"),h(r,"day_hundreds"),p(r,"day_thousands")}function l(e,t){var n=e%10;v(n,t)}function c(e,t){var n=Math.floor(e/10);v(n,t)}function h(e,t){var n=Math.floor(e/100);$(".hundreds").show(),n===0&&$(".hundreds").hide(),v(n,t)}function p(e,t){var n=Math.floor(e/1e3);$(".thousands").show(),n===0&&$(".thousands").hide(),v(n,t)}function d(){l(0,"sec_ones"),l(0,"min_ones"),l(0,"hour_ones"),l(0,"day_ones"),c(0,"sec_tens"),c(0,"min_tens"),c(0,"hour_tens"),c(0,"day_tens"),h(0,"day_hundreds"),p(0,"day_thousands")}function v(e,t){var t="."+t;e==0&&($(t+".bar").show(),$(t+".hor.mid").hide()),e==1&&($(t+".bar").hide(),$(t+".ver.top.right,"+t+".ver.bottom.right").show()),e==2&&($(t+".bar").show(),$(t+".ver.top.left,"+t+".ver.bottom.right").hide()),e==3&&($(t+".bar").show(),$(t+".ver.top.left,"+t+".ver.bottom.left").hide()),e==4&&($(t+".bar").show(),$(t+".hor.top,"+t+".hor.bottom,"+t+".ver.bottom.left").hide()),e==5&&($(t+".bar").show(),$(t+".ver.top.right,"+t+".ver.bottom.left").hide()),e==6&&($(t+".bar").show(),$(t+".ver.top.right").hide()),e==7&&($(t+".bar").hide(),$(t+".ver.top.right,"+t+".ver.bottom.right,"+t+".hor.top").show()),e==8&&$(t+".bar").show(),e==9&&($(t+".bar").show(),$(t+".ver.bottom.left").hide())}var e=0,t=0,n=0,r=0,i,s,o;d(),$("form").on("submit",function(e){e.preventDefault(),d();var t=Number($(".year").val()),n=Number($(".month").val()),r=Number($(".day").val()),s=$(".name").val();_.isNaN(t)?alert("Not a valid year."):_.isNaN(n)?alert("Please enter the month as a number, e.g. enter 3 for March."):_.isNaN(r)?alert("You haven't learned your days yet?"):(i=new Date(t,n-1,r),a(),$(".modal").fadeOut("600"),$("#event_name").text(s),$("#container").fadeIn("600"))})}function downTheWeight(){function r(){var e=$("#current_weight").val().replace(" ",""),r=$("#goal_weight").val().replace(" ",""),s=$("#diet_length").val().replace(" ",""),o=$("#height").val(),u=$("input:radio:checked").val()=="male"?t:n,a=u[o];if(e<=0||r<=0||s<=0||isNaN(e)||isNaN(r)||isNaN(s))alert("All fields must be filled in with values greater than 0.");else{var f=e-a,l=-1/s*Math.log((r-a)/(e-a)),c=_.range(0,Number(s)+1),h=_.map(c,function(e){return(f*Math.exp(-l*e)+a).toFixed(2)});h[0]=="NaN"?alert("You're goal weight is too low. Please enter a higher number for your goal weight."):i(h)}}function i(e){var t=0,n=e[0],r=new Date;_.each(e,function(e,i){var o=s(r,i);t+=n-e,$("<tr />").append("<td>"+o+"</td>").append("<td>"+e+"</td>").append("<td>"+t.toFixed(2)+"</td>").appendTo("#weight_chart"),n=e}),$("#chart_container").fadeIn(300),$(".modal").fadeOut(300)}function s(e,t){return new_date=new Date(e.getTime()+t*24*60*60*1e3),new_date.getMonth()+1+"/"+new_date.getDate()+"/"+new_date.getFullYear()}var e=_.range(54,85),t={},n={};_.each(e,function(e,r){t[String(e)]=55.7+r*4.7,n[String(e)]=55.7+r*3.9}),$("form").on("submit",function(e){e.preventDefault(),$("input").blur(),r()}),$(".print").on("click",function(){window.print()}),$("#reset").on("click",function(){$("#chart_container").hide(),$(".modal").fadeIn(300),$("tbody").remove()})}function dryingPaint(){setTimeout(function(){$("#paint").removeClass("drying").addClass("dry"),$("#cracks").show()},72e5)}function effects(){var e=["bam.png","boom.png","crunch.png","kaboom.png","klang.png","krack.png","oomph.png","ow.png","phoomph.png","ping.png","pow.png","skreech.png","splat.png","thwack.png","wham.png","zazam.png","zoom.png"];e=_.map(e,function(e){var t="/assets/"+e;return $("<img/>")[0].src=t,t}),$("body").on("click",function(t){var n=t.pageX,r=t.pageY,i=e[randomInt(0,16)];$("<img src="+i+">").load(function(){$(this).css({top:r-this.height/2,left:n-this.width/2,position:"absolute"}).appendTo("#image_container")})}),$("body").disableSelection()}function elevationPage(){function f(t){_.each(t,function(t,r){e.geocode({address:t},function(e,t){if(t==google.maps.GeocoderStatus.OK){var i=new google.maps.LatLng(e[0].geometry.location.mb,e[0].geometry.location.nb);n.push(i),r==0?$("#start").attr("placeholder",e[0].formatted_address).val(""):$("#end").attr("placeholder",e[0].formatted_address).val(""),n.length==2&&l()}else alert("Geocode was not successful for the following reason: "+t)})})}function l(){var e={path:n,samples:u};t.getElevationAlongPath(e,c)}function c(e,t){i.clearRect(0,0,s,o),t==google.maps.ElevationStatus.OK?h(e):alert("Unable to plot elevations for the following reason: "+t)}function h(e){var t=_.map(e,function(e){return e.elevation}),n=Math.max.apply(Math,t),r=Math.min.apply(Math,t),i=_.map(t,function(e){return o-(e-r)/(n-r)*o});$("#min").text("Min Elevation: "+r.toFixed(2)+" m"),$("#max").text("Max Elevation: "+n.toFixed(2)+" m"),p(0,i,1)}function p(e,t,n){var r=s/u;t.length>=n+1&&(i.beginPath(),i.lineWidth=3,i.strokeStyle="#fff",i.moveTo(e,t[n-1]),e+=r,i.lineTo(e,t[n]),i.lineJoin="miter",i.stroke(),i.closePath(),a=setTimeout(function(){p(e,t,n+1)},50))}var e=new google.maps.Geocoder,t=new google.maps.ElevationService,n=[],r=$("canvas")[0],i=r.getContext("2d"),s=750,o=450,u=250,a;r.width=s,r.height=o,$("#start").focus(),$("form").on("submit",function(e){e.preventDefault(),n=[];var t=$("#start").val(),r=$("#end").val(),i=[t,r];clearTimeout(a),$("#form_container").fadeOut(300,function(){$("h1").remove(),$("p").remove(),$(".btn").css("display","inline-block"),$(".input").css({margin:5}),$("#start").focus(),$("#form_container").css({width:720,padding:10}).fadeIn(300),$("#graph_container").fadeIn(300,function(){f(i)})})})}function emergencyOff(){function t(){$(".inner_modal.progress_bar").fadeIn(300),setTimeout(function(){$(".inner_bar").css("width",e),n()},100)}function n(){e++,e>395?(e=10,r()):($(".inner_bar").css("width",e),setTimeout(n,20))}function r(){$(".inner_modal.progress_bar").hide(),$(".inner_modal.shut_down").show(),$("#content").addClass("flicker"),setTimeout(function(){$("#content").html(""),$("body").css("background-color","black"),$(".shut_down").addClass("flicker"),setTimeout(function(){$("body").html("")},1e3)},400)}var e=10;$("button").on("click",function(){$(".modal").fadeIn(800),setTimeout(t,800)})}function fishyFriend(){function f(){this.x=randomInt(0,r),this.y=randomInt(n+70,n+100),this.speed=Math.random()*2,this.size=Math.random()*6}function l(){_.each(a,function(e,n){var r=t.createRadialGradient(e.size+e.x,e.size+e.y,e.size*3,e.size+e.x,e.size+e.y,e.size);r.addColorStop(0,"rgba(91,174,252,0.7)"),r.addColorStop(.7,"rgba(207,231,254,0.5)"),t.fillStyle=r,t.shadowBlur=2,t.shadowColor="rgba(255,255,255, 0.3)",t.beginPath(),t.arc(e.x,e.y,e.size,0,Math.PI*2),t.fill(),e.y<0-e.size*2&&(a[n]=new f),e.y-=e.speed}),c()}function c(){i.horizontal+100>o?t.drawImage(i,i.horizontal,i.vertical):t.drawImage(s,s.horizontal,s.vertical),setTimeout(p,50)}function h(){i.horizontal+=(o-i.horizontal-100)/40,i.vertical+=(u-i.vertical-61.5)/40,s.horizontal+=(o-s.horizontal-100)/40,s.vertical+=(u-s.vertical-61.5)/40,l()}function p(){t.clearRect(0,0,r,n),h()}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i=new Image,s=new Image,o=0,u=0,a=[];e.height=n,e.width=r,$(document).on("mousemove",function(e){o=e.pageX,u=e.pageY}),document.addEventListener("touchmove",function(e){e.preventDefault(),o=e.pageX,u=e.pageY},!1),s.onload=function(){p();for(var e=0;e<40;e++)a.push(new f)},i.horizontal=0,i.vertical=0,s.horizontal=0,s.vertical=0,i.src="/assets/fishy_friend.png",s.src="/assets/fishy_friend_right.png"}function forest(){function o(e,n){t.fillStyle=i,t.strokeStyle="rgba(255,255,255,0.1)",t.save(),t.beginPath(),t.translate(e,n),t.rotate(randomInt(0,360)*(Math.PI/180)),t.translate(-e,-n),t.moveTo(e,n),t.quadraticCurveTo(e+7,n-7,e+14,n),t.moveTo(e,n),t.quadraticCurveTo(e+7,n+7,e+14,n),t.lineJoin="round",t.fill(),t.stroke(),t.restore()}function u(e,n,r,s,o){if(o>0){var a=e+s*Math.cos(r),f=n+s*Math.sin(r),l=randomInt(2,5),c=s*.5+randomInt(-5,10);t.lineWidth=o*.6,t.strokeStyle=i,t.beginPath(),t.moveTo(e,n),t.lineTo(a,f),t.lineJoin="miter",t.stroke(),_.each(_.range(l),function(e){var t=r+Math.random()*3*Math.PI/4-3*Math.PI/4/2,n=o-1;setTimeout(function(){u(a,f,t,c,n)},70)})}}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerWidth,r=window.innerHeight,i="#592718",s="tree";e.width=n,e.height=r,t.fillStyle="#fff",t.fillRect(0,0,n,r),$("#save").on("click",function(){var t=e.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("canvas").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;s=="tree"?u(n,r,-Math.PI/2,randomInt(50,80),5):o(n,r)}),$("canvas").on("mousedown",function(){s=="leaf"&&($("canvas").on("mousemove",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;o(n,r)}),$("canvas").on("mouseup",function(){$("canvas").off("mousemove")}))}),$(".color").on("change",function(){i="#"+this.color}),$("#tree_btn").on("click",function(){s="tree"}),$("#leaf_btn").on("click",function(){s="leaf"}),$("body").disableSelection()}function globGlob(){function d(e,n,r,i){this.opacity=.9/(i.l+1),this.x=e,this.y=n,this.radius=r,this.color=i,this.draw=function(){t.beginPath(),t.fillStyle="hsl("+this.color.h+","+this.color.s+"%, "+this.color.l+"%)",t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle="rgba(0,0,0, "+this.opacity+")",t.lineWidth=2,t.stroke(),t.closePath(),t.beginPath(),t.arc(this.x,this.y,this.radius-2,0,2*Math.PI),t.strokeStyle="rgba(0,0,0, "+this.opacity+")",t.lineWidth=4,t.stroke(),t.closePath(),t.beginPath(),t.arc(this.x,this.y,this.radius-3,0,2*Math.PI),t.strokeStyle="rgba(0,0,0, "+this.opacity+")",t.lineWidth=5,t.stroke(),t.closePath()}}function v(){$("body").off(),$(".score").text(i[1].radius+" awesome units!"),i[1].radius>i[0].radius?$("#kudos").text("Nice work beating the last glob grower!"):$("#kudos").text("Too bad you couldn't beat the last glob grower, though."),$(".end").fadeIn(400),$.ajax({type:"PUT",url:"/glob_glob/globs/1",data:{size:i[1].radius}})}function m(){h=(new Date).getTime()-c,f=Math.ceil(a-h/1e3),t.clearRect(0,0,r,n),_.each(i,function(e){e.draw()}),t.fillStyle="#eb7405",t.font="30px Futura",t.textAlign="center",t.fillText(f,r/2,80);if(h>=a*1e3){v();return}setTimeout(m,30)}function g(){i.push(new d(r/3,n/2,p,o)),i.push(new d(r*(2/3),n/2,10,u)),_.each(i,function(e){e.draw()}),t.fillStyle="#eb7405",t.font="30px Futura",t.textAlign="center",t.fillText(f,r/2,80)}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i=[],s=5,o={h:336.8,s:50,l:44.7},u={h:163,s:80,l:45.1},a=10,f=a,l=!1,c,h=0,p=$("canvas").data("size");e.height=n,e.width=r,g(),$("body").on("keydown",function(e){var t=e.charCode||e.keyCode;t==32&&!l&&(l=!0,c=(new Date).getTime(),$(".start").fadeOut(200),m())}),$("body").on("keyup",function(e){var t=e.charCode||e.keyCode;t==32&&(i[1].radius+=1)}),$("body").disableSelection()}function globulator(){function f(e,n,r,i){this.opacity=.9/(i.l+1),this.x=e,this.y=n,this.radius=r,this.color=i,this.tracking=!1,this.volume=function(){return Math.PI*this.radius*(Math.PI*o*o/4+o*(this.radius-o))},this.trackMouse=function(e,t){this.tracking&&(this.x=e,this.y=t)},this.draw=function(){t.beginPath(),t.fillStyle="hsl("+this.color.h+","+this.color.s+"%, "+this.color.l+"%)",t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle="rgba(0,0,0, "+this.opacity+")",t.lineWidth=2,t.
stroke(),t.closePath(),t.beginPath(),t.arc(this.x,this.y,this.radius-2,0,2*Math.PI),t.strokeStyle="rgba(0,0,0, "+this.opacity+")",t.lineWidth=4,t.stroke(),t.closePath(),t.beginPath(),t.arc(this.x,this.y,this.radius-3,0,2*Math.PI),t.strokeStyle="rgba(0,0,0, "+this.opacity+")",t.lineWidth=5,t.stroke(),t.closePath()},this.drag=function(e,t){this.x=e,this.y=t}}function l(e,t,n,r){i.push(new f(e,t,n,r))}function c(){t.clearRect(0,0,n,r),_.each(i,function(e){e.draw()}),requestAnimFrame(c)}function h(e,t){return _.each(i,function(n){e>n.x-n.radius&&e<n.x+n.radius&&t>n.y-n.radius&&t<n.y+n.radius&&(a=n,a.tracking=!0)}),null}function p(e,t){var n=Math.PI*o,r=Math.PI*Math.PI*o*o/4-Math.PI*o*o,i=-e-t;return(-r+Math.pow(r*r-4*n*i,.5))/(2*n)}function d(e,t){var n=e.volume()+t.volume(),r=e.volume()/n*e.x+t.volume()/n*t.x,i=e.volume()/n*e.y+t.volume()/n*t.y;return{x:r,y:i}}function v(e,t){var n=e.volume()+t.volume(),r=(e.color.h+t.color.h)%360,i=e.volume()/n*e.color.s+t.volume()/n*t.color.s,s=e.volume()/n*e.color.l+t.volume()/n*t.color.l;return{h:r,s:i,l:s}}function m(){var e,t,n;i=_.reject(i,function(r){var i=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));if(a!=r&&i<a.radius+r.radius-4)return e=p(a.volume(),r.volume()),t=d(a,r),n=v(a,r),!0}),e&&(a.x=t.x,a.y=t.y,a.radius=e,a.color=n,a.opacity=.9/(n.l+1))}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerWidth,r=window.innerHeight,i=[],s=!0,o=5,u={x:0,y:0},a=null;e.height=r,e.width=n,$("canvas").on("mousedown",function(t){mouse_x=t.pageX-e.offsetLeft,mouse_y=t.pageY-e.offsetTop,h(mouse_x,mouse_y),s=!0,u={x:mouse_x,y:mouse_y}}),$("canvas").on("mousemove",function(t){mouse_x=t.pageX-e.offsetLeft,mouse_y=t.pageY-e.offsetTop;if(Math.abs(u.x-mouse_x)>10||Math.abs(u.y-mouse_y)>10)s=!1;a&&(a.trackMouse(mouse_x,mouse_y),m())}),$("canvas").on("mouseup",function(e){a&&(a.tracking=!1,a=null)}),$("canvas").on("click",function(t){var n=!1,r=t.pageX-e.offsetLeft,o=t.pageY-e.offsetTop;_.each(i,function(e){r>e.x-e.radius&&r<e.x+e.radius&&o>e.y-e.radius&&o<e.y+e.radius&&(n=!0)}),s&&!n&&l(r,o,randomInt(5,50),randomColorHSL())}),c(),$("body").disableSelection()}function hangmanGame(){function f(){t.strokeStyle="#7f8c8d",t.lineWidth=5,t.beginPath(),t.moveTo(250,300),t.lineTo(250,50),t.lineTo(350,50),t.stroke(),t.closePath()}function l(){t.fillStyle="#fff",t.strokeStyle="#2c3e50",t.lineWidth=5,t.beginPath(),t.arc(350.5,80,30,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}function c(){t.strokeStyle="#2c3e50",t.lineWidth=3,t.beginPath(),t.moveTo(350.5,110),t.lineTo(350.5,190),t.closePath(),t.stroke()}function h(){t.strokeStyle="#2c3e50",t.lineWidth=3,t.beginPath(),t.moveTo(350.5,135),t.lineTo(290,100),t.closePath(),t.stroke()}function p(){t.strokeStyle="#2c3e50",t.lineWidth=3,t.beginPath(),t.moveTo(350.5,135),t.lineTo(410,100),t.closePath(),t.stroke()}function d(){t.strokeStyle="#2c3e50",t.lineWidth=3,t.beginPath(),t.moveTo(350.5,189.5),t.lineTo(385,250),t.closePath(),t.stroke()}function v(){t.strokeStyle="#2c3e50",t.lineWidth=3,t.beginPath(),t.moveTo(350.5,189.5),t.lineTo(315,250),t.closePath(),t.stroke()}function m(){var e=s.split("");_.each(e,function(e,t){$("<div/>",{"class":"letter_slot",id:t}).appendTo("#word_container")})}function g(e,t){_.each(e,function(e){$("#"+e).text(t),u++}),u==s.length&&a&&$(".win").fadeIn(300)}function y(){_.each(i,function(e){$("<button/>",{text:e,id:"btn_"+e}).on("click",function(){$(this).attr("disabled","disabled").off(),b($(this).text())}).appendTo("#btn_container")})}function b(e){var t=s,n=[];while(_.indexOf(t,e)!=-1){var r=_.lastIndexOf(t,e);n.push(r),t=t.slice(0,r)}if(n.length>0)g(n,e);else{switch(o){case 0:l();break;case 1:c();break;case 2:h();break;case 3:p();break;case 4:d();break;case 5:v(),w()}o++}}function w(){a=!1,$(".game_over").fadeIn(500),_.each(s,function(e,t){$("#"+t).text()==""&&$("#"+t).addClass("fail").text(e)})}function E(){m(),f(),y()}function S(){var e=new Array("abate","aberrant","abscond","accolade","acerbic","acumen","adulation","adulterate","aesthetic","aggrandize","alacrity","alchemy","amalgamate","ameliorate","amenable","anachronism","anomaly","approbation","archaic","arduous","ascetic","assuage","astringent","audacious","austere","avarice","aver","axiom","bolster","bombast","bombastic","bucolic","burgeon","cacophony","canon","canonical","capricious","castigation","catalyst","caustic","censure","chary","chicanery","cogent","complaisance","connoisseur","contentious","contrite","convention","convoluted","credulous","culpable","cynicism","dearth","decorum","demur","derision","desiccate","diatribe","didactic","dilettante","disabuse","discordant","discretion","disinterested","disparage","disparate","dissemble","divulge","dogmatic","ebullience","eccentric","eclectic","effrontery","elegy","eloquent","emollient","empirical","endemic","enervate","enigmatic","ennui","ephemeral","equivocate","erudite","esoteric","eulogy","evanescent","exacerbate","exculpate","exigent","exonerate","extemporaneous","facetious","fallacy","fawn","fervent","filibuster","flout","fortuitous","fulminate","furtive","garrulous","germane","glib","grandiloquence","gregarious","hackneyed","halcyon","harangue","hedonism","hegemony","heretical","hubris","hyperbole","iconoclast","idolatrous","imminent","immutable","impassive","impecunious","imperturbable","impetuous","implacable","impunity","inchoate","incipient","indifferent","inert","infelicitous","ingenuous","inimical","innocuous","insipid","intractable","intransigent","intrepid","inured","inveigle","irascible","laconic","laud","loquacious","lucid","luminous","magnanimity","malevolent","malleable","martial","maverick","mendacity","mercurial","meticulous","misanthrope","mitigate","mollify","morose","mundane","nebulous","neologism","neophyte","noxious","obdurate","obfuscate","obsequious","obstinate","obtuse","obviate","occlude","odious","onerous","opaque","opprobrium","oscillation","ostentatious","paean","parody","pedagogy","pedantic","penurious","penury","perennial","perfidy","perfunctory","pernicious","perspicacious","peruse","pervade","pervasive","phlegmatic","pine","pious","pirate","pith","pithy","placate","platitude","plethora","plummet","polemical","pragmatic","prattle","precipitate","precursor","predilection","preen","prescience","presumptuous","prevaricate","pristine","probity","proclivity","prodigal","prodigious","profligate","profuse","proliferate","prolific","propensity","prosaic","pungent","putrefy","quaff","qualm","querulous","query","quiescence","quixotic","quotidian","rancorous","rarefy","recalcitrant","recant","recondite","redoubtable","refulgent","refute","relegate","renege","repudiate","rescind","reticent","reverent","rhetoric","salubrious","sanction","satire","sedulous","shard","solicitous","solvent","soporific","sordid","sparse","specious","spendthrift","sporadic","spurious","squalid","squander","static","stoic","stupefy","stymie","subpoena","subtle","succinct","superfluous","supplant","surfeit","synthesis","tacit","tenacity","terse","tirade","torpid","torque","tortuous","tout","transient","trenchant","truculent","ubiquitous","unfeigned","untenable","urbane","vacillate","variegated","veracity","vexation","vigilant","vilify","virulent","viscous","vituperate","volatile","voracious","waver","zealous");return e[parseInt(Math.random()*e.length)]}var e=$("canvas")[0],t=e.getContext("2d"),n=300,r=700,i="abcdefghijklmnopqrstuvwxyz".split(""),s=S(),o=0,u=0,a=!0;e.height=n,e.width=r,E(),$("body").on("keypress",function(e){var t=e.charCode||e.keyCode;if(t>=97&&t<=122){var n=String.fromCharCode(t);$("#btn_"+n).click()}})}function herePage(){function e(e){$("#loading").fadeIn(300),$.ajax({type:"POST",url:"/here/page",dataType:"json",data:{lat:e.coords.latitude,lng:e.coords.longitude},complete:function(e){n(e.responseText)},error:function(){$("#error p").html('Looks like there was a problem finding your location. <br> Maybe <a href="/here/page">try again</a>?'),$("#error").show()}})}function t(e){$("#start").hide(),e.code==1?$("#error p").html('This website requires location services. <br> Please allow geolocation and <a href="/here/page">reload</a> to continue.'):$("#error p").html('Looks like there was a problem finding your location. <br> Maybe <a href="/here/page">try again</a>?'),$("#error").show()}function n(e){var t=$.parseJSON(e);t.length<1?($("#info, #loading").hide(),$("#error p").text("Oh dear, this is unfortunate. We can't seem to find any Instagram photos near you."),$("#error").fadeIn()):(_.each(t,function(e){$("<img />",{src:e.img_url}).appendTo("#img_container")}),r())}function r(){$("#info, #loading").fadeOut(200,function(){$("#here").fadeIn(800,function(){setTimeout(function(){$(".modal").fadeOut(1e3)},1200)})})}navigator.geolocation.getCurrentPosition(e,t)}function hollywoodSign(){function e(){blink=setInterval(function(){$(".letter").css("color",randomColorHex())},500)}$("#l0").on("click",function(){var e=0,t=150,n;_.each(_.range(9),function(e,n){setTimeout(function(){$("#l"+e).addClass("wave")},n*t),setTimeout(function(){$("#l"+e).removeClass("wave")},n*t+700)})}),$("#l4").on("click",function(){e(),$(this).off()}),$("#l5").on("click",function(){clearInterval(blink),$(".letter").css("color","#ebe0d1"),$("#l4").on("click",function(){e(),$(this).off()})}),$("#l8").on("click",function(){$(this).addClass("dangle"),setTimeout(function(){$("#l8").removeClass("dangle")},4e3)}),$("body").disableSelection()}function hourglass(){function f(){var e=110/(s/o);u.y+=e,a.y-=e,setTimeout(h,o)}function l(){t.fillStyle="#1abc9c",t.strokeStyle="#1abc9c",t.fillRect(0,200,r,u.y),t.fillRect(0,397,r,a.y),u.y>=0?(u.y=0,$(".times_up").show()):(c(),f()),t.drawImage(i,i.horizontal,i.vertical)}function c(){t.beginPath(),t.lineWidth=5,t.moveTo(r/2,200),t.lineTo(r/2,n),t.closePath(),t.stroke()}function h(){t.clearRect(0,0,r,n),l()}var e=$("canvas")[0],t=e.getContext("2d"),n=400,r=201,i=new Image,s=1e4,o=50,u={y:-110},a={y:0};e.height=n,e.width=r,$("form").on("submit",function(e){e.preventDefault();var t=Number($(".time").val());_.isNaN(t)?alert("Time limit must be a number."):(s=t*6e4,$(".modal").hide(),h())}),i.horizontal=0,i.vertical=0,i.src="/assets/hourglass.png"}function imageEditor(){function f(){t.clearRect(0,0,e.width,e.height)}function l(){var n=t.getImageData(0,0,e.width,e.height),r=n.data;for(var i=0;i<r.length;i+=4){var s=.2126*r[i]+.7152*r[i+1]+.0722*r[i+2];r[i]=s,r[i+1]=s,r[i+2]=s}t.putImageData(n,0,0)}function c(){var n=t.getImageData(0,0,e.width,e.height),r=n.data;for(var i=0;i<r.length;i+=4)r[i]=.393*r[i]+.769*r[i+1]+.189*r[i+2],r[i+1]=.349*r[i]+.686*r[i+1]+.168*r[i+2],r[i+2]=.272*r[i]+.534*r[i+1]+.131*r[i+2];t.putImageData(n,0,0)}function h(n){var r=t.getImageData(0,0,e.width,e.height),i=r.data;for(var s=0;s<i.length;s+=4)i[s]+=n,i[s+1]+=n,i[s+2]+=n;t.putImageData(r,0,0)}function p(n,r){var i=t.getImageData(0,0,e.width,e.height),s=i.data;for(var o=0;o<s.length;o+=4)n=="red"?s[o]+=r:n=="green"?s[o+1]+=r:n=="blue"?s[o+2]+=r:n=="alpha"&&(s[o+3]+=r);t.putImageData(i,0,0)}function d(){u=!1,e.width=i.width,e.height=i.height,t.drawImage(i,0,0)}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerWidth-160,r=window.innerHeight-100,i=document.createElement("img"),s=document.createElement("canvas"),o=s.getContext("2d"),u=!0,a=$("body")[0];e.width=n,e.height=r,i.addEventListener("load",function(){f(),d()},!1),a.addEventListener("dragover",function(e){$(".modal").fadeOut(300),e.preventDefault()},!1),a.addEventListener("drop",function(e){var t=e.dataTransfer.files;if(t.length>0){var n=t[0];if(typeof FileReader!="undefined"&&n.type.indexOf("image")!=-1){var r=new FileReader;r.onload=function(e){i.src=e.target.result,d()},r.readAsDataURL(n)}}e.preventDefault()},!1),$("#image_loader").on("change",function(e){$(".modal").fadeOut(300);var t=new FileReader;t.onload=function(e){i.src=e.target.result,d()},t.readAsDataURL(e.target.files[0])}),$("#grayscale").on("click",function(){l()}),$("#vintage").on("click",function(){c()}),$(".bright").on("click",function(){var e=$(this).data("value");h(e*3)}),$(".rgba").on("click",function(){var e=$(this).data("value"),t=$(this).data("color");p(t,e*3)}),$(".resize").on("change",function(){var n=$(this).val();$.isNumeric(n)?(o.clearRect(0,0,s.width,s.height),s.width=e.width,s.height=e.height,o.drawImage(e,0,0),f(),e.height*=n,e.width*=n,t.drawImage(s,0,0,e.width,e.height)):alert("Resize percentage must be a decimal number."),$(this).val("")}),$("#save").on("click",function(){var t=e.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("#reset").on("click",function(){f(),u||d()}),$("#clear").on("click",function(){f(),e.width=n,e.height=r,u=!0,$(".modal").show()}),$("body").disableSelection()}function imagePalette(){function u(e){var t=$("<div />",{"class":"swatch_container"}),n=$("<div />",{"class":"swatch",style:"background-color: rgb("+e[0]+", "+e[1]+", "+e[2]+")"});$(t).append(n).append('<div class="swatch_info"><div class="label">RGB: '+e[0]+", "+e[1]+", "+e[2]+'</div><div class="label">HEX: #'+a(e[0])+a(e[1])+a(e[2])+"</div>").prependTo("#palette")}function a(e){var t=e.toString(16);return t.length==1?"0"+t:t}var e=$("canvas")[0],t=e.getContext("2d"),n=document.createElement("img"),r=300,i=200;e.width=r,e.height=i;var s=!0,o=function(){t.clearRect(0,0,e.width,e.height),s=!1};t.font="16px Geneva",t.textAlign="center",t.fillStyle="#999",t.fillText("Drag an image from your",r/2,i/2-60),t.fillText("computer into this box.",r/2,i/2-35),t.fillText("Click on the image to add",r/2,i/2+35),t.fillText("the color to the color palette.",r/2,i/2+60),n.addEventListener("load",function(){o(),e.width=n.width,e.height=n.height,$("canvas").css("cursor","crosshair"),t.drawImage(n,0,0)},!1),e.addEventListener("dragover",function(e){e.preventDefault()},!1),e.addEventListener("drop",function(e){var t=e.dataTransfer.files;if(t.length>0){var r=t[0];if(typeof FileReader!="undefined"&&r.type.indexOf("image")!=-1){var i=new FileReader;i.onload=function(e){n.src=e.target.result},i.readAsDataURL(r)}}e.preventDefault()},!1),$("canvas").on("click",function(n){if(!s){var r=n.pageX-e.offsetLeft,i=n.pageY-e.offsetTop,o=t.getImageData(r,i,1,1),a=o.data;$("button").show(),u(a)}}),$("button").on("click",function(){$("button").hide(),$("#palette").html("")})}function infiniteDescent(){function a(){var e=Math.PI,n=0;t.clearRect(-o/2,-o/2,o*2,o*2),t.beginPath(),t.translate(i,s),t.rotate(.1);while(n<o)e+=.1,n=.07*Math.pow(e,2),x=0+n*Math.cos(e),y=0+n*Math.sin(e),t.lineTo(x,y);t.strokeStyle="#f0f0f0",t.lineWidth=5,t.stroke(),t.closePath(),t.translate(-i,-s),setTimeout(a,40)}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i=r/2,s=n/2,o=r>n?r:n,u=new Howl({urls:["/assets/infinite_descent.mp3","/assets/infinite_descent.ogg"],loop:!0,autoplay:!0,volume:.85});e.height=n,e.width=r,a()}function keepItUpGame(){function l(){t.clearRect(0,0,r,n),c(),v()}function c(){t.fillStyle="#17b078",t.beginPath(),t.arc(f.x,f.y,f.r,0,2*Math.PI),t.fill(),t.closePath(),h()}function h(){f.y=f.y0-f.v0y*f.time+o*Math.pow(f.time,2),f.time+=s,f.y>n+f.r*2&&(clearInterval(a),$("input.score").val(i),$("h2.score").text("Your score is "+i),$("#game_over").show())}function p(e,t){if(e>f.x-f.r&&e<f.x+f.r&&t>f.y-f.r&&t<f.y+f.r)return!0}function d(){f.time=0,f.y0=f.y,f.v0y+=.025}function v(){t.fillStyle="#de1d91",t.font="bold 18px Lucida Grande",t.fillText("Score: "+i,30,30)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight*.8,r=500,i=0,s=30,o=25e-5,u,a,f={x:r/2,y:n-30,x0:r/2,y0:n-30,v0y:.23,time:0,r:20};e.height=n,e.width=r,l(),$(".start_btn").on("click",function(){$("#start").fadeOut("400")}),$("canvas").on("mousedown",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;p(n,r)&&(u===undefined?(a=setInterval(l,s),u=!0,i++):(d(),i++))}),$("form").on("submit",function(e){$("#enter_name").val().length>30?(e.preventDefault(),$("#enter_name").val(""),alert("Your name is too long. Better think of a nickname.")):$("#enter_name").val().trim()==""?(e.preventDefault(),$("#enter_name").val(""),alert("Too embarrassed to enter a name, huh? TOO BAD! Name can't be empty!")):($("#enter_name").val($("#enter_name").val().trim()),$("input.score").val(i))}),$("body").disableSelection()}function kingOfComments(){$(".comment_entry").focus(),$("#comment_entry_form").on("submit",function(e){$(".name_entry").val().length>30?(e.preventDefault(),$("#enter_name").val(""),alert("Name limit is 30 characters")):$(".comment_entry").val().trim()==""?(e.preventDefault(),$(".comment_entry").val(""),alert("You really have nothing to say except nothing?")):($(".comment_entry").val($(".comment_entry").val().trim()),$(".name_entry").val($(".name_entry").val().trim()))}),$(".voter").on("keypress",function(e){e.which==13&&e.preventDefault()})}function letterStorm(){function h(){s.push(new d),s.length<12&&setTimeout(h,600)}function p(){t.clearRect(0,0,e.width,e.height),l.draw(),c.draw();for(var n=0;n<s.length;n++)s[n].draw();u.draw(),a.draw(),f.draw(),c.time<=0?($("#game_over p").text("Your score: "+l.score),$("#game_over").show()):requestAnimFrame(p)}function d(){this.init=function(){this.character=o[randomInt(0,o.length-1)],this.x=randomInt(10,e.width-10),this.y=-20,this.y0=-20,this.v0y=0,this.time=0,this.acceleration=3e-6,this.radius=20},this.draw=function(){var e=this.x-22,n=this.y-40;t.beginPath(),t.fillStyle="#d4eefb",t.moveTo(20+e,1+n),t.bezierCurveTo(7+e,21+n,1+e,31+n,1+e,43+n),t.bezierCurveTo(1+e,47+n,6+e,60+n,23+e,60+n),t.bezierCurveTo(40+e,60+n,44+e,46+n,44+e,42+n),t.bezierCurveTo(44+e,31+n,37+e,21+n,21+e,1+n),t.fill(),t.closePath(),t.beginPath(),t.font="28px Futura",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#0e1343",t.fillText(this.character,this.x,this.y),t.closePath(),this.evolve()},this.evolve=function(){this.y+=1.6,this.y>e.height+this.radius+70&&this.init()},this.init()}function v(e,t){_.some(s,function(n){return y(e,t,n.x,n.y,n.radius)?(g(n.character),n.init(),!0):!1})}function m(e){e=e.toUpperCase(),_.some(s,function(t){return e==t.character?(g(t.character),t.init(),!0):!1})}function g(e){u.word+=e}function y(e,t,n,r,i){var s=e-n,o=t-r;return s*s+o*o<=i*i}function b(e){e=e.toLowerCase(),_.indexOf(big_word_list,e)!=-1?(l.score+=Math.round(Math.pow(e.length,1.5)),c.time+=e.length*8,$("#status h1").text("CORRECT").addClass("correct")):$("#status h1").text("WRONG").addClass("wrong"),$("#status").show(),setTimeout(function(){$("#status").fadeOut(300)},1200),u.word=""}var e=$("canvas")[0],t=e.getContext("2d"),n=800,r=580,i=100,s=[],o="eeeeeeaaaaiiiioooonnnnrrrrttttlllssssuuudddgggbbbcccmmmppffhhvvvwwwyyykkjjxxqqzz".toUpperCase().split(""),u={x:n/3,y:r-25,word:"",draw:function(){t.beginPath(),t.fillStyle="#0e1343",t.fillRect(0,e.height-50,e.width,e.height),t.fillStyle="#fff",t.font="28px Futura",t.textAlign="center",t.textBaseline="middle",t.fillText(this.word,this.x,this.y),t.closePath()}},a={x:n-200,y:r-50,width:100,draw:function(){t.beginPath(),t.fillStyle="#04acff",t.fillRect(this.x,this.y,this.width,e.height),t.fillStyle="#fff",t.font="18px Futura",t.textAlign="center",t.textBaseline="middle",t.fillText("Submit",this.x+this.width/2,u.y),t.closePath()}},f={x:n-100,y:r-50,width:100,draw:function(){t.beginPath(),t.fillStyle="#ff6600",t.fillRect(this.x,this.y,this.width,e.height),t.fillStyle="#fff",t.font="18px Futura",t.textAlign="center",t.textBaseline="middle",t.fillText("Clear",this.x+this.width/2,u.y),t.closePath()}},l={x:30,y:20,score:0,draw:function(){t.beginPath(),t.fillStyle="#0e1343",t.font="14px Futura",t.textAlign="top",t.textBaseline="middle",t.fillText("Score: "+this.score,this.x,this.y),t.closePath()}},c={x:n-20,y:20,time:300,draw:function(){t.beginPath(),t.fillStyle="#04acff",t.fillRect(this.x,this.y,-1*this.time,16),t.closePath(),c.time-=.1}};e.height=r,e.width=n,$("#start_btn").on("click",function(){$("#start").hide(),h(),p()}),$("canvas").on("mousedown",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;r>=e.height-50?(console.log("in cont"),n>a.x&&n<a.x+a.width?b(u.word):n>f.x&&n<f.x+f.width&&(u.word="")):v(n,r)}),$(document).on("keypress",function(e){e.preventDefault();var t=e.keyCode?e.keyCode:e.which,n=String.fromCharCode(e.charCode);t==13?b(u.word):t==32?u.word="":m(n)}),$("body").disableSelection()}function lightsOn(){function i(i,o,u){function a(t,i){var s=i.position,o=[s-1,s+1,s-n,s+n];s%n==0?o[0]=!1:s%n==n-1&&(o[1]=!1),_.each(o,function(e,t){if(e<0||e>n*n-1)o[t]=!1}),i.flip(),_.each(o,function(t){t!==!1&&e[t].flip()}),r+=1,$("#score").text("Moves: "+r),f()}function f(){var t=_.some(e,function(e){if(e.on==0)return!0});t||l()}function l(){t+=1,n+=1,$("#win h2").text("Level completed in "+r+" moves."),$("#level").text("Next Level: "+t),$("#win").fadeIn(500,function(){s(),setTimeout(function(){$("#win").fadeOut(500)},3e3)})}this.x=i,this.y=o,this.radius=20,this.on=!1,this.position=u,this.init=function(){var e=this;$("<div>",{id:"light"+this.position,"class":"light off",style:"left:"+this.x+"px; top: "+this.y+"px;"}).on("click",function(t){a(t,e)}).appendTo("#lights_container")},this.flip=function(){this.on=!this.on,this.on?$("#light"+this.position).removeClass("off").addClass("on"):$("#light"+this.position).removeClass("on").addClass("off")},this.init()}function s(){var t=0,s=0,o=45;e=[],r=0,$("#lights_container").html(""),$("#wrapper").css("width",o*n),_.each(_.range(n*n),function(r){e.push(new i(t,s,r)),t+=o,t>=n*o&&(s+=o,t=0)})}var e=[],t=1,n=3,r=0;s(),$("#start_btn").on("click",function(){$("#start").fadeOut(500)}),$("#goto").on("click",function(){var e=$.trim($("input").val());e>0&&(t=e,n*=e,s()),$("#start").fadeOut(500)})}function liquorLikes(){$(".liquor").on("click",function(e){if(e.target.className=="like_btn"){var t=$(this).find(".like_count span");t.html(Number(t.html())+1),$(e.target).attr("disabled","disabled").html("Liked!"),Number(t.html())==1?$(this).find(".people").html("person"):$(this).find(".people").html("people"),$.ajax({type:"POST",url:"/liquor_likes/likes",data:{liquor_id:e.target.id},error:function(e){e.status==401&&(window.location="/users/sign_in")}})}})}function makeADude(){$("#make_a_dude_dude_name").on("keyup",function(){$(".dude_name").text($(this).val())}),$("#make_a_dude_dude_message").on("keyup",function(){$(".dude_message").text($(this).val())}),$(".color").on("change",function(){$(".head").css("backgroundColor","#"+this.color)}),$("input").on("keypress",function(e){e.which==13&&e.preventDefault()})}function mastermindGame(){function s(){$("#row_"+n+" .peg.hole").droppable({drop:function(t,n){var i=n.helper.context.id;r[$(this).data("index")]=e[i],$(this).css({"background-color":e[i]})}}),o()}function o(){var e=parseInt(n)+1;$("#row_"+n).addClass("active"),$("#row_"+e).removeClass("active")}function u(){var e={};return _.each(t,function(t){e[t]=e[t]?e[t]+1:1}),e}function a(){var e={red_marks:0,white_marks:0},n=u();_.each(r,function(r,i){n[r]&&(n[r]-=1,e.white_marks+=1),r==t[i]&&(e.red_marks+=1)}),f(e)}function f(e){_.each(_.range(e.white_marks),function(e){$("#row_"+n+' .key[data-index="'+e+'"]').css("background-color","white")}),_.each(_.range(e.red_marks),function(e){$("#row_"+n+' .key[data-index="'+e+'"]').css("background-color","#dd0000")}),e["red_marks"]==4?(alert("You cracked the code!"),c(),$("button").off()):l()}function l(){$("#row_"+n+" .peg.hole").droppable("destroy"),n-=1,r=[],n==0?($("button").off(),alert("You lose!"),c()):s()}function c(){_.each(t,function(e,t){$('.code .peg[data-index="'+t+'"]').css("background-color",e).fadeIn(500)})}var e=["#eb1144","#11d3ed","#f2680c","#c111ed","#0ee307","#3375e8"],t=[],n=8,r=[];for(var i=0;i<6;i++)$("<div />",{"class":"guess peg color",id:i}).draggable({helper:"clone",snap:".peg"}).appendTo("#c"+i).css({"background-color":e[i]});for(var i=0;i<4;i++)t.push(e[randomInt(0,e.length-1)]);$(".start").on("click",function(){$(".info").fadeOut("500")}),$(".submit").on("click",function(){r.length==4?a():alert("Guess cannot have empty slots.")}),s(),$("body").disableSelection()}function mishmosh(){var e=window.innerWidth,t=window.innerHeight,n=document.getElementById("container"),r={},i=new Kinetic.Stage({container:"container",width:e,height:t}),s=new Kinetic.Layer;$(document).on("mousemove",function(e){r.x=e.pageX,r.y=e.pageY}),n.addEventListener("dragover",function(e){e.preventDefault(),$(".modal").fadeOut(400)},!1),n.addEventListener("drop",function(e){var t=e.dataTransfer.files,o=new Image,u=e.pageX-n.offsetLeft,a=e.pageY-n.offsetTop;if(t.length>0){var f=t[0];if(typeof FileReader!="undefined"&&f.type.indexOf("image")!=-1){var l=new FileReader;l.onload=function(e){o.onload=function(){var e=o.width*.5,t=o.height*.5,n=new Kinetic.Image({x:u,y:a,image:o,width:e,height:t,draggable:!0});n.setOffset(e/2,t/2),n.on("dblclick",function(e){n.remove(),s.draw()}),n.on("mousedown",function(e){e.altKey&&n.on("mousemove",function(e){var t=this.attrs.x-r.x,i=this.attrs.y-r.y,o=Math.atan2(t,i);n.setRotation(-o-Math.PI/2),s.draw()});if(e.shiftKey){var t=this.attrs.x-r.x,i=this.attrs.y-r.y,o=Math.sqrt(t*t+i*i),u=n.getScale().x;n.on("mousemove",function(e){t=this.attrs.x-r.x,i=this.attrs.y-r.y;var a=Math.sqrt(t*t+i*i),f=n.getScale().x;n.setScale(u*a/o),s.draw()})}}),$("body").on("mouseup",function(){n.off("mousemove")}),$("body").on("keydown",function(e){n.setDraggable(!1)}),$("body").on("keyup",function(e){n.setDraggable(!0),n.off("mousemove")}),s.add(n),i.add(s)},o.src=e.target.result},l.readAsDataURL(f)}}e.preventDefault()},!1),$("#save").on("click",function(){var e=$("canvas")[0],t=e.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t})}function momentOfPeace(){function o(e){function i(){n+=100,r=Math.floor(n/100)/10;var s=(new Date).getTime()-t-n;r<e*60?setTimeout(i,100-s):u()}var t=(new Date).getTime(),n=0,r="0.0";setTimeout(i,100)}function u(){s.fadeOut(0,2e3),$("canvas").fadeOut(1e3,function(){$(".headline_container h1").text("Your Moment Is Complete"),$(".headline_container p").text("Feel free to take another moment if you wish."),$(".headline_container p").text("Feel free to take another moment if you wish."),$(".start").fadeIn(1e3)})}function a(){this.init=function(){this.x=randomInt(0,e.width),this.y=-50,this.radius=randomInt(1,8),this.vx=randomFloat(-0.7,.7),this.vy=randomFloat(.2,1.5),this.opactity=randomFloat(.05,.2),this.color="rgba(255, 255, 255, "},this.draw=function(){t.beginPath(),t.fillStyle=this.color+this.opactity,t.shadowBlur=10,t.shadowColor=this.color+this.opactity,t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color+this.opactity,t.fill(),t.closePath(),this.evolve()},this.evolve=function(){this.x+=this.vx,this.y+=this.vy,this.radius+=.02,(this.x>e.width+this.radius||this.x<0-this.radius||this.y>e.height+this.radius)&&this.init()},this.init()}function f(e){i.push(new a),i.length<e&&setTimeout(function(){f(e)},500)}function l(){t.clearRect(0,0,e.width,e.height),_.each(i,function(e){e.draw()}),requestAnimFrame(l)}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i=[],s=new Howl({urls:["/assets/moments_peace.mp3","/assets/moments_peace.ogg"],volume:.7,loop:!0});e.height=n,e.width=r,f(e.width/50),l(),$(".time_container").on("click",function(){var e=this.id;s.fadeIn(.7,1e3),$(".start").fadeOut(1e3,function(){$("canvas").fadeIn(1e3),o(e)})})}function moreDropShadow(){$("body").disableSelection()}function morseCoder(){function c(){u.length>a&&(a+=1,f=o[u[a-1]],l=0,f==undefined?setTimeout(c,r):h())}function h(){f.length>l?(l+=1,f[l-1].play()):setTimeout(c,n)}var e=100,t=e,n=e*2,r=e*3,i=new Howl({urls:["/assets/dot.mp3","/assets/dot.ogg"],volume:.6,onend:function(){setTimeout(h,t)}}),s=new Howl({urls:["/assets/dash.mp3","/assets/dash.ogg"],volume:.6,onend:function(){setTimeout(h,t)}}),o={a:[i,s],b:[s,i,i,i],c:[s,i,s,i],d:[s,i,i],e:[i],f:[i,i,s,i],g:[s,s,i],h:[i,i,i,i],i:[i,i],j:[i,s,s,s],k:[s,i,s],l:[i,s,i,i],m:[s,s],n:[s,i],o:[s,s,s],p:[i,s,s,i],q:[s,s,i,s],r:[i,s,i],s:[i,i,i],t:[s],u:[i,i,s],v:[i,i,i,s],w:[i,s,s],x:[s,i,i,s],y:[s,i,s,s],z:[s,s,i,i],0:[s,s,s,s,s],1:[i,s,s,s,s],2:[i,i,s,s,s],3:[i,i,i,s,s],4:[i,i,i,i,s],5:[i,i,i,i,i],6:[s,i,i,i,i],7:[s,s,i,i,i],8:[s,s,s,i,i],9:[s,s,s,s,i],".":[i,s,i,s,i,s],",":[s,s,i,i,s,s],"?":[i,i,s,s,i,i],"'":[i,s,s,s,s,i],"!":[s,i,s,i,s,s],"(":[s,i,s,s,i],")":[s,i,s,s,i,s],":":[s,s,s,i,i,i],";":[s,i,s,i,s,i],"+":[i,s,i,s,i],"-":[s,i,i,i,i,s],_:[i,i,s,s,i,s],'"':[i,s,i,i,s,i]},u,a,f,l;$(".btn").on("click",function(){u=$("textarea").val().trim().toLowerCase().split(""),a=0,c()})}function mustWrite(){if($("#show_container").length){var e=window.location.pathname,t=new Howl({urls:["/assets/bb2.mp3","/assets/bb2.ogg"],volume:.7}),n=new Howl({urls:["/assets/aggressive.mp3","/assets/aggressive.ogg"],loop:!0}),r=!1,i={time:0,last_type:0,reminds:0};$("body").on("keypress",function(){i.typing=!0,i.last_type=i.time}),$("#show_save").on("click",function(t){t.preventDefault();var n=$(".page_content").val();$.ajax({type:"PUT",dataType:"json",url:e,data:{content:n}})});function s(){i.time+=.5,i.time>i.last_type+20&&i.reminds>=3?o(n):i.time>i.last_type+20?o(t):setTimeout(s,500)}function o(e){e.play(),i.reminds+=1,i.time=0,alert("You should probably get back to writing now."),e.stop(),s()}s()}}function needDrink(){function i(r){var i=new google.maps.LatLng(r.coords.latitude,r.coords.longitude);e=new google.maps.Map(document.getElementById("map"),{mapTypeId:google.maps.MapTypeId.ROADMAP,center:i,zoom:15});var o={location:i,radius:"500",types:["bar","night_club"],openNow:!0,radius:700};n=new google.maps.InfoWindow,t=new google.maps.places.PlacesService(e),t.nearbySearch(o,s)}function s(e,t){r=e,t==google.maps.places.PlacesServiceStatus.OK?o():$(".inner_modal").fadeOut(300,function(){$(".inner_modal").html("<h1>Sorry. No results found.</h1><h2>Looks like you're on your own. Good luck thirsty one!</h2>").fadeIn(300)})}function o(){if(r.length==0)$(".inner_modal").fadeOut(300,function(){$(".inner_modal").html("<h1>Sorry. No results found.</h1><h2>Looks like you're on your own. Good luck thirsty one!</h2>").fadeIn(300)});else{var t=r[randomInt(0,r.length-1)],i=t.geometry.location,s=new google.maps.Marker({map:e,position:i});google.maps.event.addListener(s,"click",function(){var r=t.name+"<br>"+t.vicinity;n.setContent(r),n.open(e,this)}),$("#bar_result").text(t.name+" is open for drinks!"),r=_.reject(r,function(e){if(e==t)return!0}),$(".modal").fadeOut(500)}}function u(e){$("#start").hide(),e.code==1?$("#error p").html('This website requires location services. <br> Please allow geolocation and <a href="/here/page">reload</a> to continue.'):$("#error p").html('Looks like there was a problem finding your location. <br> Maybe <a href="/here/page">try again</a>?'),$("#error").show()}var e,t,n,r;navigator.geolocation.getCurrentPosition(i,u),$(".btn").on("click",function(){r.length>0?o():$("#bar_result").text("No more search results")})}function noOneWatching(){function n(){window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var e=document.querySelector("video"),t=function(e){};navigator.getUserMedia&&navigator.getUserMedia({audio:!1,video:!0},function(t){e.src=window.URL.createObjectURL(t)},t)}function r(){$("#message").fadeIn(300),setTimeout(i,300)}function i(){$("#message").fadeOut(randomInt(300)),setTimeout(r,randomInt(8e3,2e4))}var e=$(window).height(),t=$(window).width();$("video")[0].width=t,n(),setTimeout(r,1e4)}function nothing(){}function onePage(){$("textarea").focus()}function openNote(){}function otherSide(){function o(r){e.geocode({address:r},function(e,r){if(r==google.maps.GeocoderStatus.OK){var o=e[0].geometry.location.mb,a=e[0].geometry.location.nb,f=new google.maps.LatLng(o,a),l=new google.maps.LatLng(o*-1,a>0?(180-a)*-1:180-Math.abs(a));if(s){var c={zoom:i,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP},h={zoom:i,center:l,mapTypeId:google.maps.MapTypeId.ROADMAP};t=new google.maps.Map($("#input_map")[0],c),n=new google.maps.Map($("#other_map")[0],h)}u(f,t),u(l,n)}else alert("We could not find any results. Please check your input and try again.")})}function u(e,t){t.setCenter(e),t.setZoom=i;var n=new google.maps.Marker({map:t,position:e});r.push(n),s&&(f(),s=!1)}function a(e){_.each(r,function(e){e.setMap(null)}),r=[],o(e)}function f(){$("#headlines").animate({opacity:0},200,function(){$("#headlines").remove(),$("header").animate({opacity:1},400),$("form").animate({top:60},400,function(){$("#map_container").animate({opacity:1
},400)})})}var e=new google.maps.Geocoder,t,n,r=[],i=3,s=!0;$("#address_input").focus(),$("form").on("submit",function(e){e.preventDefault();var t=$("#address_input").val().replace(/^\s+|\s+$/g,"");t==""?alert("Please enter a valid address or zipcode."):($("#address_input").val("").attr("placeholder",t).focus(),a(t))})}function photobooth(){function c(){var e=function(e){alert("Sorry. This website requires camera access.")};navigator.getUserMedia&&navigator.getUserMedia({audio:!1,video:!0},function(e){l.src=window.URL.createObjectURL(e),l.play(),h(),$(".access").hide(),d()},e)}function h(){p(),u<4&&requestAnimFrame(h)}function p(){t&&l.videoWidth>0&&l.videoHeight>0&&(e.width!=l.videoWidth*f&&(e.width=l.videoWidth*f,n.width=l.videoWidth*f),e.height!=l.videoHeight*f&&(e.height=l.videoHeight*f,n.height=l.videoHeight*f*4)),t.drawImage(l,0,0,e.width,e.height)}function d(){a>=0?($("#countdown").text(a),setTimeout(d,1e3)):($("#countdown_container").hide(),v()),a-=1}function v(){g();var t=e.toDataURL(),n=new Image;n.onload=function(){r.drawImage(n,0,o),o+=n.height,u+=1},n.src=t,u<3?setTimeout(v,3e3):m()}function m(){$("#container").hide(),$("#photo_container").fadeIn(400)}function g(){$("#flash").fadeIn(20),setTimeout(function(){$("#flash").fadeOut(20)},50)}var e=$("#video_capture")[0],t=e.getContext("2d"),n=$("#final_canvas")[0],r=n.getContext("2d"),i=600,s=400,o=0,u=0,a=3,f=.35;window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var l=$("video")[0];$(".start_btn").on("click",function(){$(".start").hide(),$("#countdown_container").show(),$(".access").show(),c()}),$("#save").on("click",function(){var e=n.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=e}),$("#reset").on("click",function(){o=0,u=0,a=3,$("#photo_container").hide(),$("#container").show(),$("#countdown_container").show(),h(),d()})}function picnic(){function a(e,n){this.x=e,this.y=n,this.radius=10,this.color="#222222",this.vx=(Math.random()-.5)*4,this.vy=(Math.random()-.5)*4,this.legs_in=randomInt(0,1),this.draw=function(){var e=this.legs_in?1.63:1.75;t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.lineWidth=3,t.moveTo(this.x,this.y),t.lineTo(this.x+this.radius*e,this.y),t.moveTo(this.x,this.y),t.lineTo(this.x-this.radius*e,this.y),t.moveTo(this.x,this.y),t.lineTo(this.x+this.radius*e,this.y+this.radius*.65),t.moveTo(this.x,this.y),t.lineTo(this.x-this.radius*e,this.y+this.radius*.65),t.moveTo(this.x,this.y),t.lineTo(this.x+this.radius*e,this.y-this.radius*.65),t.moveTo(this.x,this.y),t.lineTo(this.x-this.radius*e,this.y-this.radius*.65),t.strokeStyle=this.color,t.stroke(),t.closePath(),t.beginPath(),t.fillStyle="white",t.arc(this.x+this.radius*.4,this.y+this.radius*.5,this.radius*.2,0,2*Math.PI),t.arc(this.x-this.radius*.4,this.y+this.radius*.5,this.radius*.2,0,2*Math.PI),t.fill(),t.closePath(),this.legs_in=!this.legs_in}}function f(){_.each(_.range(o),function(e){i.push(new a(randomInt(0,n),randomInt(0,r),"#222222"))})}function l(){_.each(i,function(e){var t=e.x-u.x,s=e.y-u.y,o=Math.sqrt(Math.pow(t,2)+Math.pow(s,2)),a=50,f=s/o*a,l=t/o*a;e.vx+=l/Math.pow(o,1.6),e.vy+=f/Math.pow(o,1.6),e.x+=e.vx,e.y+=e.vy,_.each(i,function(t){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));if(e!=t&&i<e.radius+t.radius){var s=e.vx,o=e.vy;e.vx=t.vx,e.vy=t.vy,t.vx=s,t.vy=o}}),e.x<e.radius*-2&&(e.x=e.radius*-2,e.vx=Math.random()*2,e.vy=(Math.random()-.5)*4),e.x>n+e.radius*2&&(e.x=n+e.radius*2,e.vx=-1*Math.random()*2,e.vy=(Math.random()-.5)*4),e.y<e.radius*-2&&(e.y=e.radius*-2,e.vx=(Math.random()-.5)*4,e.vy=Math.random()*2),e.y>r+e.radius*2&&(e.y=r+e.radius*2,e.vx=(Math.random()-.5)*4,e.vy=-1*Math.random()*2)}),setTimeout(p,40)}function c(e,n){this.time=0,this.x=e-10,this.y=n-10,this.draw=function(){t.beginPath(),t.fillStyle="rgba(0,0,0,0.75)",t.moveTo(this.x,this.y),t.bezierCurveTo(-1+this.x,-7+this.y,3+this.x,-14+this.y,13+this.x,-8+this.y),t.bezierCurveTo(19+this.x,-4+this.y,21+this.x,-4+this.y,26+this.x,-11+this.y),t.bezierCurveTo(43+this.x,-16+this.y,27+this.x,-4+this.y,45+this.x,-3+this.y),t.bezierCurveTo(57+this.x,6+this.y,43+this.x,14+this.y,29+this.x,6+this.y),t.bezierCurveTo(23+this.x,10+this.y,30+this.x,23+this.y,12+this.x,10+this.y),t.bezierCurveTo(-2+this.x,16+this.y,-12+this.x,9+this.y,this.x,this.y),t.fill(),this.time+=1}}function h(){s=_.reject(s,function(e){if(e.time>20)return!0})}function p(){t.clearRect(0,0,n,r),_.each(s,function(e){e.draw()}),_.each(i,function(e){e.draw()}),l(),h()}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerWidth,r=window.innerHeight,i=[],s=[],o=30,u={x:n/2,y:r/2};e.height=r,e.width=n,f(),p(),$("body").on("mousemove",function(t){u.x=t.pageX-e.offsetLeft,u.y=t.pageY-e.offsetTop}),$("canvas").on("click",function(t){u.x=t.pageX-e.offsetLeft,u.y=t.pageY-e.offsetTop,i=_.reject(i,function(e){var t=e.x-u.x,n=e.y-u.y;if(t*t+n*n<=5*e.radius*e.radius)return s.push(new c(e.x,e.y)),!0});if(i.length<30){var o=randomInt(0,1)?0:r+20,f=randomInt(0,1)?0:n+20;i.push(new a(o,f))}}),$("body").disableSelection()}function pinwheel(){var e=$("canvas")[0],t=e.getContext("2d"),n=500,r=500,i,s="#b15be3",o="#a33ede",u="#44e886",a="#1bde69",f="#fc8f29",l="#ef7503",c="#3c99f0",h="#1280e7";e.height=n,e.width=r,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),function(e,i,p){function v(){t.fillStyle="#946f4b",t.fillRect(244,200,12,500),t.shadowColor="rgba(0,0,0,0.3)",t.shadowBlur=3,t.shadowOffsetX=2,t.shadowOffsetY=2}var d=.3;e.rotation_speed=0,e.draw=function(){t.beginPath(),t.fillStyle=s,t.moveTo(250,200),t.lineTo(250,0),t.lineTo(350,100),t.lineTo(250,200),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=u,t.lineTo(450,200),t.lineTo(350,300),t.lineTo(250,200),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=f,t.lineTo(250,400),t.lineTo(150,300),t.lineTo(250,200),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=c,t.lineTo(50,200),t.lineTo(150,100),t.lineTo(250,200),t.fill(),t.closePath(),t.shadowColor="rgba(0,0,0,0.3)",t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.beginPath(),t.fillStyle=o,t.moveTo(250,200),t.lineTo(350,100),t.lineTo(350,200),t.lineTo(250,200),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=a,t.lineTo(350,300),t.lineTo(250,300),t.lineTo(250,200),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=l,t.lineTo(150,300),t.lineTo(150,200),t.lineTo(250,200),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=h,t.lineTo(150,100),t.lineTo(250,100),t.lineTo(250,200),t.fill(),t.closePath(),t.shadowColor="rgba(0,0,0,0.7)",t.shadowBlur=3,t.shadowOffsetX=3,t.shadowOffsetY=3,t.closePath(),t.fillStyle="white",t.lineWidth=2,t.strokeStyle="rgba(0,0,0,0.2)",t.beginPath(),t.arc(250,200,8,0,2*Math.PI),t.fill(),t.stroke(),t.closePath()},e.spin=function(){t.clearRect(0,0,r,n),v(),t.save(),t.translate(250,200),t.rotate(d),t.translate(-250,-200),e.draw(),t.restore(),d+=.05*e.rotation_speed,e.rotation_speed*=.996}}(window.pinwheel=window.pinwheel||{},jQuery),function p(){i=requestAnimFrame(p),pinwheel.spin()}(),$("canvas").on("click",function(){pinwheel.rotation_speed+=1.5}),$("body").disableSelection()}function pixShow(){}function plinky(){function a(e,n){this.x=e,this.y=n,this.radius=2,this.color="white",this.draw=function(){t.beginPath(),t.fillStyle=this.color,t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.closePath()}}function f(){var e=0,t=100,n=!0;_.each(_.range(105),function(r){i.push(new a(e,t)),e+=40,e>400&&(t+=40,e=n?20:0,n=!n)})}function l(e,r,i,s){this.x=e,this.y=r,this.width=i,this.result,s=="win"?this.color="#35d49a":this.color="#d42a2a",this.draw=function(){t.beginPath(),t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,n),t.fill(),t.closePath()}}function c(){var e=n-15,t=50;s.push(new l(75,e,t,"win")),s.push(new l(175,e,t,"win")),s.push(new l(275,e,t,"win"))}function h(t){u.vy+=o*t/1e3,u.x+=u.vx,u.y+=u.vy,_.each(i,function(e){var t=Math.sqrt(Math.pow(u.x-e.x,2)+Math.pow(u.y-e.y,2));if(t<=u.radius){var n=u.vx,r=u.vy,i=u.radius,s=(u.x-e.x)/t*i,o=(u.y-e.y)/t*i;u.x=e.x+s*1.05,u.y=e.y+o*1.05,u.vx=-0.7*(n*s*s/(i*i)+r*s*o/(i*i)),u.vy=-0.7*(r*o*o/(i*i)+n*s*o/(i*i))}}),u.y>n+u.radius&&(u.tracking=!0,u.y=u.radius,u.vx=0,u.vy=0,_.each(s,function(e){u.x>e.x&&u.x<e.x+e.width&&($("#win").fadeIn(500),setTimeout(function(){$("#win").fadeOut(500)},2e3))}),$("canvas").on("mousemove",function(t){var n=t.pageX-e.offsetLeft;u.x=n}))}function p(e){var o=new Date,a=o.getTime(),f=a-e;t.clearRect(0,0,r,n),t.fillStyle="#d42a2a",t.fillRect(0,n-15,r,n),_.each(i,function(e){e.draw()}),_.each(s,function(e){e.draw()}),u.draw(),u.tracking||h(f),requestAnimFrame(function(){p(a)})}var e=$("canvas")[0],t=e.getContext("2d"),n=600,r=400,i=[],s=[],o=10;e.height=n,e.width=r;var u={radius:14,x:14,y:14,vx:0,vy:0,color:"#51bdfc",tracking:!0,draw:function(){t.beginPath(),t.fillStyle=u.color,t.arc(u.x,u.y,u.radius,0,2*Math.PI),t.fill(),t.closePath()}},d=new Date,v=d.getTime();f(),c(),p(v),$("canvas").on("mousemove",function(t){var n=t.pageX-e.offsetLeft;u.x=n}),$("canvas").on("click",function(){$("canvas").off("mousemove"),u.tracking&&(u.tracking=!1)})}function pollsie(){}function portraitPhotos(){if($("#video_canvas").length){var e=$("#video_canvas")[0],t=e.getContext("2d"),n=$("#image_canvas")[0],r=n.getContext("2d"),i=400,s=550,o=.35,u=$("video")[0],a=!1,f=new Image,l=new Image;e.width=n.width=i,e.height=n.height=s,window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!1,video:!0},function(e){u.src=window.URL.createObjectURL(e),u.play(),$("#shoot_btn").attr("disabled",!1),c()},function(){alert("This app requires access to your camera.")}):$("#no_support").show(),$("#shoot_btn").one("click",function(){a=!0,$("#save_btn").attr("disabled",!1)}),$("#shoot_btn").on("click",function(){h()}),$("#save_btn").on("click",function(){a&&d()}),f.onload=function(){r.clearRect(0,0,n.width,n.height),r.drawImage(f,0,0)};function c(){if(u.videoWidth){var e=n.height/u.videoHeight,r=u.videoWidth*e,i=u.videoHeight*e,s=-1*(r/2-n.width/2);t.drawImage(u,s,0,r,i)}requestAnimFrame(c)}function h(){var i=e.toDataURL();l.onload=function(){r.clearRect(0,0,n.width,n.height),r.drawImage(f,0,0);var i=t.getImageData(0,0,e.width,e.height),s=r.getImageData(0,0,n.width,n.height);p(i,s)},l.src=i}function p(e,t){var i=e.data,s=t.data;console.log(i[1],s[1]);for(var o=0;o<i.length;o+=4)i[o]=(i[o]+s[o])/2,i[o+1]=(i[o+1]+s[o+1])/2,i[o+2]=(i[o+2]+s[o+2])/2;console.log(i[1],s[1]),r.clearRect(0,0,n.width,n.height),r.putImageData(e,0,0)}function d(){var e=v(n.toDataURL()),t=new FormData;t.append("image",e),$.ajax({url:"/portrait/photos",type:"POST",data:t,processData:!1,contentType:!1,success:function(e){window.location="/portrait/photos/"+e},error:function(){alert("There was a problem with your request. Please try again.")}})}function v(e){var t=atob(e.split(",")[1]),n=[];for(var r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Blob([new Uint8Array(n)],{type:"image/png"})}f.src=$("#data-img").data("img")}}function postbored(){$(".notice").fadeOut(4e3),$(".alert").fadeOut(4e3),$("form").focus(),$("form").on("submit",function(e){$("#url_form").val().trim()==""&&(e.preventDefault(),alert("URL cannot be blank."),$("#url_form").focus()),$("#title_form").val().trim()==""&&(e.preventDefault(),alert("Title cannot be blank."),$("#title_form").focus()),$("#title_form").val().length>255&&(e.preventDefault(),alert("Let's not write a book here! Keep it to 255 characters or less."),$("#title_form").focus())})}function pvCalculator(){function t(){var e=parseFloat($("#offset_calc .int_rate").val()),t=parseFloat($("#offset_calc .num_years").val()),n=parseFloat($("#offset_calc .num_years_no_rev").val()),r=parseFloat($("#offset_calc .revenue").val()),s=parseFloat($("#offset_calc .growth").val()),o=t-n,u=0;u=(r/(e-s)-r/(e-s)*Math.pow(1+s,o)/Math.pow(1+e,o))/Math.pow(1+e,n),i(u,"#offset_calc")}function n(){var e=parseFloat($("#compounding_calc .int_rate").val()),t=parseFloat($("#compounding_calc .num_years").val()),n=parseFloat($("#compounding_calc .revenue").val()),r=parseFloat($("#compounding_calc .growth").val()),s=0;s=n/(e-r)-n/(e-r)*(Math.pow(1+r,t)/Math.pow(1+e,t)),i(s,"#compounding_calc")}function r(){var e=parseFloat($("#basic_calc .int_rate").val()),t=$(".year_rev input"),n=0;_.each(t,function(t,r){var i=$(t).val();n+=i/Math.pow(1+e,r+1)}),i(n,"#basic_calc")}function i(e,t){$.isNumeric(e)?$(t+" .answer").text(e.toFixed(2)):$(t+" .answer").text("00.00"),$(t+" .answer_container").show()}function s(t){var n=$(".year_rev").length,r=n-t;r>0?$("#basic_calc").find(".year_rev:nth-last-child(-n+"+r+")").remove():r<0&&_.each(_.range(r*-1),function(t){$(e).appendTo("#basic_calc table")})}var e='<tr class="year_rev"><td class="label">Yearly Revenue:</td><td><input type="text" class="revenue"></td></tr>';$(".tab").on("click",function(){$(".tab").removeClass("active"),$(this).addClass("active"),$(".calc_container").hide(),$("#"+this.id+"_calc").show()}),$("#basic_years").on("change",function(e){e.preventDefault();var t=$("#basic_years").val();$.isNumeric(t)||($("#basic_years").val("10"),t=10),s(t)}),$("#basic_calc form").on("change",function(e){e.preventDefault(),r()}),$("#basic_calc form").on("submit",function(e){e.preventDefault(),r()}),$("#compounding_calc form").on("submit",function(e){e.preventDefault(),n()}),$("#compounding_calc form").on("change",function(e){e.preventDefault(),n()}),$("#offset_calc form").on("submit",function(e){e.preventDefault(),t()}),$("#offset_calc form").on("change",function(e){e.preventDefault(),t()})}function quickWords(){function o(){_.each(s,function(e,t){a(e[0],e[1],i[randomInt(0,97)])}),p()}function u(e,n,r){this.x=e,this.y=n,this.letter=r,this.used=!1,this.draw=function(){this.used?t.fillStyle="#aaa":t.fillStyle="#333",t.fillRect(this.x,this.y,80,80),t.font="26px Futura",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#fff",t.fillText(this.letter,this.x+40,this.y+40)}}function a(e,t,n){tiles.push(new u(e,t,n))}function f(){t.font="26px Futura",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#333",t.fillText(stage,r/2,280)}function l(){t.font="16px Futura",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#333",t.fillText("Score: "+score,r/2,380)}function c(){t.fillStyle="#333",t.fillRect(40,310,80,30),t.font="13px Futura",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#fff",t.fillText("Clear",80,325)}function h(){t.fillStyle="#16a085",t.fillRect(120,310,80,30),t.font="14px Futura",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#fff",t.fillText("Submit",160,325)}function p(){t.clearRect(0,0,r,n),_.each(tiles,function(e){e.draw()}),f(),l(),c(),h()}function d(e){stage+=e.letter,e.used=!0,p()}function v(e,t){_.each(tiles,function(n){e>n.x&&e<n.x+80&&t>n.y&&t<n.y+80&&!n.used&&d(n)})}function m(e,t){var n;e=="win"?n="Correct! Points: "+t:n="Wrong!",$(".modal").text(n).fadeIn("500"),setTimeout(function(){$(".modal").fadeOut("1000")},1500)}function g(){_.each(tiles,function(e){e.used&&(e.used=!1)}),stage="",p()}function y(){_.each(tiles,function(e){e.used&&(e.used=!1,e.letter=i[randomInt(0,97)])}),score+=Math.pow(stage.length,2),m("win",Math.pow(stage.length,2)),stage="",p()}function b(){var e=stage.toLowerCase();_.indexOf(big_word_list,e)!=-1?y():(g(),m("lose"))}var e=$("canvas")[0],t=e.getContext("2d"),n=400,r=240,i="eeeeeeeeeeeeaaaaaaaaaiiiiiiiiioooooooonnnnnnrrrrrrttttttllllssssuuuuddddgggbbccmmppffhhvvwwyykjxqz".toUpperCase().split(""),s=[[0,0],[80,0],[160,0],[0,80],[80,80],[160,80],[0,160],[80,160],[160,160]];tiles=[],stage="",score=0,e.height=n,e.width=r,o(),$("canvas").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;r<=240?v(n,r):n>40&&n<120&&r>310&&r<340?g():n>120&&n<200&&r>310&&r<340&&b()})}function ransomNote(){function e(e){var t=$.parseJSON(e);$("#note_container").html("");var n=!0,r="";_.each(t,function(e){style='style="transform: rotate('+randomInt(-10,10)+"deg); -ms-transform: rotate("+randomInt(-10,10)+"deg); -webkit-transform: rotate("+randomInt(-10,10)+'deg);"',n?(n=!1,r+='<div class="word"><img src="'+e+'" class="char"'+" "+style+">"):e=="/assets/ransom_space.png"?(n=!0,r+='<img src="'+e+'" class="char"'+" "+style+"></div>"):r+='<img src="'+e+'" class="char"'+" "+style+">"}),_.each($(".char"),function(e){e.css({transform:"rotate("+randomInt(-10,10)+"deg)","-ms-transform":"rotate("+randomInt(-10,10)+"deg)","-webkit-transform":"rotate("+randomInt(-10,10)+"deg)"})}),$(".loading_container").hide(),$("#note_container").html(r+'</div><br class="clear">').show()}$("#note_text").focus(),$("form").on("submit",function(t){t.preventDefault();var n=$("#note_text").val().split("");$(".loading_container").show(),$("#note_container").hide(),$.ajax({type:"POST",url:"/ransom_note/page",dataType:"json",data:{note:n},complete:function(t){e(t.responseText)},error:function(){alert("There was a problem!")}})})}function salonGalleries(){var e=$("body")[0],t=window.location.pathname.replace(/\/edit.*$/,"");console.log;if($("#edit_photo_container").length){e.addEventListener("dragover",function(e){e.preventDefault()},!1),e.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.files;return $("#throbber").show(),n(t),!1},!1);function n(e){e=_.reject(e,function(e){return e.type.indexOf("image")==-1}),r(e)}function r(e){var n=new FormData,r=0,i=e.length,s=$("input.title").val();if(typeof n!="undefined"){function o(){var t=e[r];i>=1&&r<=i-1?(n.append("file",t),u()):location.reload()}function u(){$.ajax({url:t,data:n,type:"PUT",processData:!1,contentType:!1,success:function(e){r+=1,o()},error:function(){location.reload()}})}o()}}}}function screwdriver(){}function seriousQuestion(){}function shareASecret(){function t(e){$("#retrieved_secret_text").hide().text(e).fadeIn(500)}var e="";$(".secret_input").focus(),$("form").on("submit",function(n){n.preventDefault();var r=$(".secret_input").val().replace(/^\s+|\s+$/g,"");r.length<10||r.length>255?alert("Your secret is either too long or too short. Write in a secret between 10 and 255 characters."):r==e?alert("You can't think of another secret? I'm sure you have at least a few more secrets to share."):(e=r,$(".secret_input").val(""),$.ajax({type:"POST",dataType:"json",url:"/share_a_secret/secrets",data:{new_secret:r},complete:function(e){t(e.responseText)}}))})}function sharks(){function u(e,n,r){var s=new Image;this.x_prime=e,this.y_prime=n,this.img=s,this.time=1,this.x=i.x,this.y=i.y;var o=this;s.onload=function(){o.height=s.height,o.width=s.width},this.draw=function(){var e=.005*this.time,n=this.width*e,r=this.height*e,s=n/2,o=r/2;this.time+=2,this.x=i.x+this.x_prime/1e4*Math.pow(this.time,2),this.y=i.y+this.y_prime/1e4*Math.pow(this.time,2),t.drawImage(this.img,this.x-s,this.y-o,n,r)},s.src=r}function a(e,t,n){s.push(new u(e,t,n))}function f(){_.each(s,function(e){if(e.x>r*2||e.x<0-e.width||e.y>n*2||e.y<0-e.height){var t=Math.random()*Math.PI*2,s=Math.cos(t)*n*.2,u=Math.sin(t)*n*.2;e.x_prime=s,e.y_prime=u,e.time=1,e.img.src=o[randomInt(0,o.length-1)],e.x=i.x,e.y=i.y}}),requestAnimFrame(l)}function l(){t.clearRect(0,0,r,n),_.each(s,function(e){e.draw()}),f()}function c(){if(s.length<10){var e=Math.random()*Math.PI*2,t=Math.cos(e)*n*.2,r=Math.sin(e)*n*.2;a(t,r,o[randomInt(0,o.length-1)])}setTimeout(c,randomInt(500,2e3))}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i={x:r/2,y:n/2},s=[],o=["/assets/shark_0.png","/assets/shark_1.png","/assets/shark_2.png","/assets/shark_3.png","/assets/shark_4.png"];e.height=n,e.width=r,c(),l()}function signature(){function l(){t.beginPath(),t.moveTo(f[0].x,f[0].y);for(i=1;i<f.length-2;i++){var e=(f[i].x+f[i+1].x)/2,n=(f[i].y+f[i+1].y)/2;t.quadraticCurveTo(f[i].x,f[i].y,e,n),t.quadraticCurveTo(f[i].x,f[i].y,f[i+1].x,f[i+1].y)}t.strokeStyle=s,t.lineWidth=o,t.lineCap="round",t.stroke()}var e=$("canvas")[0],t=e.getContext("2d"),n=400,r=700,s="#000",o=5,u=document.createElement("canvas"),a=u.getContext("2d"),f=[];e.height=n,e.width=r,u.height=n,u.width=r,$(e).on("mousedown",function(t){f.push({x:t.pageX-e.offsetLeft,y:t.pageY-e.offsetTop}),this.drawing=!0}),$(e).on("mousemove",function(i){mouse_x=i.pageX-e.offsetLeft,mouse_y=i.pageY-e.offsetTop,this.drawing&&(t.clearRect(0,0,r,n),t.drawImage(u,0,0),f.push({x:mouse_x,y:mouse_y}),l())}),$(e).on("mouseup",function(){this.drawing=!1,$("canvas").css("cursor","default"),f=[],a.clearRect(0,0,r,n),a.drawImage(e,0,0)}),$("#clear").on("click",function(){t.clearRect(0,0,r,n),a.clearRect(0,0,r,n),e.drawing=!1,f=[]}),$("#save").on("click",function(){var t=e.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$(".color").on("change",function(){s="#"+this.color}),$(".size").on("change",function(){var e=$(".size").val();$.isNumeric(e)?o=e:alert("Size must be a number")}),$("body").disableSelection()}function skinnyDrinks(){function e(e,t,n){var r=t/(n*e/100),i=245/1.5;return i/r*100}$("form").on("submit",function(t){t.preventDefault();var n=$(".name").val().replace(/^\s+|\s+$/g,""),r=$(".abv").val().replace(/^\s+|\s+$/g,""),i=$(".calories").val().replace(/^\s+|\s+$/g,""),s=$(".ounces").val().replace(/^\s+|\s+$/g,"");n===""&&(n="beverage");if(_.isNaN(Number(r)))r=r.replace("%","").replace(/^\s+|\s+$/g,""),_.isNaN(Number(r))&&alert("Please enter the ABV as a numerical percent (e.g. 40%).");else if(_.isNaN(Number(i)))alert("Please enter the calories as a number (e.g. 99).");else if(_.isNaN(Number(r)))alert("Please enter the ounces as a number (e.g. 1.5).");else{var o=e(r,i,s);_.isNaN(o)&&(o=0),o>100?alert("Error: Skinny Factor out of range. Please check that the calories in your beverage and the beverage size in ounces are correct."):(o=o.toFixed(2),$(".result").html("The Skinny Factor for "+n+" is"),$(".skinny_factor").html(o),$("#result_container").show())}})}function snare(){$(".circle").on("click",function(){$("#container").addClass("shrink"),setTimeout(function(){$("#container").html(""),$("#container").css({backgroundImage:"none",height:0}),setTimeout(function(){$("#error").show()},500)},1800)})}function songMachine(){function o(e){var t;return e>700?t=n[0]:e>650?t=n[1]:e>600?t=n[2]:e>550?t=n[3]:e>500?t=n[4]:e>450?t=n[5]:e>400?t=n[6]:e>350?t=n[7]:e>300?t=n[8]:e>250?t=n[9]:e>200?t=n[10]:e>150?t=n[11]:e>100?t=n[12]:e>50?t=n[13]:e>-1&&(t=n[14]),t}function u(e,n,r){this.x=e,this.y=n,this.color="36,39,51",this.played=!1,this.sound=new Howl({urls:["/assets/"+r+".mp3","/assets/"+r+".ogg"],volume:.5}),this.draw=function(){this.played?t.fillStyle="rgba("+this.color+", 0.3)":t.fillStyle="rgba("+this.color+", 1)",t.beginPath(),t.arc(this.x,this.y,10,0,2*Math.PI),t.fill(),t.closePath()},this.play=function(){this.sound.play()}}function a(e,t,n){r.push(new u(e,t,n))}function f(){_.each(r,function(e){e.y-=5,e.y<150&&e.played==0&&(e.play(),e.played=!0),e.y<-20&&(e.y=i+20,e.played=!1)})}function l(){t.beginPath(),t.fillStyle="#fff",t.strokeStyle="rgba(0,0,0,0.2)",t.lineWidth=3,t.fillRect(0,0,s,i),t.strokeRect(0,0,s,i),t.closePath(),_.each(r,function(e){e.draw()}),t.save(),t.beginPath(),t.strokeStyle="#242733",t.fillStyle="#242733",t.shadowOffsetY=10,t.shadowColor="rgba(0,0,0,0.4)",t.shadowBlur=3,t.lineWidth=2,t.moveTo(-10,130.5),t.lineTo(-10,170.5),t.lineTo(20,150.5),t.lineTo(-10,130.5),t.moveTo(20,150.5),t.lineTo(s-20,150.5),t.moveTo(s+10,130.5),t.lineTo(s+10,170.5),t.lineTo(s-20,150.5),t.lineTo(s+10,130.5),t.stroke(),t.fill(),t.closePath(),t.restore(),f(),requestAnimFrame(l)}var e=$("canvas")[0],t=e.getContext("2d"),n=["ab1","bb1","c1","db1","eb1","f1","g1","ab2","bb2","c2","db2","eb2","f2","g2","ab3"],r=[],i=window.innerHeight-40,s=750;e.height=i,e.width=s,$("canvas").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop,i=o(n);a(n,r,i)}),l(),$("body").disableSelection()}function sparklers(){function l(){t.fillStyle="rgba(0,0,0,0.15)",t.fillRect(0,0,r,n),p(),requestAnimFrame(l)}function c(e,t){for(var n=0;n<100;n++)i.push(new h(e,t,s,Math.random()*1.2))}function h(e,t,n,r){this.x=e,this.y=t,this.x0=e,this.y0=t,this.v0=Math.random()/4,this.angle=Math.random()*(360*Math.PI/180),this.time=0,this.r=r,this.color=n}function p(){t.beginPath(),t.strokeStyle="#222",t.lineWidth=1,t.moveTo(a.x,a.y),t.lineTo(a.x+20,a.y+100),t.stroke(),t.closePath(),t.strokeStyle="rgba(255,224,171, 0.5)",t.lineWidth=2,t.beginPath(),t.moveTo(a.x0,a.y0),t.lineTo(a.x,a.y),t.stroke(),t.closePath(),a.x0=a.x,a.y0=a.y,a.x+=(f.x-a.x)/2,a.y+=(f.y-a.y)/2,d()}function d(){_.each(i,function(e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.r,0,2*Math.PI),t.fill(),t.closePath()}),v()}function v(){_.each(i,function(e,t){var n=e.v0*Math.sin(e.angle),r=e.v0*Math.cos(e.angle);e.time+=o,e.x=e.x0+n*e.time,e.y=e.y0-r*e.time+u*Math.pow(e.time,2),e.time>randomInt(300,1e3)&&(i[t]=new h(a.x,a.y,s,Math.random()*1.2))})}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i=[],s="#ffe0ab",o=10,u=1e-4,a={x:r/2,y:n/2,x0:r/2,y0:n/2},f={x:r/2,y:n/2};e.height=n,e.width=r,l(),c(f.x,f.y),$("body").disableSelection(),$("canvas").on("mousemove",function(e){f.x=e.pageX,f.y=e.pageY}),document.addEventListener("touchmove",function(e){e.preventDefault(),f.x=e.pageX,f.y=e.pageY},!1)}function splodinBacon(){function h(){f.push(new p)}function p(){this.x=randomInt(0,r),this.y=-145,this.vy=randomInt(2,5),this.draw=function(){t.drawImage(i,this.x,this.y),this.y+=this.vy}}function d(){t.clearRect(0,0,r,n),_.each(f,function(e,t){e.draw(),e.y>n&&(f[t]=new p)}),_.each(l,function(e){e.draw()}),_.each(c,function(e){e.draw()}),l=_.reject(l,function(e){return e.x<-30||e.x>r||e.y<-145||e.y>n}),c=_.reject(c,function(e){return e.time<=0}),requestAnimFrame(d)}function v(e,n,r){this.x=e,this.y=n,this.vx=randomInt(-20,20),this.vy=randomInt(-20,20),this.draw=function(){t.drawImage(r,this.x,this.y),this.x+=this.vx,this.y+=this.vy}}function m(e,n){this.x=e,this.y=n,this.time=10,this.draw=function(){t.fillStyle="rgba(255,219,74, 0.5)",t.beginPath(),t.arc(this.x,this.y,40,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#ffcc00",t.arc(this.x,this.y,30,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#ff7b00",t.arc(this.x,this.y,20,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#e00000",t.arc(this.x,this.y,10,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#1e00ff",t.arc(this.x,this.y,3,0,2*Math.PI),t.fill(),t.closePath(),this.time-=1}}var e=$("canvas")[0],t=e.getContext("2d"),n=window.innerHeight,r=window.innerWidth,i=new Image,s=new Image,o=new Image,u=new Image,a=new Image,f=[],l=[],c=[];e.width=r,e.height=n,setInterval(function(){f.length<20&&h()},randomInt(50,2e3)),$("canvas").on("click",function(e){var t=e.pageX,n=e.pageY;_.each(f,function(e,r){t>e.x&&t<e.x+30&&n>e.y&&n<e.y+144&&(l.push(new v(e.x,e.y,s)),l.push(new v(e.x+15,e.y,o)),l.push(new v(e.x,e.y+72,u)),l.push(new v(e.x+15,e.y+72,a)),c.push(new m(t,n)),f[r]=new p)})}),d(),i.src="/assets/bacon_full.png",s.src="/assets/bacon_1.png",o.src="/assets/bacon_2.png",u.src="/assets/bacon_3.png",a.src="/assets/bacon_4.png"}function swivelGame(){function u(e,n,r,i){function u(e,t){var n=_.indexOf(o,e),r=[n-25,n+1,n+25,n-1],i=[];_.each(r,function(e){e<0||e>624?i.push(!1):i.push(e)}),(e.direction==1||e.direction==2)&&i[0]&&(o[i[0]].direction==3||o[i[0]].direction==4)&&a(o[i[0]],n),(e.direction==3||e.direction==4)&&i[2]&&(o[i[2]].direction==1||o[i[2]].direction==2)&&a(o[i[2]],n),(e.direction==1||e.direction==4)&&e.isEdge!="left"&&i[3]!==!1&&(o[i[3]].direction==2||o[i[3]].direction==3)&&a(o[i[3]],n),(e.direction==2||e.direction==3)&&e.isEdge!="right"&&i[1]&&(o[i[1]].direction==1||o[i[1]].direction==4)&&a(o[i[1]],n)}function a(e,t){e.flip(t)}this.x=e,this.y=n,this.radius=10,this.direction=r,this.isEdge=i,this.flip=function(e){this.direction+=1,s+=1,this.direction>4&&(this.direction=1);var t=this;setTimeout(function(){u(t,e)},70)},this.draw=function(){var e,n;t.fillStyle="#fff",t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.shadowBlur=2,t.shadowColor="rgba(0,0,0,0.3)",t.closePath(),t.beginPath(),this.direction==1?(t.fillStyle="#e74c3c",e=Math.PI,n=Math.PI*1.5):this.direction==2?(t.fillStyle="#3498db",e=Math.PI*1.5,n=Math.PI*2):this.direction==3?(t.fillStyle="#8e44ad",e=Math.PI*2,n=Math.PI*.5):this.direction==4&&(t.fillStyle="#2ecc71",e=Math.PI*.5,n=Math.PI),t.arc(this.x,this.y,this.radius,e,n,!1),t.lineTo(this.x,this.y),t.fill(),t.closePath()}}function a(e,t,n,r){o.push(new u(e,t,n,r))}function f(){t.clearRect(0,0,r,n),_.each(o,function(e){e.draw()}),$("#flips").text("Swivels: "+s)}function l(){var e=10,t=10;for(var n=0;n<625;n++){var r=!1;e>490?(e=10,t+=20,r="left"):e==490&&(r="right"),a(e,t,randomInt(1,4),r),e+=20}f()}var e=$("canvas")[0],t=e.getContext("2d"),n=500,r=500,i,s=0,o=[];e.height=n,e.width=r,l(),$("canvas").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;_.each(o,function(e,t){n>e.x-e.radius&&n<e.x+e.radius&&r>e.y-e.radius&&r<e.y+e.radius&&e.flip(t)})}),i=setInterval(f,80),$("body").disableSelection()}function textScroller(){function s(e,n,i,s,o,u){this.phrase=e,this.x=n,this.y=i,this.vx=s,this.color=o,this.opacity=Math.random(),this.direction=u,this.move=function(){this.direction=="right"&this.x>r&&(this.x=0-this.phrase.length*30),this.direction=="left"&this.x<0-this.phrase.length*30&&(this.x=r),this.x+=this.vx,t.font="50px Courier New",t.fillStyle="rgba("+this.color+", "+this.opacity+")",t.fillText(this.phrase,this.x,this.y)}}function o(e){var t=randomFloat(-5,5),n,o;t<1.5&&t>0?t+=1.5:t>-1.5&&t<0&&(t-=1.5),t>=0?(n="right",o=e.length*30*-1):(n="left",o=r),i.push(new s(e,o,50,t,randomColorRGB(),n))}function u(){t.clearRect(0,0,r,n),_.each(i,function(e){e.move()}),setTimeout(u,50)}var e=$("canvas")[0],t=e.getContext("2d"),n=60,r=window.innerWidth,i=[];e.height=n,e.width=r,u(),$("input[type=text]").focus(),$("form").on("submit",function(e){e.preventDefault();var t=$(this).find("#phrase_text").val();$(this).find("#phrase_text").val(""),o(t)});var a=!0;$(".close").on("click",function(){a?($("form").animate({top:"-100px"},500),$(".close").html("&#9660").css("color","#222"),a=!a):($("form").animate({top:"0"},500),$(".close").html("&#9650").css("color","#666"),a=!a)})}function textToBraille(){var e={a:[1],b:[1,3],c:[1,2],d:[1,2,4],e:[1,4],f:[1,2,3],g:[1,2,3,4],h:[1,3,4],i:[2,3],j:[2,3,4],k:[5,1],l:[5,1,3],m:[5,1,2],n:[5,1,2,4],o:[5,1,4],p:[5,1,2,3],q:[5,1,2,3,4],r:[5,1,3,4],s:[5,2,3],t:[5,2,3,4],u:[5,6,1],v:[5,6,1,3],w:[5,6,3,4],x:[5,6,1,2],y:[5,6,1,2,4],z:[5,6,1,4],1:[1],2:[1,3],3:[1,2],4:[1,2,4],5:[1,4],6:[1,2,3],7:[1,2,3,4],8:[1,3,4],9:[2,3],0:[2,3,4],"!":[3,4,5],"'":[5],",":[3],"-":[5,6],".":[3,4,6],"?":[3,5,6],"^":[6],"#":[2,4,5,6]," ":[]};$("textarea").focus(),$("textarea").on("keyup",function(){var t=$.trim($("textarea").val()),n=$("#braille_container").empty(),r=[];t=t.replace(/(\d+)/g,"#$1").replace(/(\d)([a-j])/g,"$1 $2").replace(/([A-Z])/g,"^$1").toLowerCase(),_.each(t,function(t){_.has(e,t)?r.push(e[t]):r.push(e[" "])}),_.each(r,function(e){var t=$("<div />",{"class":"cell"}).appendTo(n);_.each(e,function(e){t.append('<div class="dot d'+e+'"></div>')})})})}function tinyNotes(){$("form").focus(),$("form").on("submit",function(e){$("input[type=text]").val().trim()==""&&(e.preventDefault(),alert("This is Tiny Notes, not Non-Existent Notes!"),$("input[type=text]").focus()),$("input[type=text]").val().length>255&&(e.preventDefault(),alert("This is Tiny Notes, not Insanely Long Notes! Keep it to 255 characters or less."),$("input[type=text]").focus())})}function tos(){function a(e){this.word=e,this.y=100,this.y0=100,this.x=i/2,this.color="#03020f",this.time=0,this.draw=function(){n.textBaseline="middle",n.textAlign="center",n.fillStyle=this.color,n.font="20px Open Sans",n.fillText(this.word,this.x,this.y)}}function f(e){s.push(new a(e))}function l(){_.each(s,function(e){e.y>=r-50?e.y=r-30:(e.y=e.y0+.5*o*Math.pow(e.time,2),e.time+=u,e.color="rgba(0,0,0,0.3)")})}function c(){_.each(s,function(e){e.draw()}),l()}function h(){s.length<e.length&&f(e[s.length]),n.clearRect(0,0,i,r),c(),setTimeout(h,u)}var e="Terms of Service:   The following terms and conditions govern all use of the jenniferdewalt.com website and all content, services and products available at or through the website (the Website). The Website is owned and operated by Jennifer Dewalt. (“Jennifer Dewalt”). The Website is offered subject to your acceptance without modification of all of the terms and conditions contained herein and all other operating rules, policies (including, without limitation, Jennifer Dewalt’s Privacy Policy) and procedures that may be published from time to time on this Site by Jennifer Dewalt (collectively, the “Agreement”). Please read this Agreement carefully before accessing or using the Website. By accessing or using any part of the web site, you agree to become bound by the terms and conditions of this agreement. If you do not agree to all the terms and conditions of this agreement, then you may not access the Website or use any services. If these terms and conditions are considered an offer by Jennifer Dewalt, acceptance is expressly limited to these terms. The Website is available only to individuals who are at least 13 years old. Your jenniferdewalt.com Account and Site. If you create an account on the Website, you are responsible for maintaining the security of your account, and you are fully responsible for all activities that occur under the account and any other actions taken in connection with the account. You must not describe or assign keywords to your account in a misleading or unlawful manner, including in a manner intended to trade on the name or reputation of others, and Jennifer Dewalt may change or remove any description or keyword that it considers inappropriate or unlawful, or otherwise likely to cause Jennifer Dewalt liability. You must immediately notify Jennifer Dewalt of any unauthorized uses of your account, your account or any other breaches of security. Jennifer Dewalt will not be liable for any acts or omissions by You, including any damages of any kind incurred as a result of such acts or omissions. Responsibility of Contributors. If you operate an account, comment on a account, post material to the Website, post links on the Website, or otherwise make (or allow any third party to make) material available by means of the Website (any such material, “Content”), You are entirely responsible for the content of, and any harm resulting from, that Content. That is the case regardless of whether the Content in question constitutes text, graphics, an audio file, or computer software. By making Content available, you represent and warrant that: the downloading, copying and use of the Content will not infringe the proprietary rights, including but not limited to the copyright, patent, trademark or trade secret rights, of any third party; if your employer has rights to intellectual property you create, you have either (i) received permission from your employer to post or make available the Content, including but not limited to any software, or (ii) secured from your employer a waiver as to all rights in or to the Content; you have fully complied with any third-party licenses relating to the Content, and have done all things necessary to successfully pass through to end users any required terms; the Content does not contain or install any viruses, worms, malware, Trojan horses or other harmful or destructive content; the Content is not spam, is not machine- or randomly-generated, and does not contain unethical or unwanted commercial content designed to drive traffic to third party sites or boost the search engine rankings of third party sites, or to further unlawful acts (such as phishing) or mislead recipients as to the source of the material (such as spoofing); the Content is not pornographic, does not contain threats or incite violence, and does not violate the privacy or publicity rights of any third party; your account is not getting advertised via unwanted electronic messages such as spam links on newsgroups, email lists, other accounts and web sites, and similar unsolicited promotional methods; your account is not named in a manner that misleads your readers into thinking that you are another person or company. For example, your account’s URL or name is not the name of a person other than yourself or company other than your own; and you have, in the case of Content that includes computer code, accurately categorized and/or described the type, nature, uses and effects of the materials, whether requested to do so by Jennifer Dewalt or otherwise. By submitting Content to Jennifer Dewalt for inclusion on your Website, you grant Jennifer Dewalt a world-wide, royalty-free, and non-exclusive license to reproduce, modify, adapt and publish the Content solely for the purpose of displaying, distributing and promoting your account. If you delete Content, Jennifer Dewalt will use reasonable efforts to remove it from the Website, but you acknowledge that caching or references to the Content may not be made immediately unavailable. Without limiting any of those representations or warranties, Jennifer Dewalt has the right (though not the obligation) to, in Jennifer Dewalt’s sole discretion (i) refuse or remove any content that, in Jennifer Dewalt’s reasonable opinion, violates any Jennifer Dewalt policy or is in any way harmful or objectionable, or (ii) terminate or deny access to and use of the Website to any individual or entity for any reason, in Jennifer Dewalt’s sole discretion. Jennifer Dewalt will have no obligation to provide a refund of any amounts previously paid. Responsibility of Website Visitors. Jennifer Dewalt has not reviewed, and cannot review, all of the material, including computer software, posted to the Website, and cannot therefore be responsible for that material’s content, use or effects. By operating the Website, Jennifer Dewalt does not represent or imply that it endorses the material there posted, or that it believes such material to be accurate, useful or non-harmful. You are responsible for taking precautions as necessary to protect yourself and your computer systems from viruses, worms, Trojan horses, and other harmful or destructive content. The Website may contain content that is offensive, indecent, or otherwise objectionable, as well as content containing technical inaccuracies, typographical mistakes, and other errors. The Website may also contain material that violates the privacy or publicity rights, or infringes the intellectual property and other proprietary rights, of third parties, or the downloading, copying or use of which is subject to additional terms and conditions, stated or unstated. Jennifer Dewalt disclaims any responsibility for any harm resulting from the use by visitors of the Website, or from any downloading by those visitors of content there posted. Content Posted on Other Websites. We have not reviewed, and cannot review, all of the material, including computer software, made available through the websites and webpages to which jenniferdewalt.com links, and that link to jenniferdewalt.com. Jennifer Dewalt does not have any control over those non-jenniferdewalt.com websites and webpages, and is not responsible for their contents or their use. By linking to a non-jenniferdewalt.com website or webpage, Jennifer Dewalt does not represent or imply that it endorses such website or webpage. You are responsible for taking precautions as necessary to protect yourself and your computer systems from viruses, worms, Trojan horses, and other harmful or destructive content. Jennifer Dewalt disclaims any responsibility for any harm resulting from your use of non-jenniferdewalt.com websites and webpages. Copyright Infringement and DMCA Policy. As Jennifer Dewalt asks others to respect its intellectual property rights, it respects the intellectual property rights of others. If you believe that material located on or linked to by jenniferdewalt.com violates your copyright, you are encouraged to notify Jennifer Dewalt in accordance with Jennifer Dewalt’s Digital Millennium Copyright Act (“DMCA”) Policy. Jennifer Dewalt will respond to all such notices, including as required or appropriate by removing the infringing material or disabling all links to the infringing material. Jennifer Dewalt will terminate a visitor’s access to and use of the Website if, under appropriate circumstances, the visitor is determined to be a repeat infringer of the copyrights or other intellectual property rights of Jennifer Dewalt or others. In the case of such termination, Jennifer Dewalt will have no obligation to provide a refund of any amounts previously paid to Jennifer Dewalt. Intellectual Property. This Agreement does not transfer from Jennifer Dewalt to you any Jennifer Dewalt or third party intellectual property, and all right, title and interest in and to such property will remain (as between the parties) solely with Jennifer Dewalt. Jennifer Dewalt, jenniferdewalt, jenniferdewalt.com, the jenniferdewalt.com logo, and all other trademarks, service marks, graphics and logos used in connection with jenniferdewalt.com, or the Website are trademarks or registered trademarks of Jennifer Dewalt or Jennifer Dewalt’s licensors. Other trademarks, service marks, graphics and logos used in connection with the Website may be the trademarks of other third parties. Your use of the Website grants you no right or license to reproduce or otherwise use any Jennifer Dewalt or third-party trademarks. Advertisements. Jennifer Dewalt reserves the right to display advertisements on your account. Changes. Jennifer Dewalt reserves the right, at its sole discretion, to modify or replace any part of this Agreement. It is your responsibility to check this Agreement periodically for changes. Your continued use of or access to the Website following the posting of any changes to this Agreement constitutes acceptance of those changes. Jennifer Dewalt may also, in the future, offer new services and/or features through the Website (including, the release of new tools and resources). Such new features and/or services shall be subject to the terms and conditions of this Agreement. Termination. Jennifer Dewalt may terminate your access to all or any part of the Website at any time, with or without cause, with or without notice, effective immediately. If you wish to terminate this Agreement or your jenniferdewalt.com account (if you have one), you may simply discontinue using the Website. All provisions of this Agreement which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity and limitations of liability. Disclaimer of Warranties. The Website is provided “as is”. Jennifer Dewalt and its suppliers and licensors hereby disclaim all warranties of any kind, express or implied, including, without limitation, the warranties of merchantability, fitness for a particular purpose and non-infringement. Neither Jennifer Dewalt nor its suppliers and licensors, makes any warranty that the Website will be error free or that access thereto will be continuous or uninterrupted. You understand that you download from, or otherwise obtain content or services through, the Website at your own discretion and risk. Limitation of Liability. In no event will Jennifer Dewalt, or its suppliers or licensors, be liable with respect to any subject matter of this agreement under any contract, negligence, strict liability or other legal or equitable theory for: (i) any special, incidental or consequential damages; (ii) the cost of procurement for substitute products or services; (iii) for interruption of use or loss or corruption of data; or (iv) for any amounts that exceed the fees paid by you to Jennifer Dewalt under this agreement during the twelve (12) month period prior to the cause of action. Jennifer Dewalt shall have no liability for any failure or delay due to matters beyond their reasonable control. The foregoing shall not apply to the extent prohibited by applicable law. General Representation and Warranty. You represent and warrant that (i) your use of the Website will be in strict accordance with the Jennifer Dewalt with this Agreement and with all applicable laws and regulations (including without limitation any local laws or regulations in your country, state, city, or other governmental area, regarding online conduct and acceptable content, and including all applicable laws regarding the transmission of technical data exported from the United States or the country in which you reside) and (ii) your use of the Website will not infringe or misappropriate the intellectual property rights of any third party. Indemnification. You agree to indemnify and hold harmless Jennifer Dewalt, its contractors, and its licensors, and their respective directors, officers, employees and agents from and against any and all claims and expenses, including attorneys’ fees, arising out of your use of the Website, including but not limited to your violation of this Agreement. Miscellaneous. This Agreement constitutes the entire agreement between Jennifer Dewalt and you concerning the subject matter hereof, and they may only be modified by a written amendment signed by an authorized executive of Jennifer Dewalt, or by the posting by Jennifer Dewalt of a revised version. Except to the extent applicable law, if any, provides otherwise, this Agreement, any access to or use of the Website will be governed by the laws of the state of California, U.S.A., excluding its conflict of law provisions, and the proper venue for any disputes arising out of or relating to any of the same will be the state and federal courts located in San Francisco County, California. Except for claims for injunctive or equitable relief or claims regarding intellectual property rights (which may be brought in any competent court without the posting of a bond), any dispute arising under this Agreement shall be finally settled in accordance with the Comprehensive Arbitration Rules of the Judicial Arbitration and Mediation Service, Inc. (“JAMS”) by three arbitrators appointed in accordance with such Rules. The arbitration shall take place in San Francisco, California, in the English language and the arbitral decision may be enforced in any court. The prevailing party in any action or proceeding to enforce this Agreement shall be entitled to costs and attorneys’ fees. If any part of this Agreement is held invalid or unenforceable, that part will be construed to reflect the parties’ original intent, and the remaining portions will remain in full force and effect. A waiver by either party of any term or condition of this Agreement or any breach thereof, in any one instance, will not waive such term or condition or any subsequent breach thereof. You may assign your rights under this Agreement to any party that consents to, and agrees to be bound by, its terms and conditions; Jennifer Dewalt may assign its rights under this Agreement without condition. This Agreement will be binding upon and will inure to the benefit of the parties, their successors and permitted assigns."
.split(" "),t=$("canvas")[0],n=t.getContext("2d"),r=window.innerHeight,i=window.innerWidth,s=[],o=1e-4,u=70;t.height=r,t.width=i,h()}function tweetTime(){function a(n){var r=$.parseJSON(n);r.length>0?(t.clearRect(0,0,e.width,e.height),o=[],$("body").css({"background-color":"#222"}),$("#canvas_container").fadeIn(400,function(){l(r)})):alert("This person doesn't have any tweets!")}function f(){var n=["4 am","8 am","12 pm","4 pm","8 pm"],r=e.width/6,i=r;_.each(n,function(n,s){t.beginPath(),t.fillStyle="#ff9800",t.font="16px Arial Rounded MT Bold",t.textAlign="center",t.fillText(n,i,e.height-5),t.closePath(),i+=r})}function l(e){f(),_.each(e,function(e){o.push(new c(e))}),h(o[0],0,n)}function c(e){this.tweet=e.text,this.time=new Date(e.time),this.hours=(new Date(e.time)).getHours(),this.mins=(new Date(e.time)).getMinutes(),this.color="rgba(0, 183, 252, 0.7)",this.shadow="rgba(110, 215, 255, 0.15)",this.radius=n}function h(e,n,i){var s=r/(o.length+1),a=n+1;o.length>=a&&(e.x=(e.hours*60+e.mins)/2+e.radius,e.y=i,t.beginPath(),t.fillStyle=e.shadow,t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=e.color,t.arc(e.x,e.y,e.radius/1.5,0,2*Math.PI),t.fill(),t.closePath(),u=setTimeout(function(){h(o[a],a,i+s)},150))}function p(e,t,n,r,i){var s=e-n,o=t-r;return s*s+o*o<=i*i}var e=$("canvas")[0],t=e.getContext("2d"),n=7,r=400,i=r+n*2+30,s=720+n*2,o=[],u;e.width=s,e.height=i,$("#username_input").focus(),$("form").on("submit",function(e){e.preventDefault();var t=$("#username_input").val();clearTimeout(u),$("#container h1").animate({opacity:0},200,function(){$("form").animate({top:0},400),$("#container").remove()}),$.ajax({type:"POST",url:"/tweet_time/page",dataType:"json",data:{username:t},complete:function(e){a(e.responseText)},error:function(e,t,n){console.log(n),alert("Sorry, there seems to have been a problem with your search.")}})}),$("body").on("click",function(t){var n=t.pageX-e.offsetLeft,r=t.pageY-e.offsetTop;_.each(o,function(e){p(n,r,e.x,e.y,e.radius)&&$(".tweet").text(e.tweet)})})}function typingTest(){function f(){var e=(new Date).getTime(),t=0;u=setInterval(function(){var n=(new Date).getTime()-e;t=Math.floor(n/1e3),l(60-t),t==60&&(clearInterval(u),c($("textarea").val(),a))},500)}function l(e){var t=Math.floor(e/60),n=e%60;n<10&&(n="0"+n),t<10&&(t="0"+t),cur_time=t+":"+n,$(".timer").text(cur_time)}function c(e,t){var n={},r=0;t=t.replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<br>/g," ").split(" "),e=e.replace(/\r?\n|\r/g," ").replace(/  /g," ").split(" "),_.each(t,function(e){n[e]=n[e]?n[e]+1:1}),_.each(e,function(e){n[e]&&n[e]>0&&(r+=1,n[e]=n[e]-1)}),h(r)}function h(e){$(".end .wpm").text("Words per minute: "+e),$(".end").fadeIn(300)}var e="<p>Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.</p><br><p>Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battlefield of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.</p><br><p>But, in a larger sense, we cannot dedicate -- we cannot consecrate -- we cannot hallow -- this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us -- that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion -- that we here highly resolve that these dead shall not have died in vain -- that this nation, under God, shall have a new birth of freedom -- and that government of the people, by the people, for the people, shall not perish from the earth.</p>",t="<p>Fans, for the past two weeks you have been reading about a bad break I got. Yet today I consider myself the luckiest man on the face of the earth. I have been in ballparks for seventeen years and have never received anything but kindness and encouragement from you fans.</p><br><p>Look at these grand men. Which of you wouldn't consider it the highlight of his career to associate with them for even one day?</p><br><p>Sure, I'm lucky. Who wouldn't consider it an honor to have known Jacob Ruppert -- also the builder of baseball's greatest empire, Ed Barrow -- to have spent the next nine years with that wonderful little fellow Miller Huggins -- then to have spent the next nine years with that outstanding leader, that smart student of psychology -- the best manager in baseball today, Joe McCarthy!</p><br><p>Sure, I'm lucky. When the New York Giants, a team you would give your right arm to beat, and vice versa, sends you a gift, that's something! When everybody down to the groundskeepers and those boys in white coats remember you with trophies, that's something.</p><br><p>When you have a wonderful mother-in-law who takes sides with you in squabbles against her own daughter, that's something. When you have a father and mother who work all their lives so that you can have an education and build your body, it's a blessing! When you have a wife who has been a tower of strength and shown more courage than you dreamed existed, that's the finest I know.</p><br><p>So I close in saying that I might have had a tough break -- but I have an awful lot to live for!</p>",n="<p>We observe today not a victory of party, but a celebration of freedom -- symbolizing an end, as well as a beginning -- signifying renewal, as well as change. For I have sworn before you and Almighty God the same solemn oath our forebears prescribed nearly a century and three-quarters ago.</p><br><p>The world is very different now. For man holds in his mortal hands the power to abolish all forms of human poverty and all forms of human life. And yet the same revolutionary beliefs for which our forebears fought are still at issue around the globe -- the belief that the rights of man come not from the generosity of the state, but from the hand of God.</p><br><p>We dare not forget today that we are the heirs of that first revolution. Let the word go forth from this time and place, to friend and foe alike, that the torch has been passed to a new generation of Americans -- born in this century, tempered by war, disciplined by a hard and bitter peace, proud of our ancient heritage, and unwilling to witness or permit the slow undoing of those human rights to which this nation has always been committed, and to which we are committed today at home and around the world.</p><br><p>Let every nation know, whether it wishes us well or ill, that we shall pay any price, bear any burden, meet any hardship, support any friend, oppose any foe, to assure the survival and the success of liberty.</p><br><p>This much we pledge -- and more.</p>",r="<p>We've grown used to wonders in this century. It's hard to dazzle us. But for 25 years the United States space program has been doing just that. We've grown used to the idea of space, and perhaps we forget that we've only just begun. We're still pioneers. They, the members of the Challenger crew, were pioneers.</p><br><p>And I want to say something to the school children of America who were watching the live coverage of the shuttle's takeoff. I know it is hard to understand, but sometimes painful things like this happen. It's all part of the process of exploration and discovery. It's all part of taking a chance and expanding man's horizons. The future doesn't belong to the fainthearted; it belongs to the brave. The Challenger crew was pulling us into the future, and we'll continue to follow them...</p><br><p>The crew of the space shuttle Challenger honoured us by the manner in which they lived their lives. We will never forget them, nor the last time we saw them, this morning, as they prepared for the journey and waved goodbye and 'slipped the surly bonds of earth' to 'touch the face of God.'</p>",i="<p>Now it is the time to act on behalf of women everywhere. If we take bold steps to better the lives of women, we will be taking bold steps to better the lives of children and families too. Families rely on mothers and wives for emotional support and care. Families rely on women for labor in the home. And increasingly, everywhere, families rely on women for income needed to raise healthy children and care for other relatives.</p><br><p>As long as discrimination and inequities remain so commonplace everywhere in the world, as long as girls and women are valued less, fed less, fed last, overworked, underpaid, not schooled, subjected to violence in and outside their homes -- the potential of the human family to create a peaceful, prosperous world will not be realized.</p><br><p>Let -- Let this conference be our -- and the world’s -- call to action. Let us heed that call so we can create a world in which every woman is treated with respect and dignity, every boy and girl is loved and cared for equally, and every family has the hope of a strong and stable future. That is the work before you. That is the work before all of us who have a vision of the world we want to see -- for our children and our grandchildren.</p>",s=[e,t,n,r,i],o,u,a=s[randomInt(0,4)];$("textarea").blur(),$("button.start").on("click",function(){$("textarea").focus(),$("#text_passage").html(a),$(".modal.start").fadeOut(300),$("textarea").one("input",function(){f()})}),$(".end p").on("click",function(){$(".modal.end").fadeOut(300)})}function viewGraph(){function i(e){$(".view_mark:nth-child("+e+")").css("opacity",n)}var e=$("#views_container > div").size(),t=1/(e*1.3),n=1,r=e;_.each(_.range(e),function(e){i(r-e),n-=t}),$("#info_tab").on("click",function(){$(".modal.info").fadeIn("400")}),$(".close").on("click",function(){$(".modal.info").fadeOut("300")})}function windowSizer(){function o(){n=randomInt(500,t-200),r=randomInt(250,e-200),$("#target_text").text(n+" x "+r),$("#target_area").animate({width:n,height:r},300).css({backgroundColor:randomColorHex}),$("#score").text("Resizes: "+s)}function u(){var e=(new Date).getTime(),t=0;clock=setInterval(function(){var n=(new Date).getTime()-e;t=Math.floor(n/1e3),a(60-t),t==60&&(clearInterval(clock),f())},500)}function a(e){$("#progress_bar").css("width",e/60*100+"%")}function f(){i=!1,$("#info_container").hide(),$("#final_score").text("Total Resizes: "+s),$("#end_container").fadeIn(300)}var e=screen.availHeight,t=screen.availWidth,n,r,i=!1,s=0;$("#start").on("click",function(){$("#start_container").fadeOut(300),i=!0,o(),u()}),$(window).resize(function(){window.innerWidth>n-3&&window.innerWidth<n+3&&window.innerHeight>r-3&&window.innerHeight<r+3&&i&&(s+=1,o())})}function wish(){function n(){$("#message").text(e[t]).show(),setTimeout(r,380)}function r(){$("#message").hide(),i()}function i(){t+=1,t>2&&(t=0),n()}var e=["were younger.","were thinner.","had a faster processor."],t=0;n()}function wordClock(){function e(){var t=(new Date).getHours();if(t>11)var n="pm";else var n="am";var r=(new Date).getMinutes();if(r>10&&r<20)var i=r,s=null;else if(r>9)var i=Math.floor(r/10)*10,s=r%10;else if(r==0)var i=null,s=null;else var i="zero",s=r;$(".hour_list li").removeClass("now"),t%12==0?$(".hour_list .12").addClass("now"):$(".hour_list ."+t%12).addClass("now"),$(".abbrev").removeClass("now"),$("#"+n).addClass("now"),$(".min_list li").removeClass("now"),$(".min_list ."+s).addClass("now"),$(".min_list ."+i).addClass("now"),setTimeout(e,1e3)}e()}function wordCloud(){function e(e){$(".input_warning").css("opacity",0).text(e).animate({opacity:1},300),$("#text_field").focus()}$("#text_field").focus(),$("form").on("submit",function(t){var n=$("#text_field").val();n.length>255?(t.preventDefault(),e("Your text is too long.")):n.length<1&&(t.preventDefault(),e("Your text is too short."))}),$("#info_tab").on("click",function(){$(".modal").fadeIn(400)}),$(".close").on("click",function(){$(".modal").fadeOut(400)})}function yourSpace(){}function randomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function randomColorHex(){return"#"+Math.random().toString(16).slice(2,8)}function randomColorRGB(){var e=randomInt(0,255),t=randomInt(0,255),n=randomInt(0,255);return e+", "+t+", "+n}function randomColorHSL(){var e=randomInt(0,360),t=randomInt(0,100),n=randomInt(0,100);return{h:e,s:t,l:n}}function randomFloat(e,t){return Math.random()*(t-e+1)+e}function randomNumWithGap(e,t,n,r){var i=Math.random();return i<.5?randomInt(e,t):randomInt(n,r)}function rgbComponentToHex(e){var t=e.toString(16);return t.length==1?"0"+t:t}function hexToRgb(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function render(e,t){return JST["templates/"+e](t)}(function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(!b.acceptData(e))return;var s,o,u=b.expando,a=typeof n=="string",f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[b.camelCase(n)])):o=s,o}function q(e,t,n){if(!b.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(!u[a])return;if(t){s=n?u[a]:u[a].data;if(s){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t in s?t=[t]:t=t.split(" "));for(r=0,i=t.length;r<i;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}}if(!n){delete u[a].data;if(!U(u[a]))return}o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function R(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(F,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e){if(t==="data"&&b.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){t=t||0;if(b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=b.grep(e,function(e){return e.nodeType===1});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!b.hasData(e))return;var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,b.css(e,"display")==="none"||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=b.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=b.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&b.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&b.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,b.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if(r!=="*"){if(f!=="*"&&f!==r){i=o[f+" "+r]||o["* "+r];if(!i)for(n in o){s=n.split(" ");if(s[1]===r){i=o[f+" "+s[0]]||o["* "+s[0]];if(i){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}}}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e){r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r];if(o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],b.css(e,"display")==="inline"&&b.css(e,"float")==="none"&&(!b.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t){o=t[i];if($n.exec(o)){delete t[i],a=a||o==="toggle";if(o===(m?"hide":"show"))continue;v.push(i)}}s=v.length;if(s){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;i<s;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){if(s.addEventListener||e.type==="load"||s.readyState==="complete")D(),b.ready()},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=x.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0));if(T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}o=s.getElementById(i[2]);if(o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!b.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r)}return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?--b.readyWait:b.isReady)return;if(!s.body)return setTimeout(b.ready);b.isReady=!0;if(e!==!0&&--b.readyWait>0)return;n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready")},isFunction:function(e){return b.type(e)==="function"},isArray:Array.isArray||function(e){return b.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||b.type(e)!=="object"||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=b.trim(t);if(t&&N.test(t.replace(k,"@").replace(L,"]").replace(C,"")))return(new Function("return "+t))()}b.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:y&&!y.call("﻿ ")?function(e){return e==null?"":y.call(e)}:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(P(Object(e))?b.merge(n,typeof e=="string"?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(b.type(r)==="object"){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n){n=b.Deferred();if(s.readyState==="complete")setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=e.frameElement==null&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e=typeof e=="string"?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",
r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=r!==1||e&&b.isFunction(e.promise)?r:0,s=i===1?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:p.className!=="t",leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:s.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:s.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=o.getAttribute("value")==="",o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box",b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];if(!a)return;n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&o[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=p.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=b.data(s);if(s.nodeType===1&&!b._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){b.data(this,e)}):b.access(this,function(n){if(n===t)return s?R(s,e,b.data(s,e)):null;this.each(function(){b.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=b.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(V,""):n==null?"":n);return}return i=b.isFunction(e),this.each(function(n){var s,o=b(this);if(this.nodeType!==1)return;i?s=e.call(this,n,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":b.isArray(s)&&(s=b.map(s,function(e){return e==null?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(b.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!b.nodeName(n.parentNode,"optgroup"))){t=b(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(typeof e.getAttribute===i)return b.prop(e,n,r);o=a!==1||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z));if(r===t)return s&&o&&"get"in s&&(u=s.get(e,n))!==null?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),u==null?t:u);if(r!==null)return s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r);b.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&e.nodeType===1)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&t==="radio"&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Y&&G?i!=null:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}};if(!Y||!G)b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!b.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}};G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,t===""?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||!!e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(!m||!(l=m.events))return;t=(t||"").match(E)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)b.event.remove(e,p+t[f],n,r,!0);continue}c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&b.removeEvent(e,p,m.handle),delete l[p])}b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||s;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+b.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[b.expando]?n:new b.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{};if(!o&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!o&&!c.noBubble&&!b.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(i.ownerDocument,r)===!1)&&(v!=="click"||!b.nodeName(i,"a"))&&b.acceptData(i)&&a&&i[v]&&!b.isWindow(i)){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(b.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===s.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!b.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")b.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)});return!1}b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){n++===0&&s.addEventListener(e,r,!0)},teardown:function(){--n===0&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&i==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.random()||.1;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>"
,!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(y);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(typeof e!="string")return r=this,this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(r[t],this))return!0}));n=[];for(t=0;t<i;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?b(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?typeof e=="string"?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&typeof r=="string"&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!b(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||b.filter(e,[n]).length>0)!t&&n.nodeType===1&&b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(b.support.htmlSerialize||!mt.test(e))&&(b.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return!t&&typeof e!="string"&&(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(c<=1||typeof v!="string"||b.support.checkClone||!Tt.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c){f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,f.childNodes.length===1&&(f=i);if(i){n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;for(;l<c;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o){a=u[u.length-1].ownerDocument,b.map(u,Dt);for(l=0;l<o;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")))}f=i=null}}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!b.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(b.type(s)==="object")b.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!b.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&b.inArray(s,r)!==-1)continue;o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;(n=e[u])!=null;u++)if(t||b.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+w+")(.*)$","i"),Jt=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=b.camelCase(n),f=e.style;n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!b.cssNumber[a]&&(r+="px"),!b.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!b.contains(e.ownerDocument,e)&&(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,b.support.boxSizing&&b.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&b.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){if(t)return b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?b(e).position()[t]+"px":n}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!b.support.reliableHiddenOffsets&&(e.style&&e.style.display||b.css(e,"display"))==="none"},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return n==null?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional);if(b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(w===2)return;w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),e===204?(l=!0,T="nocontent"):e===304?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?80:443))==(mn[3]||(mn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(w===2)return x;a=c.global,a&&b.active++===0&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&w!==2){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(w<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport
(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px");if(r!=="px"&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=b.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(e.elem.style[b.cssProps[e.prop]]!=null||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&typeof e=="object"?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};r.duration=b.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;Xn=b.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");r==="static"&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=(r==="absolute"||r==="fixed")&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return b.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&b.css(e,"position")==="static")e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},crossDomain:a},f&&(c.xhrFields={withCredentials:f}),s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val();if(!o==!r){if(s.is("input[type=radio]")&&a.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])?!1:(this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this
.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=n.css("overflow")!=="hidden",this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=t.pageX,f=t.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(g<u-v||m>a+v||b<f-v||y>l+v||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function i(e,t){if(e.originalEvent.touches.length>1)return;e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}e.support.touch="ontouchend"in document;if(!e.support.touch)return;var t=e.ui.mouse.prototype,n=t._mouseInit,r;t._touchStart=function(e){var t=this;if(r||!t._mouseCapture(e.originalEvent.changedTouches[0]))return;r=!0,t._touchMoved=!1,i(e,"mouseover"),i(e,"mousemove"),i(e,"mousedown")},t._touchMove=function(e){if(!r)return;this._touchMoved=!0,i(e,"mousemove")},t._touchEnd=function(e){if(!r)return;i(e,"mouseup"),i(e,"mouseout"),this._touchMoved||i(e,"click"),r=!1},t._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),n.call(t)}}(jQuery),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),function(){var e={},t=null,n=!0,r=!1;typeof AudioContext!="undefined"?t=new AudioContext:typeof webkitAudioContext!="undefined"?t=new webkitAudioContext:typeof Audio!="undefined"?n=!1:(n=!1,r=!0);if(n){var i=typeof t.createGain=="undefined"?t.createGainNode():t.createGain();i.gain.value=1,i.connect(t.destination)}var s=function(){this._volume=1,this._muted=!1,this.usingWebAudio=n,this._howls=[]};s.prototype={volume:function(e){var t=this;e=parseFloat(e);if(e&&e>=0&&e<=1){t._volume=e,n&&(i.gain.value=e);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var s=0;s<t._howls[r]._audioNode.length;s++)t._howls[r]._audioNode[s].volume=t._howls[r]._volume*t._volume;return t}return n?i.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,n&&(i.gain.value=e?0:t._volume);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var s=0;s<t._howls[r]._audioNode.length;s++)t._howls[r]._audioNode[s].muted=e}};var o=new s,u=null;if(!r){u=new Audio;var a={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var f=function(e){var t=this;t._autoplay=e.autoplay||!1,t._buffer=e.buffer||!1,t._duration=e.duration||0,t._format=e.format||null,t._loop=e.loop||!1,t._loaded=!1,t._sprite=e.sprite||{},t._src=e.src||"",t._pos3d=e.pos3d||[0,0,-0.5],t._volume=e.volume||1,t._urls=e.urls||[],t._onload=[e.onload||function(){}],t._onloaderror=[e.onloaderror||function(){}],t._onend=[e.onend||function(){}],t._onpause=[e.onpause||function(){}],t._onplay=[e.onplay||function(){}],t._onendTimer=[],t._webAudio=n&&!t._buffer,t._audioNode=[],t._webAudio&&t._setupAudioNode(),o._howls.push(t),t.load()};f.prototype={load:function(){var t=this,n=null;if(r){t.on("loaderror");return}var i={mp3:a.mp3,opus:a.opus,ogg:a.ogg,wav:a.wav,m4a:a.m4a,weba:a.webm};for(var s=0;s<t._urls.length;s++){var u;t._format?u=t._format:(u=t._urls[s].toLowerCase().match(/.+\.([^?]+)(\?|$)/),u=u&&u.length>=2?u[1]:t._urls[s].toLowerCase().match(/data\:audio\/([^?]+);/)[1]);if(i[u]){n=t._urls[s];break}}if(!n){t.on("loaderror");return}t._src=n;if(t._webAudio)l(t,n);else{var f=new Audio;t._audioNode.push(f),f.src=n,f._pos=0,f.preload="auto",f.volume=o._muted?0:t._volume*o.volume(),e[n]=t;var c=function(){t._duration=f.duration,Object.getOwnPropertyNames(t._sprite).length===0&&(t._sprite={_default:[0,t._duration*1e3]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),f.removeEventListener("canplaythrough",c,!1)};f.addEventListener("canplaythrough",c,!1),f.load()}return t},urls:function(e){var t=this;return e?(t._urls=e,t._loaded=!1,t.stop(),t.load(),t):t._urls},play:function(e,n){var r=this;typeof e=="function"&&(n=e);if(!e||typeof e=="function")e="_default";return r._loaded?r._sprite[e]?(r._inactiveNode(function(i){i._sprite=e;var s=i._pos>0?i._pos:r._sprite[e][0]/1e3,u=r._sprite[e][1]/1e3-i._pos,a=!!r._loop||!!r._sprite[e][2],f=typeof n=="string"?n:Math.round(Date.now()*Math.random())+"",l;(function(){var t={id:f,sprite:e,loop:a};l=setTimeout(function(){!r._webAudio&&a&&r.stop(t.id,t.timer).play(e,t.id),r._webAudio&&!a&&(r._nodeById(t.id).paused=!0),!r._webAudio&&!a&&r.stop(t.id,t.timer),r.on("end",f)},u*1e3),r._onendTimer.push(l),t.timer=r._onendTimer[r._onendTimer.length-1]})();if(r._webAudio)i.id=f,i.paused=!1,h(r,[a,s,u],f),r._playStart=t.currentTime,i.gain.value=r._volume,typeof i.bufferSource.start=="undefined"?i.bufferSource.noteGrainOn(0,s,u):i.bufferSource.start(0,s,u);else{if(i.readyState!==4)return r._clearEndTimer(l),function(){var t=r,s=e,o=n,u=i,a=function(){t.play(s,o),u.removeEventListener("canplaythrough",a,!1)};u.addEventListener("canplaythrough",a,!1)}(),r;i.id=f,i.currentTime=s,i.muted=o._muted,i.volume=r._volume*o.volume(),i.play()}return r.on("play"),typeof n=="function"&&n(f),r}),r):(typeof n=="function"&&n(),r):(r.on("load",function(){r.play(e,n)}),r)},pause:function(e,n){var r=this;if(!r._loaded)return r.on("play",function(){r.pause(e)}),r;r._clearEndTimer(n||0);var i=e?r._nodeById(e):r._activeNode();if(i)if(r._webAudio){if(!i.bufferSource)return r;i.paused=!0,i._pos+=t.currentTime-r._playStart,typeof i.bufferSource.stop=="undefined"?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i._pos=i.currentTime,i.pause();return r.on("pause"),r},stop:function(e,t){var n=this;if(!n._loaded)return n.on("play",function(){n.stop(e)}),n;n._clearEndTimer(t||0);var r=e?n._nodeById(e):n._activeNode();if(r){r._pos=0;if(n._webAudio){if(!r.bufferSource)return n;r.paused=!0,typeof r.bufferSource.stop=="undefined"?r.bufferSource.noteOff(0):r.bufferSource.stop(0)}else r.pause(),r.currentTime=0}return n},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.volume=0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.volume=t._volume),t},volume:function(e,t){var n=this;e=parseFloat(e);if(!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;if(e>=0&&e<=1){n._volume=e;var r=t?n._nodeById(t):n._activeNode();return r&&(n._webAudio?r.gain.value=e:r.volume=e*o.volume()),n}return n._volume},loop:function(e){var t=this;return typeof e=="boolean"?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return typeof e=="object"?(t._sprite=e,t):t._sprite},pos:function(e,n){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(e)}),r;var i=n?r._nodeById(n):r._activeNode();if(i)return r._webAudio?e>=0?(i._pos=e,r.pause(n).play(i._sprite,n),r):i._pos+(t.currentTime-r._playStart):e>=0?(i.currentTime=e,r):i.currentTime},pos3d:function(e,t,n,r){var i=this;t=typeof t=="undefined"||!t?0:t,n=typeof n=="undefined"||!n?-0.5:n;if(!i._loaded)return i.on("play",function(){i.pos3d(e,t,n,r)}),i;if(e>=0||e<0){if(i._webAudio){var s=r?i._nodeById(r):i._activeNode();s&&(i._pos3d=[e,t,n],s.panner.setPosition(e,t,n))}return i}return i._pos3d},fade:function(e,t,n,r,i){var s=this,o=Math.abs(e-t),u=e>t?"down":"up",a=o/.01,f=n/a;if(!s._loaded)return s.on("load",function(){s.fade(e,t,n,r,i)}),s;s.volume(e,i);for(var l=1;l<=a;l++)(function(){var e=s._volume+(u==="up"?.01:-0.01)*l,n=Math.round(1e3*e)/1e3,o=t;setTimeout(function(){s.volume(n,i),n===o&&r&&r()},f*l)})()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,r){var i=this;return i.fade(i._volume,e,t,function(){n&&n(),i.pause(r),i.on("end")},r)},_nodeById:function(e){var t=this,n=t._audioNode[0];for(var r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){n=t._audioNode[r];break}return n},_activeNode:function(){var e=this,t=null;for(var n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){var t=this,n=null;for(var r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&t._audioNode[r].readyState===4){e(t._audioNode[r]),n=!0;break}t._drainPool();if(n)return;var i;t._webAudio?(i=t._setupAudioNode(),e(i)):(t.load(),i=t._audioNode[t._audioNode.length-1],i.addEventListener("loadedmetadata",function(){e(i)}))},_drainPool:function(){var e=this,t=0,n;for(n=0;n<e._audioNode.length;n++)e._audioNode[n].paused&&t++;for(n=e._audioNode.length-1;n>=0;n--){if(t<=5)break;e._audioNode[n].paused&&(t--,e._audioNode.splice(n,1))}},_clearEndTimer:function(e){var t=this,n=t._onendTimer.indexOf(e);n=n>=0?n:0,t._onendTimer[n]&&(clearTimeout(t._onendTimer[n]),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;return n[r]=typeof t.createGain=="undefined"?t.createGainNode():t.createGain(),n[r].gain.value=e._volume,n[r].paused=!0,n[r]._pos=0,n[r].readyState=4,n[r].connect(i),n[r].panner=t.createPanner(),n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[r].panner.connect(n[r]),n[r]},on:function(e,t){var n=this,r=n["_on"+e];if(typeof t=="function")r.push(t);else for(var i=0;i<r.length;i++)t?r[i].call(n,t):r[i].call(n);return n},off:function(e,t){var n=this,r=n["_on"+e],i=t.toString();for(var s=0;s<r.length;s++)if(i===r[s].toString()){r.splice(s,1);break}return n}};if(n)var l=function(n,r){if(r in e)n._duration=e[r].duration,c(n);else{var i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType="arraybuffer",i.onload=function(){t.decodeAudioData(i.response,function(t){t&&(e[r]=t,c(n,t))})},i.onerror=function(){n._webAudio&&(n._buffer=!0,n._webAudio=!1,n._audioNode=[],delete n._gainNode,n.load())};try{i.send()}catch(s){i.onerror()}}},c=function(e,t){e._duration=t?t.duration:e._duration,Object.getOwnPropertyNames(e._sprite).length===0&&(e._sprite={_default:[0,e._duration*1e3]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},h=function(n,r,i){var s=n._nodeById(i);s.bufferSource=t.createBufferSource(),s.bufferSource.buffer=e[n._src],s.bufferSource.connect(s.panner),s.bufferSource.loop=r[0],r[0]&&(s.bufferSource.loopStart=r[1],s.bufferSource.loopEnd=r[1]+r[2])};typeof define=="function"&&define.amd?define("Howler",function(){return{Howler:o,Howl:f}}):(window.Howler=o,window.Howl=f)}();var Kinetic={};!function(){Kinetic.version="4.5.4",Kinetic.Filters={},Kinetic.Node=function(e){this._nodeInit(e)},Kinetic.Shape=function(e){this._initShape(e)},Kinetic.Container=function(e){this._containerInit(e)},Kinetic.Stage=function(e){this._initStage(e)},Kinetic.Layer=function(e){this._initLayer(e)},Kinetic.Group=function(e){this._initGroup(e)},Kinetic.Global={stages:[],idCounter:0,ids:{},names:{},shapes:{},isDragging:function(){var e=Kinetic.DD;return e?e.isDragging:!1},isDragReady:function(){var e=Kinetic.DD;return e?!!e.node:!1},_addId:function(e,t){void 0!==t&&(this.ids[t]=e)},_removeId:function(e){void 0!==e&&delete this.ids[e]},_addName:function(e,t){void 0!==t&&(void 0===this.names[t]&&
(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(void 0!==e){var n=this.names[e];if(void 0!==n){for(var r=0;r<n.length;r++){var i=n[r];i._id===t&&n.splice(r,1)}0===n.length&&delete this.names[e]}}}}}(),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.returnExports=t()}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var e=[].slice.call(arguments),t=e.length,n=0;for(this.length=t;t>n;n++)this[n]=e[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(e){for(var t=0;t<this.length;t++)e(this[t],t)},Kinetic.Collection.prototype.toArray=function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},Kinetic.Collection.mapMethods=function(e){var t,n=e.length;for(t=0;n>t;t++)!function(t){var n=e[t];Kinetic.Collection.prototype[n]=function(){var e,t=this.length;for(args=[].slice.call(arguments),e=0;t>e;e++)this[e][n].apply(this[e],args)}}(t)}}(),function(){Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t},scale:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,s=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(e,t){var n=this.m[0]+this.m[2]*t,r=this.m[1]+this.m[3]*t,i=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s},multiply:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o},invert:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o},getMatrix:function(){return this.m}}}(),function(){var e="canvas",t="2d",n="[object Array]",r="[object Number]",i="[object String]",s=Math.PI/180,o=180/Math.PI,u="#",a="",f="0",l="Kinetic warning: ",c="rgb(",h={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(e){return!!e&&1==e.nodeType},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor==Object},_isArray:function(e){return Object.prototype.toString.call(e)==n},_isNumber:function(e){return Object.prototype.toString.call(e)==r},_isString:function(e){return Object.prototype.toString.call(e)==i},_hasMethods:function(e){var t,n=[];for(t in e)this._isFunction(e[t])&&n.push(t);return n.length>0},_isInDocument:function(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_getXY:function(e){if(this._isNumber(e))return{x:e,y:e};if(this._isArray(e)){if(1===e.length){var t=e[0];if(this._isNumber(t))return{x:t,y:t};if(this._isArray(t))return{x:t[0],y:t[1]};if(this._isObject(t))return t}else if(e.length>=2)return{x:e[0],y:e[1]}}else if(this._isObject(e))return e;return null},_getSize:function(e){if(this._isNumber(e))return{width:e,height:e};if(this._isArray(e))if(1===e.length){var t=e[0];if(this._isNumber(t))return{width:t,height:t};if(this._isArray(t)){if(t.length>=4)return{width:t[2],height:t[3]};if(t.length>=2)return{width:t[0],height:t[1]}}else if(this._isObject(t))return t}else{if(e.length>=4)return{width:e[2],height:e[3]};if(e.length>=2)return{width:e[0],height:e[1]}}else if(this._isObject(e))return e;return null},_getPoints:function(e){var t,n,r=[];if(void 0===e)return[];if(n=e.length,this._isArray(e[0])){for(t=0;n>t;t++)r.push({x:e[t][0],y:e[t][1]});return r}if(this._isObject(e[0]))return e;for(t=0;n>t;t+=2)r.push({x:e[t],y:e[t+1]});return r},_getImage:function(n,r){var i,s,o,u;n?this._isElement(n)?r(n):this._isString(n)?(i=new Image,i.onload=function(){r(i)},i.src=n):n.data?(s=document.createElement(e),s.width=n.width,s.height=n.height,o=s.getContext(t),o.putImageData(n,0,0),u=s.toDataURL(),i=new Image,i.onload=function(){r(i)},i.src=u):r(null):r(null)},_rgbToHex:function(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb:function(e){e=e.replace(u,a);var t=parseInt(e,16);return{r:255&t>>16,g:255&t>>8,b:255&t}},getRandomColor:function(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e=f+e;return u+e},getRGB:function(e){var t;return e in h?(t=h[e],{r:t[0],g:t[1],b:t[2]}):e[0]===u?this._hexToRgb(e.substring(1)):e.substr(0,4)===c?(t=p.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},_merge:function(e,t){var n=this._clone(t);for(var r in e)n[r]=this._isObject(e[r])?this._merge(e[r],n[r]):e[r];return n},_clone:function(e){var t={};for(var n in e)t[n]=this._isObject(e[n])?this._clone(e[n]):e[n];return t},_degToRad:function(e){return e*s},_radToDeg:function(e){return e*o},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},warn:function(e){window.console&&console.warn&&console.warn(l+e)},extend:function(e,t){for(var n in t.prototype)n in e.prototype||(e.prototype[n]=t.prototype[n])},addMethods:function(e,t){var n;for(n in t)e.prototype[n]=t[n]},_getControlPoints:function(e,t,n,r){var i=e.x,s=e.y,o=t.x,u=t.y,a=n.x,f=n.y,l=Math.sqrt(Math.pow(o-i,2)+Math.pow(u-s,2)),c=Math.sqrt(Math.pow(a-o,2)+Math.pow(f-u,2)),h=r*l/(l+c),p=r*c/(l+c),d=o-h*(a-i),v=u-h*(f-s),m=o+p*(a-i),g=u+p*(f-s);return[{x:d,y:v},{x:m,y:g}]},_expandPoints:function(e,t){var n,r,i=e.length,s=[];for(n=1;i-1>n;n++)r=Kinetic.Util._getControlPoints(e[n-1],e[n],e[n+1],t),s.push(r[0]),s.push(e[n]),s.push(r[1]);return s}}}(),function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;Kinetic.Canvas=function(e){this.init(e)},Kinetic.Canvas.prototype={init:function(e){e=e||{};var t=e.width||0,n=e.height||0,r=e.pixelRatio||i,s=e.contextType||"2d";this.pixelRatio=r,this.element=document.createElement("canvas"),this.element.style.padding=0,this.element.style.margin=0,this.element.style.border=0,this.element.style.background="transparent",this.context=this.element.getContext(s),this.setSize(t,n)},getElement:function(){return this.element},getContext:function(){return this.context},setWidth:function(e){this.width=this.element.width=e*this.pixelRatio,this.element.style.width=e+"px"},setHeight:function(e){this.height=this.element.height=e*this.pixelRatio,this.element.style.height=e+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(e,t){this.setWidth(e),this.setHeight(t)},clear:function(){var e=this.getContext();this.getElement(),e.clearRect(0,0,this.getWidth(),this.getHeight())},toDataURL:function(e,t){try{return this.element.toDataURL(e,t)}catch(n){try{return this.element.toDataURL()}catch(r){return Kinetic.Util.warn("Unable to get data URL. "+r.message),""}}},fill:function(e){e.getFillEnabled()&&this._fill(e)},stroke:function(e){e.getStrokeEnabled()&&this._stroke(e)},fillStroke:function(e){var t=e.getFillEnabled();t&&this._fill(e),e.getStrokeEnabled()&&this._stroke(e,e.hasShadow()&&e.hasFill()&&t)},applyShadow:function(e,t){var n=this.context;n.save(),this._applyShadow(e),t(),n.restore(),t()},_applyLineCap:function(e){var t=e.getLineCap();t&&(this.context.lineCap=t)},_applyOpacity:function(e){var t=e.getAbsoluteOpacity();1!==t&&(this.context.globalAlpha=t)},_applyLineJoin:function(e){var t=e.getLineJoin();t&&(this.context.lineJoin=t)},_applyAncestorTransforms:function(e){var t,n,r=this.context;e._eachAncestorReverse(function(e){t=e.getTransform(!0),n=t.getMatrix(),r.transform(n[0],n[1],n[2],n[3],n[4],n[5])},!0)},_clip:function(e){var t=this.getContext();t.save(),this._applyAncestorTransforms(e),t.beginPath(),e.getClipFunc()(this),t.clip(),t.setTransform(1,0,0,1,0,0)}},Kinetic.SceneCanvas=function(e){Kinetic.Canvas.call(this,e)},Kinetic.SceneCanvas.prototype={setWidth:function(e){var t=this.pixelRatio;Kinetic.Canvas.prototype.setWidth.call(this,e),this.context.scale(t,t)},setHeight:function(e){var t=this.pixelRatio;Kinetic.Canvas.prototype.setHeight.call(this,e),this.context.scale(t,t)},_fillColor:function(e){var t=this.context,n=e.getFill();t.fillStyle=n,e._fillFunc(t)},_fillPattern:function(e){var t=this.context,n=e.getFillPatternImage(),r=e.getFillPatternX(),i=e.getFillPatternY(),s=e.getFillPatternScale(),o=e.getFillPatternRotation(),u=e.getFillPatternOffset(),a=e.getFillPatternRepeat();(r||i)&&t.translate(r||0,i||0),o&&t.rotate(o),s&&t.scale(s.x,s.y),u&&t.translate(-1*u.x,-1*u.y),t.fillStyle=t.createPattern(n,a||"repeat"),t.fill()},_fillLinearGradient:function(e){var t=this.context,n=e.getFillLinearGradientStartPoint(),r=e.getFillLinearGradientEndPoint(),i=e.getFillLinearGradientColorStops(),s=t.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var o=0;o<i.length;o+=2)s.addColorStop(i[o],i[o+1]);t.fillStyle=s,t.fill()}},_fillRadialGradient:function(e){for(var t=this.context,n=e.getFillRadialGradientStartPoint(),r=e.getFillRadialGradientEndPoint(),i=e.getFillRadialGradientStartRadius(),s=e.getFillRadialGradientEndRadius(),o=e.getFillRadialGradientColorStops(),u=t.createRadialGradient(n.x,n.y,i,r.x,r.y,s),a=0;a<o.length;a+=2)u.addColorStop(o[a],o[a+1]);t.fillStyle=u,t.fill()},_fill:function(e,t){var n=this.context,r=e.getFill(),i=e.getFillPatternImage(),s=e.getFillLinearGradientColorStops(),o=e.getFillRadialGradientColorStops(),u=e.getFillPriority();n.save(),!t&&e.hasShadow()&&this._applyShadow(e),r&&"color"===u?this._fillColor(e):i&&"pattern"===u?this._fillPattern(e):s&&"linear-gradient"===u?this._fillLinearGradient(e):o&&"radial-gradient"===u?this._fillRadialGradient(e):r?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e),n.restore(),!t&&e.hasShadow()&&this._fill(e,!0)},_stroke:function(e,t){var n=this.context,r=e.getStroke(),i=e.getStrokeWidth(),s=e.getDashArray();(r||i)&&(n.save(),e.getStrokeScaleEnabled()||n.setTransform(1,0,0,1,0,0),this._applyLineCap(e),s&&e.getDashArrayEnabled()&&(n.setLineDash?n.setLineDash(s):"mozDash"in n?n.mozDash=s:"webkitLineDash"in n&&(n.webkitLineDash=s)),!t&&e.hasShadow()&&this._applyShadow(e),n.lineWidth=i||2,n.strokeStyle=r||"black",e._strokeFunc(n),n.restore(),!t&&e.hasShadow()&&this._stroke(e,!0))},_applyShadow:function(e){var t=this.context;if(e.hasShadow()&&e.getShadowEnabled()){var n=e.getAbsoluteOpacity(),r=e.getShadowColor()||"black",i=e.getShadowBlur()||5,s=e.getShadowOffset()||{x:0,y:0};e.getShadowOpacity()&&(t.globalAlpha=e.getShadowOpacity()*n),t.shadowColor=r,t.shadowBlur=i,t.shadowOffsetX=s.x,t.shadowOffsetY=s.y}}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(e){Kinetic.Canvas.call(this,e)},Kinetic.HitCanvas.prototype={_fill:function(e){var t=this.context;t.save(),t.fillStyle=e.colorKey,e._fillFuncHit(t),t.restore()},_stroke:function(e){var t=this.context,n=e.getStroke(),r=e.getStrokeWidth();(n||r)&&(this._applyLineCap(e),t.save(),t.lineWidth=r||2,t.strokeStyle=e.colorKey,e._strokeFuncHit(t),t.restore())}},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var e=" ",t="",n=".",r="get",i="set",s="Shape",o="Stage",u="X",a="Y",f="kinetic",l="before",c="Change",h="id",p="name",d="mouseenter",v="mouseleave",m="Deg",g="beforeDraw",y="draw",b="RGB",w="r",E="g",S="b",x="R",T="G",N="B",C="#",k="children";Kinetic.Util.addMethods(Kinetic.Node,{_nodeInit:function(e){this._id=Kinetic.Global.idCounter++,this.eventListeners={},this.setAttrs(e)},on:function(r,i){var s,o,u,a,f,l,c=r.split(e),h=c.length;for(s=0;h>s;s++)o=c[s],u=o,a=u.split(n),f=a[0],l=a.length>1?a[1]:t,this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:l,handler:i});return this},off:function(t){var r,i,s,o,u,a,f=t.split(e),l=f.length;for(r=0;l>r;r++)if(i=f[r],o=i,u=o.split(n),a=u[0],u.length>1)if(a)this.eventListeners[a]&&this._off(a,u[1]);else for(s in this.eventListeners)this._off(s,u[1]);else delete this.eventListeners[a];return this},remove:function(){var e=this.getParent();return e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),delete this.parent),this},destroy:function(){var e=Kinetic.Global;e._removeId(this.getId()),e._removeName(this.getName(),this._id),this.remove()},getAttr:function(e){var t=r+Kinetic.Util._capitalize(e);return Kinetic.Util._isFunction(this[t])?this[t]():this.attrs[e]},setAttr:function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=i+Kinetic.Util._capitalize(t),r=this[n];return e.shift(),Kinetic.Util._isFunction(r)?r.apply(this,e):this.attrs[t]=e[0],this},getAttrs:function(){return this.attrs||{}},createAttrs:function(){return void 0===this.attrs&&(this.attrs={}),this},setAttrs:function(e){var t,n;if(e)for(t in e)t===k||(n=i+Kinetic.Util._capitalize(t),Kinetic.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]));return this},getVisible:function(){var e=this.attrs.visible,t=this.getParent();return void 0===e&&(e=!0),e&&t&&!t.getVisible()?!1:e},getListening:function(){var e=this.attrs.listening,t=this.getParent();return void 0===e&&(e=!0),e&&t&&!t.getListening()?!1:e},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function e(o){for(t=[],n=o.length,r=0;n>r;r++)i=o[r],f++,i.nodeType!==s&&(t=t.concat(i.getChildren().toArray())),i._id===a._id&&(r=n);t.length>0&&t[0].getLevel()<=u&&e(t)}var t,n,r,i,u=this.getLevel(),a=(this.getStage(),this),f=0;return a.nodeType!==o&&e(a.getStage().getChildren()),f},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},setPosition:function(){var e=Kinetic.Util._getXY([].slice.call(arguments));return this.setX(e.x),this.setY(e.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var e=this.getAbsoluteTransform(),t=this.getOffset();return e.translate(t.x,t.y),e.getTranslation()},setAbsolutePosition:function(){var e,t=Kinetic.Util._getXY([].slice.call(arguments)),n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition(t.x,t.y),this._setTransform(n),this},move:function(){var e=Kinetic.Util._getXY([].slice.call(arguments)),t=this.getX(),n=this.getY();return void 0!==e.x&&(t+=e.x),void 0!==e.y&&(n+=e.y),this.setPosition(t,n),this},_eachAncestorReverse:function(e,t){var n,r,i=[],s=this.getParent();for(t&&i.unshift(this);s;)i.unshift(s),s=s.parent;for(n=i.length,r=0;n>r;r++)e(i[r])},rotate:function(e){return this.setRotation(this.getRotation()+e),this},rotateDeg:function(e){return this.setRotation(this.getRotation()+Kinetic.Util._degToRad(e)),this},moveToTop:function(){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var e=this.index,t=this.parent.getChildren().length;return t-1>e?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(e){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){var e=this.getOpacity();return this.getParent()&&(e*=this.getParent().getAbsoluteOpacity()),e},moveTo:function(e){return Kinetic.Node.prototype.remove.call(this),e.add(this),this},toObject:function(){var e,t,n=Kinetic.Util,r={},i=this.getAttrs();r.attrs={};for(e in i)t=i[e],n._isFunction(t)||n._isElement(t)||n._isObject(t)&&n._hasMethods(t)||(r.attrs[e]=t);return r.className=this.getClassName(),r},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){return this.getParent().getLayer()},getStage:function(){return this.getParent()?this.getParent().getStage():void 0},fire:function(e,t,n){return n?this._fireAndBubble(e,t||{}):this._fire(e,t||{}),this},getAbsoluteTransform:function(){var e,t=new Kinetic.Transform;return this._eachAncestorReverse(function(n){e=n.getTransform(),t.multiply(e)},!0),t},_getAndCacheTransform:function(){var e=new Kinetic.Transform,t=this.getX(),n=this.getY(),r=this.getRotation(),i=this.getScaleX(),s=this.getScaleY(),o=this.getSkewX(),u=this.getSkewY(),a=this.getOffsetX(),f=this.getOffsetY();return(0!==t||0!==n)&&e.translate(t,n),0!==r&&e.rotate(r),(0!==o||0!==u)&&e.skew(o,u),(1!==i||1!==s)&&e.scale(i,s),(0!==a||0!==f)&&e.translate(-1*a,-1*f),this.cachedTransform=e,e},getTransform:function(e){var t=this.cachedTransform;return e&&t?t:this._getAndCacheTransform()},clone:function(e){var t,n,r,i,s,o=this.getClassName(),u=new Kinetic[o](this.attrs);for(t in this.eventListeners)for(n=this.eventListeners[t],r=n.length,i=0;r>i;i++)s=n[i],s.name.indexOf(f)<0&&(u.eventListeners[t]||(u.eventListeners[t]=[]),u.eventListeners[t].push(s));return u.setAttrs(e),u},toDataURL:function(e){e=e||{};var t=e.mimeType||null,n=e.quality||null,r=this.getStage(),i=e.x||0,s=e.y||0,o=new Kinetic.SceneCanvas({width:e.width||r.getWidth(),height:e.height||r.getHeight(),pixelRatio:1}),u=o.getContext();return u.save(),(i||s)&&u.translate(-1*i,-1*s),this.drawScene(o),u.restore(),o.toDataURL(t,n)},toImage:function(e){Kinetic.Util._getImage(this.toDataURL(e),function(t){e.callback(t)})},setSize:function(){var e=Kinetic.Util._getSize(Array.prototype.slice.call(arguments));return this.setWidth(e.width),this.setHeight(e.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},_get:function(e){return this.nodeType===e?[this]:[]},_off:function(e,t){var n,r=this.eventListeners[e];for(n=0;n<r.length;n++)if(r[n].name===t){if(r.splice(n,1),0===r.length){delete this.eventListeners[e];break}n--}},_clearTransform:function(){var e={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e},_setTransform:function(e){var t;for(t in e)this.attrs[t]=e[t];this.cachedTransform=null},_fireBeforeChangeEvent:function(e,t,n){this._fire(l+Kinetic.Util._capitalize(e)+c,{oldVal:t,newVal:n})},_fireChangeEvent:function(e,t,n){this._fire(e+c,{oldVal:t,newVal:n})},setId:function(e){var t=this.getId(),n=(this.getStage(),Kinetic.Global);return n._removeId(t),n._addId(this,e),this._setAttr(h,e),this},setName:function(e){var t=this.getName(),n=(this.getStage(),Kinetic.Global);return n._removeName(t,this._id),n._addName(this,e),this._setAttr(p,e),this},_setAttr:function(e,t){var n;void 0!==t&&(n=this.attrs[e],this._fireBeforeChangeEvent(e,n,t),this.attrs[e]=t,this._fireChangeEvent(e,n,t))},_fireAndBubble:function(e,t,n){t&&this.nodeType===s&&(t.targetNode=this),this.getStage(),this.eventListeners;var r=!0;e===d&&n&&this._id===n._id?r=!1:e===v&&n&&this._id===n._id&&(r=!1),r&&(this._fire(e,t),t&&!t.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n.parent):this._fireAndBubble.call(this.parent,e,t)))},_fire:function(e,t){var n,r,i=this.eventListeners[e];if(i)for(n=i.length,r=0;n>r;r++)i[r].handler.call(this,t)},draw:function(){var e={node:this};return this._fire(g,e),this.drawScene(),this.drawHit(),this._fire(y,e),this},shouldDrawHit:function(){return this.isVisible()&&this.isListening()&&!Kinetic.Global.isDragging()},isDraggable:function(){return!1}}),Kinetic.Node.setPoints=function(e){var t=Kinetic.Util._getPoints(e);this._setAttr("points",t)},Kinetic.Node.addGetterSetter=function(e,t,n,r){this.addGetter(e,t,n),this.addSetter(e,t,r)},Kinetic.Node.addPointGetterSetter=function(e,t,n,r){this.addPointGetter(e,t),this.addPointSetter(e,t),this.addGetter(e,t+u,n),this.addGetter(e,t+a,n),this.addSetter(e,t+u,r),this.addSetter(e,t+a,r)},Kinetic.Node.addPointsGetterSetter=function(e,t){this.addPointsGetter(e,t),this.addPointsSetter(e,t)},Kinetic.Node.addRotationGetterSetter=function(e,t,n,r){this.addRotationGetter(e,t,n),this.addRotationSetter(e,t,r)},Kinetic.Node.addColorGetterSetter=function(e,t){this.addGetter(e,t),this.addSetter(e,t),this.addColorRGBGetter(e,t),this.addColorComponentGetter(e,t,w),this.addColorComponentGetter(e,t,E),this.addColorComponentGetter(e,t,S),this.addColorRGBSetter(e,t),this.addColorComponentSetter(e,t,w),this.addColorComponentSetter(e,t,E),this.addColorComponentSetter(e,t,S)},Kinetic.Node.addColorRGBGetter=function(e,t){var n=r+Kinetic.Util._capitalize(t)+b;e.prototype[n]=function(){return Kinetic.Util.getRGB(this.attrs[t])}},Kinetic.Node.addColorComponentGetter=function(e,t,n){var i=r+Kinetic.Util._capitalize(t),s=i+Kinetic.Util._capitalize(n);e.prototype[s]=function(){return this[i+b]()[n]}},Kinetic.Node.addPointsGetter=function(e,t){var n=r+Kinetic.Util._capitalize(t);e.prototype[n]=function(){var e=this.attrs[t];return void 0===e?[]:e}},Kinetic.Node.addGetter=function(e,t,n){var i=r+Kinetic.Util._capitalize(t);e.prototype[i]=function(){var e=this.attrs[t];return void 0===e?n:e}},Kinetic.Node.addPointGetter=function(e,t){var n=r+Kinetic.Util._capitalize(t);e.prototype[n]=function(){var e=this;return{x:e[n+u](),y:e[n+a]()}}},Kinetic.Node.addRotationGetter=function(e,t,n){var i=r+Kinetic.Util._capitalize(t);e.prototype[i]=function(){var e=this.attrs[t];return void 0===e&&(e=n),e},e.prototype[i+m]=function(){var e=this.attrs[t];return void 0===e&&(e=n),Kinetic.Util._radToDeg(e)}},Kinetic.Node.addColorRGBSetter=function(e,t){var n=i+Kinetic.Util._capitalize(t)+b;e.prototype[n]=function(e){var n=e&&void 0!==e.r?0|e.r:this.getAttr(t+x),r=e&&void 0!==e.g?0|e.g:this.getAttr(t+T),i=e&&void 0!==e.b?0|e.b:this.getAttr(t+N);this._setAttr(t,C+Kinetic.Util._rgbToHex(n,r,i))}},Kinetic.Node.addColorComponentSetter=function(e,t,n){var r=i+Kinetic.Util._capitalize(t),s=r+Kinetic.Util._capitalize(n);e.prototype[s]=function(e){var t={};t[n]=e,this[r+b](t)}},Kinetic.Node.addPointsSetter=function(e,t){var n=i+Kinetic.Util._capitalize(t);e.prototype[n]=Kinetic.Node.setPoints},Kinetic.Node.addSetter=function(e,t,n){var r=i+Kinetic.Util._capitalize(t);e.prototype[r]=function(e){this._setAttr(t,e),n&&(this.cachedTransform=null)}},Kinetic.Node.addPointSetter=function(e,t){var n=i+Kinetic.Util._capitalize(t);e.prototype[n]=function(){var e=Kinetic.Util._getXY([].slice.call(arguments)),r=this.attrs[t],i=0,s=0;e&&(i=e.x,s=e.y,this._fireBeforeChangeEvent(t,r,e),void 0!==i&&this[n+u](i),void 0!==s&&this[n+a](s),this._fireChangeEvent(t,r,e))}},Kinetic.Node.addRotationSetter=function(e,t,n){var r=i+Kinetic.Util._capitalize(t);e.prototype[r]=function(e){this._setAttr(t,e),n&&(this.cachedTransform=null)},e.prototype[r+m]=function(e){this._setAttr(t,Kinetic.Util._degToRad(e)),n&&(this.cachedTransform=null)}},Kinetic.Node.create=function(e,t){return this._createNode(JSON.parse(e),t)},Kinetic.Node._createNode=function(e,t){var n,r,i,s=Kinetic.Node.prototype.getClassName.call(e),o=e.children;if(t&&(e.attrs.container=t),n=new Kinetic[s](e.attrs),o)for(r=o.length,i=0;r>i;i++)n.add(this._createNode(o[i]));return n},Kinetic.Node.addGetterSetter(Kinetic.Node,"x",0,!0),Kinetic.Node.addGetterSetter(Kinetic.Node,"y",0,!0),Kinetic.Node.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Node.addGetter(Kinetic.Node,"name"),Kinetic.Node.addGetter(Kinetic.Node,"id"),Kinetic.Node.addRotationGetterSetter(Kinetic.Node,"rotation",0,!0),Kinetic.Node.addPointGetterSetter(Kinetic.Node,"scale",1,!0),Kinetic.Node.addPointGetterSetter(Kinetic.Node,"skew",0,!0),Kinetic.Node.addPointGetterSetter(Kinetic.Node,"offset",0,!0),Kinetic.Node.addSetter(Kinetic.Node,"width"),Kinetic.Node.addSetter(Kinetic.Node,"height"),Kinetic.Node.addSetter(Kinetic.Node,"listening"),Kinetic.Node.addSetter(Kinetic.Node,"visible"),Kinetic.Node.prototype.isListening=Kinetic.Node.prototype.getListening,Kinetic.Node.prototype.isVisible=Kinetic.Node.prototype.getVisible,Kinetic.Collection.mapMethods(["on","off","remove","destroy","show","hide","move","rotate","moveToTop","moveUp","moveDown","moveToBottom","moveTo","fire","draw"])}(),function(){function e(e){window.setTimeout(e,1e3/60)}Kinetic.Animation=function(e,t){this.func=e,this.setLayers(t),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}},Kinetic.Animation.prototype={setLayers:function(e){var t=[];t=e?e.length>0?e:[e]:[],this.layers=t},getLayers:function(){return this.layers},addLayer:function(e){var t,n,r=this.layers;if(r){for(t=r.length,n=0;t>n;n++)if(r[n]._id===e._id)return!1}else this.layers=[];return this.layers.push(e),!0},isRunning:function(){for(var e=Kinetic.Animation,t=e.animations,n=0;n<t.length;n++)if(t[n].id===this.id)return!0;return!1},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(e){for(var t=e.id,n=this.animations,r=n.length,i=0;r>i;i++)if(n[i].id===t){this.animations.splice(i,1);break}},Kinetic.Animation._runFrames=function(){var e,t,n,r,i,s,o,u,a={},f=this.animations;for(r=0;r<f.length;r++){for(e=f[r],t=e.layers,n=e.func,e._updateFrameObject((new Date).getTime()),s=t.length,i=0;s>i;i++)o=t[i],void 0!==o._id&&(a[o._id]=o);n&&n.call(e,e.frame)}for(u in a)a[u].draw()},Kinetic.Animation._animationLoop=function(){var e=this;this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){e._animationLoop()})):this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var e=this;this.animRunning||(this.animRunning=!0,e._animationLoop())},RAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e}(),Kinetic.Animation.requestAnimFrame=function(t){var n=Kinetic.DD&&Kinetic.DD.isDragging?e:RAF;n(t)};var t=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(e){t.call(this,e)},Kinetic.Layer.batchAnim=new Kinetic.Animation(function(){0===this.getLayers().length&&this.stop(),this.setLayers([])}),Kinetic.Layer.prototype.batchDraw=function(){var e=Kinetic.Layer.batchAnim;e.addLayer(this),e.isRunning()||e.start()}}(),function(){var e={node:1,duration:1,easing:1,onFinish:1,yoyo:1},t=1,n=2,r=3,i=0;Kinetic.Tween=function(t){var n,r=this,o=t.node,u=o._id,l=t.duration||1,c=t.easing||Kinetic.Easings.Linear,h=!!t.yoyo;this.node=o,this._id=i++,this.onFinish=t.onFinish,this.anim=new Kinetic.Animation(function(){r.tween.onEnterFrame()},o.getLayer()||o.getLayers()),this.tween=new s(n,function(e){r._tweenFunc(e)},c,0,1,1e3*l,h),this._addListeners(),Kinetic.Tween.attrs[u]||(Kinetic.Tween.attrs[u]={}),Kinetic.Tween.attrs[u][this._id]||(Kinetic.Tween.attrs[u][this._id]={}),Kinetic.Tween.tweens[u]||(Kinetic.Tween.tweens[u]={});for(n in t)void 0===e[n]&&this._addAttr(n,t[n]);this.reset()},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(e,t){var n,r,i,s,o,u,a,f=this.node,l=f._id;if(i=Kinetic.Tween.tweens[l][e],i&&delete Kinetic.Tween.attrs[l][i][e],n=f.getAttr(e),Kinetic.Util._isArray(t))for(t=Kinetic.Util._getPoints(t),r=[],o=t.length,s=0;o>s;s++)u=n[s],a=t[s],r.push({x:a.x-u.x,y:a.y-u.y});else r=t-n;Kinetic.Tween.attrs[l][this._id][e]={start:n,diff:r},Kinetic.Tween.tweens[l][e]=this._id},_tweenFunc:function(e){var t,n,r,i,s,o,u,a,f,l=this.node,c=Kinetic.Tween.attrs[l._id][this._id];for(t in c){if(n=c[t],r=n.start,i=n.diff,Kinetic.Util._isArray(r))for(s=[],u=r.length,o=0;u>o;o++)a=r[o],f=i[o],s.push({x:a.x+f.x*e,y:a.y+f.y*e});else s=r+i*e;l.setAttr(t,s)}},_addListeners:function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){e.onFinish&&e.onFinish()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var e=this.node;return this.tween.reset(),(e.getLayer()||e.getLayers()).draw(),this},seek:function(e){var t=this.node;return this.tween.seek(1e3*e),(t.getLayer()||t.getLayers()).draw(),this},pause:function(){return this.tween.pause(),this},finish:function(){var e=this.node;return this.tween.finish(),(e.getLayer()||e.getLayers()).draw(),this},destroy:function(){var e,t=this.node._id,n=this._id,r=Kinetic.Tween.tweens[t];this.pause();for(e in r)delete Kinetic.Tween.tweens[t][e];delete Kinetic.Tween.attrs[t][n]}};var s=function(e,t,n,r,i,s,o){this.prop=e,this.propFunc=t,this.begin=r,this._pos=r,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()};s.prototype={fire:function(e){var t=this[e];t&&t()},setTime:function(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>e?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())},getTime:function(){return this._time},setPosition:function(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e},getPosition:function(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=r,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var e=this.getTimer()-this._startTime;this.state===n?this.setTime(e):this.state===r&&this.setTime(this.duration-e)},pause:function(){this.state=t,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(e,t,n,r){var i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},BackEaseOut:function(e,t,n,r){var i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},BackEaseInOut:function(e,t,n,r){var i=1.70158;return(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},ElasticEaseIn:function(e,t,n,r,i,s){var o=0;return 0===e?t:1==(e/=r)?t+n:(s||(s=.3*r),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},ElasticEaseOut:function(e,t,n,r,i,s){var o=0;return 0===e?t:1==(e/=r)?t+n:(s||(s=.3*r),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+
t)},ElasticEaseInOut:function(e,t,n,r,i,s){var o=0;return 0===e?t:2==(e/=r/2)?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),1>e?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:.5*i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},BounceEaseOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn:function(e,t,n,r){return n-Kinetic.Easings.BounceEaseOut(r-e,0,n,r)+t},BounceEaseInOut:function(e,t,n,r){return r/2>e?.5*Kinetic.Easings.BounceEaseIn(2*e,0,n,r)+t:.5*Kinetic.Easings.BounceEaseOut(2*e-r,0,n,r)+.5*n+t},EaseIn:function(e,t,n,r){return n*(e/=r)*e+t},EaseOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},EaseInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},StrongEaseIn:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},StrongEaseOut:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},StrongEaseInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Linear:function(e,t,n,r){return n*e/r+t}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(e){var t=Kinetic.DD,n=t.node;if(n){var r=n.getStage().getPointerPosition(),i=n.getDragBoundFunc(),s={x:r.x-t.offset.x,y:r.y-t.offset.y};void 0!==i&&(s=i.call(n,s,e)),n.setAbsolutePosition(s),t.isDragging||(t.isDragging=!0,n.fire("dragstart",e,!0)),n.fire("dragmove",e,!0)}},_endDragBefore:function(e){var t,n,r=Kinetic.DD,i=r.node;i&&(t=i.nodeType,n=i.getLayer(),r.anim.stop(),r.isDragging&&(r.isDragging=!1,e&&(e.dragEndNode=i)),delete r.node,(n||i).draw())},_endDragAfter:function(e){e=e||{};var t=e.dragEndNode;e&&t&&t.fire("dragend",e,!0)}},Kinetic.Node.prototype.startDrag=function(){var e=Kinetic.DD,t=this.getStage(),n=this.getLayer(),r=t.getPointerPosition(),i=(this.getTransform().getTranslation(),this.getAbsolutePosition());r&&(e.node&&e.node.stopDrag(),e.node=this,e.offset.x=r.x-i.x,e.offset.y=r.y-i.y,e.anim.setLayers(n||this.getLayers()),e.anim.start())},Kinetic.Node.prototype.stopDrag=function(){var e=Kinetic.DD,t={};e._endDragBefore(t),e._endDragAfter(t)},Kinetic.Node.prototype.setDraggable=function(e){this._setAttr("draggable",e),this._dragChange()};var e=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var t=Kinetic.DD;t.node&&t.node._id===this._id&&this.stopDrag(),e.call(this)},Kinetic.Node.prototype.isDragging=function(){var e=Kinetic.DD;return e.node&&e.node._id===this._id&&e.isDragging},Kinetic.Node.prototype._listenDrag=function(){this._dragCleanup();var e=this;this.on("mousedown.kinetic touchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=Kinetic.DD;e&&t.node&&t.node._id===this._id&&t.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){this.off("mousedown.kinetic"),this.off("touchstart.kinetic")},Kinetic.Node.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Node.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Node.prototype.isDraggable=Kinetic.Node.prototype.getDraggable;var t=document.getElementsByTagName("html")[0];t.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),t.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),t.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),t.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{_containerInit:function(e){this.children=new Kinetic.Collection,Kinetic.Node.call(this,e)},getChildren:function(){return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var e,t=this.children;t.length>0;){var e=t[0];e.hasChildren()&&e.removeChildren(),e.remove()}return this},destroyChildren:function(){for(var e=this.children;e.length>0;)e[0].destroy();return this},add:function(e){var t=(Kinetic.Global,this.children);return e.index=t.length,e.parent=this,t.push(e),this._fire("add",{child:e}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},get:function(e){var t=new Kinetic.Collection;if("#"===e.charAt(0)){var n=this._getNodeById(e.slice(1));n&&t.push(n)}else if("."===e.charAt(0)){var r=this._getNodesByName(e.slice(1));Kinetic.Collection.apply(t,r)}else{for(var i=[],s=this.getChildren(),o=s.length,u=0;o>u;u++)i=i.concat(s[u]._get(e));Kinetic.Collection.apply(t,i)}return t},_getNodeById:function(e){var t=(this.getStage(),Kinetic.Global),n=t.ids[e];return void 0!==n&&this.isAncestorOf(n)?n:null},_getNodesByName:function(e){var t=Kinetic.Global,n=t.names[e]||[];return this._getDescendants(n)},_get:function(e){for(var t=Kinetic.Node.prototype._get.call(this,e),n=this.getChildren(),r=n.length,i=0;r>i;i++)t=t.concat(n[i]._get(e));return t},toObject:function(){var e=Kinetic.Node.prototype.toObject.call(this);e.children=[];for(var t=this.getChildren(),n=t.length,r=0;n>r;r++){var i=t[r];e.children.push(i.toObject())}return e},_getDescendants:function(e){for(var t=[],n=e.length,r=0;n>r;r++){var i=e[r];this.isAncestorOf(i)&&t.push(i)}return t},isAncestorOf:function(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1},clone:function(e){var t=Kinetic.Node.prototype.clone.call(this,e);return this.getChildren().each(function(e){t.add(e.clone())}),t},getAllIntersections:function(){for(var e=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),t=[],n=this.get("Shape"),r=n.length,i=0;r>i;i++){var s=n[i];s.isVisible()&&s.intersects(e)&&t.push(s)}return t},_setChildrenIndices:function(){for(var e=this.children,t=e.length,n=0;t>n;n++)e[n].index=n},drawScene:function(e){var t,n,r,i=this.getLayer(),s=!!this.getClipFunc();if(!e&&i&&(e=i.getCanvas()),this.isVisible()){for(s&&e._clip(this),t=this.children,r=t.length,n=0;r>n;n++)t[n].drawScene(e);s&&e.getContext().restore()}return this},drawHit:function(){var e,t=!!this.getClipFunc()&&"Stage"!==this.nodeType,n=0,r=0,i=[];if(this.shouldDrawHit()){for(t&&(e=this.getLayer().hitCanvas,e._clip(this)),i=this.children,r=i.length,n=0;r>n;n++)i[n].drawHit();t&&e.getContext().restore()}return this}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Node.addGetterSetter(Kinetic.Container,"clipFunc")}(),function(){function e(e){e.fill()}function t(e){e.stroke()}function n(e){e.fill()}function r(e){e.stroke()}Kinetic.Util.addMethods(Kinetic.Shape,{_initShape:function(i){this.nodeType="Shape",this._fillFunc=e,this._strokeFunc=t,this._fillFuncHit=n,this._strokeFuncHit=r;for(var s,o=Kinetic.Global.shapes;;)if(s=Kinetic.Util.getRandomColor(),s&&!(s in o))break;this.colorKey=s,o[s]=this,this.createAttrs(),Kinetic.Node.call(this,i)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},_get:function(e){return this.className===e||this.nodeType===e?[this]:[]},intersects:function(){var e=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),t=this.getStage(),n=t.hitCanvas;n.clear(),this.drawScene(n);var r=n.context.getImageData(0|e.x,0|e.y,1,1).data;return r[3]>0},enableFill:function(){return this._setAttr("fillEnabled",!0),this},disableFill:function(){return this._setAttr("fillEnabled",!1),this},enableStroke:function(){return this._setAttr("strokeEnabled",!0),this},disableStroke:function(){return this._setAttr("strokeEnabled",!1),this},enableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!0),this},disableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!1),this},enableShadow:function(){return this._setAttr("shadowEnabled",!0),this},disableShadow:function(){return this._setAttr("shadowEnabled",!1),this},enableDashArray:function(){return this._setAttr("dashArrayEnabled",!0),this},disableDashArray:function(){return this._setAttr("dashArrayEnabled",!1),this},destroy:function(){return Kinetic.Node.prototype.destroy.call(this),delete Kinetic.Global.shapes[this.colorKey],this},drawScene:function(e){e=e||this.getLayer().getCanvas();var t=this.getDrawFunc(),n=e.getContext();return t&&this.isVisible()&&(n.save(),e._applyOpacity(this),e._applyLineJoin(this),e._applyAncestorTransforms(this),t.call(this,e),n.restore()),this},drawHit:function(){var e=this.getAttrs(),t=e.drawHitFunc||e.drawFunc,n=this.getLayer().hitCanvas,r=n.getContext();return t&&this.shouldDrawHit()&&(r.save(),n._applyLineJoin(this),n._applyAncestorTransforms(this),t.call(this,n),r.restore()),this},_setDrawFuncs:function(){!this.attrs.drawFunc&&this.drawFunc&&this.setDrawFunc(this.drawFunc),!this.attrs.drawHitFunc&&this.drawHitFunc&&this.setDrawHitFunc(this.drawHitFunc)}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Node.addColorGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"strokeWidth"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"drawFunc"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"drawHitFunc"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"dashArray"),Kinetic.Node.addColorGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Node.addColorGetterSetter(Kinetic.Shape,"fill"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternX"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternY"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternRepeat"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"dashArrayEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillPatternOffset",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillPatternScale",1),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"shadowOffset",0),Kinetic.Node.addRotationGetterSetter(Kinetic.Shape,"fillPatternRotation",0)}(),function(){function e(e,t){e.content.addEventListener(t,function(n){n.preventDefault(),e[x+t](n)},!1)}var t="Stage",n="string",r="px",i="mouseout",s="mouseleave",o="mouseover",u="mouseenter",a="mousemove",f="mousedown",l="mouseup",c="click",h="dblclick",p="touchstart",d="touchend",v="tap",m="dbltap",g="touchmove",y="div",b="relative",w="inline-block",E="kineticjs-content",S=" ",x="_",T="container",N="",C=[f,a,l,i,p,g,d],k=C.length;Kinetic.Util.addMethods(Kinetic.Stage,{_initStage:function(e){this.createAttrs(),Kinetic.Container.call(this,e),this.nodeType=t,this.dblClickWindow=400,this._id=Kinetic.Global.idCounter++,this._buildDOM(),this._bindContentEvents(),Kinetic.Global.stages.push(this)},setContainer:function(e){return typeof e===n&&(e=document.getElementById(e)),this._setAttr(T,e),this},draw:function(){var e,t,n=this.getChildren(),r=n.length;for(e=0;r>e;e++)t=n[e],t.getClearBeforeDraw()&&(t.getCanvas().clear(),t.getHitCanvas().clear());return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(e){return Kinetic.Node.prototype.setHeight.call(this,e),this._resizeDOM(),this},setWidth:function(e){return Kinetic.Node.prototype.setWidth.call(this,e),this._resizeDOM(),this},clear:function(){var e,t=this.children,n=t.length;for(e=0;n>e;e++)t[e].clear();return this},destroy:function(){var e=this.content;Kinetic.Container.prototype.destroy.call(this),e&&Kinetic.Util._isInDocument(e)&&this.getContainer().removeChild(e)},getMousePosition:function(){return this.mousePos},getTouchPosition:function(){return this.touchPos},getPointerPosition:function(){return this.getTouchPosition()||this.getMousePosition()},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(e){function t(i){var s=a[i],f=s.toDataURL(),l=new Image;l.onload=function(){u.drawImage(l,0,0),i<a.length-1?t(i+1):e.callback(o.toDataURL(n,r))},l.src=f}e=e||{};var n=e.mimeType||null,r=e.quality||null,i=e.x||0,s=e.y||0,o=new Kinetic.SceneCanvas({width:e.width||this.getWidth(),height:e.height||this.getHeight(),pixelRatio:1}),u=o.getContext(),a=this.children;(i||s)&&u.translate(-1*i,-1*s),t(0)},toImage:function(e){var t=e.callback;e.callback=function(e){Kinetic.Util._getImage(e,function(e){t(e)})},this.toDataURL(e)},getIntersection:function(){var e,t,n=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),r=this.getChildren(),i=r.length,s=i-1;for(e=s;e>=0;e--)if(t=r[e].getIntersection(n))return t;return null},_resizeDOM:function(){if(this.content){var e,t=this.getWidth(),n=this.getHeight(),i=this.getChildren(),s=i.length;for(this.content.style.width=t+r,this.content.style.height=n+r,this.bufferCanvas.setSize(t,n,1),this.hitCanvas.setSize(t,n),e=0;s>e;e++)layer=i[e],layer.getCanvas().setSize(t,n),layer.hitCanvas.setSize(t,n),layer.draw()}},add:function(e){return Kinetic.Container.prototype.add.call(this,e),e.canvas.setSize(this.attrs.width,this.attrs.height),e.hitCanvas.setSize(this.attrs.width,this.attrs.height),e.draw(),this.content.appendChild(e.canvas.element),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_setPointerPosition:function(e){e||(e=window.event),this._setMousePosition(e),this._setTouchPosition(e)},_bindContentEvents:function(){var t;for(t=0;k>t;t++)e(this,C[t])},_mouseout:function(e){this._setPointerPosition(e);var t=Kinetic.Global,n=this.targetShape;n&&!t.isDragging()&&(n._fireAndBubble(i,e),n._fireAndBubble(s,e),this.targetShape=null),this.mousePos=void 0},_mousemove:function(e){this._setPointerPosition(e);var t,n=Kinetic.Global,r=Kinetic.DD,f=this.getIntersection(this.getPointerPosition());f?(t=f.shape,t&&(n.isDragging()||255!==f.pixel[3]||this.targetShape&&this.targetShape._id===t._id?t._fireAndBubble(a,e):(this.targetShape&&(this.targetShape._fireAndBubble(i,e,t),this.targetShape._fireAndBubble(s,e,t)),t._fireAndBubble(o,e,this.targetShape),t._fireAndBubble(u,e,this.targetShape),this.targetShape=t))):this.targetShape&&!n.isDragging()&&(this.targetShape._fireAndBubble(i,e),this.targetShape._fireAndBubble(s,e),this.targetShape=null),r&&r._drag(e)},_mousedown:function(e){this._setPointerPosition(e);var t,n=Kinetic.Global,r=this.getIntersection(this.getPointerPosition());r&&r.shape&&(t=r.shape,this.clickStart=!0,this.clickStartShape=t,t._fireAndBubble(f,e)),this.isDraggable()&&!n.isDragReady()&&this.startDrag(e)},_mouseup:function(e){this._setPointerPosition(e);var t,n=this,r=Kinetic.Global,i=this.getIntersection(this.getPointerPosition());i&&i.shape&&(t=i.shape,t._fireAndBubble(l,e),this.clickStart&&(r.isDragging()||t._id!==this.clickStartShape._id||(t._fireAndBubble(c,e),this.inDoubleClickWindow&&t._fireAndBubble(h,e),this.inDoubleClickWindow=!0,setTimeout(function(){n.inDoubleClickWindow=!1},this.dblClickWindow)))),this.clickStart=!1},_touchstart:function(e){this._setPointerPosition(e);var t,n=Kinetic.Global,r=this.getIntersection(this.getPointerPosition());r&&r.shape&&(t=r.shape,this.tapStart=!0,this.tapStartShape=t,t._fireAndBubble(p,e)),this.isDraggable()&&!n.isDragReady()&&this.startDrag(e)},_touchend:function(e){this._setPointerPosition(e);var t,n=this,r=Kinetic.Global,i=this.getIntersection(this.getPointerPosition());i&&i.shape&&(t=i.shape,t._fireAndBubble(d,e),this.tapStart&&(r.isDragging()||t._id!==this.tapStartShape._id||(t._fireAndBubble(v,e),this.inDoubleClickWindow&&t._fireAndBubble(m,e),this.inDoubleClickWindow=!0,setTimeout(function(){n.inDoubleClickWindow=!1},this.dblClickWindow)))),this.tapStart=!1},_touchmove:function(e){this._setPointerPosition(e);var t,n=Kinetic.DD,r=this.getIntersection(this.getPointerPosition());r&&r.shape&&(t=r.shape,t._fireAndBubble(g,e)),n&&n._drag(e)},_setMousePosition:function(e){var t=e.clientX-this._getContentPosition().left,n=e.clientY-this._getContentPosition().top;this.mousePos={x:t,y:n}},_setTouchPosition:function(e){var t,n,r;void 0!==e.touches&&1===e.touches.length&&(t=e.touches[0],n=t.clientX-this._getContentPosition().left,r=t.clientY-this._getContentPosition().top,this.touchPos={x:n,y:r})},_getContentPosition:function(){var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left}},_buildDOM:function(){var e=this.getContainer();e.innerHTML=N,this.content=document.createElement(y),this.content.style.position=b,this.content.style.display=w,this.content.className=E,e.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(e,t){var n,r,i=e.split(S),s=i.length;for(n=0;s>n;n++)r=i[n],this.content.addEventListener(r,t,!1)}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Node.addGetter(Kinetic.Stage,"container")}(),function(){var e="#";Kinetic.Util.addMethods(Kinetic.Layer,{_initLayer:function(e){this.nodeType="Layer",this.createAttrs(),this.canvas=new Kinetic.SceneCanvas,this.canvas.getElement().style.position="absolute",this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,e)},getIntersection:function(){var t,n,r,i=Kinetic.Util._getXY(Array.prototype.slice.call(arguments));if(this.isVisible()&&this.isListening()){if(t=this.hitCanvas.context.getImageData(0|i.x,0|i.y,1,1).data,255===t[3])return n=Kinetic.Util._rgbToHex(t[0],t[1],t[2]),r=Kinetic.Global.shapes[e+n],{shape:r,pixel:t};if(t[0]>0||t[1]>0||t[2]>0||t[3]>0)return{pixel:t}}return null},drawScene:function(e){return e=e||this.getCanvas(),this.getClearBeforeDraw()&&e.clear(),Kinetic.Container.prototype.drawScene.call(this,e),this},drawHit:function(){var e=this.getLayer();return e&&e.getClearBeforeDraw()&&e.getHitCanvas().clear(),Kinetic.Container.prototype.drawHit.call(this),this},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(){return this.getCanvas().clear(),this},setVisible:function(e){return Kinetic.Node.prototype.setVisible.call(this,e),e?(this.getCanvas().element.style.display="block",this.hitCanvas.element.style.display="block"):(this.getCanvas().element.style.display="none",this.hitCanvas.element.style.display="none"),this},setZIndex:function(e){Kinetic.Node.prototype.setZIndex.call(this,e);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas().element),e<t.getChildren().length-1?t.content.insertBefore(this.getCanvas().element,t.getChildren()[e+1].getCanvas().element):t.content.appendChild(this.getCanvas().element)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var e=this.getStage();e&&(e.content.removeChild(this.getCanvas().element),e.content.appendChild(this.getCanvas().element))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var e=this.getStage();e&&(e.content.removeChild(this.getCanvas().element),this.index<e.getChildren().length-1?e.content.insertBefore(this.getCanvas().element,e.getChildren()[this.index+1].getCanvas().element):e.content.appendChild(this.getCanvas().element))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas().element),e.content.insertBefore(this.getCanvas().element,t[this.index+1].getCanvas().element)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas().element),e.content.insertBefore(this.getCanvas().element,t[1].getCanvas().element)}}},getLayer:function(){return this},remove:function(){var e=this.getStage(),t=this.getCanvas(),n=t.element;return Kinetic.Node.prototype.remove.call(this),e&&t&&Kinetic.Util._isInDocument(n)&&e.content.removeChild(n),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Node.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{_initGroup:function(e){this.nodeType="Group",this.createAttrs(),Kinetic.Container.call(this,e)}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container)}(),function(){Kinetic.Rect=function(e){this._initRect(e)},Kinetic.Rect.prototype={_initRect:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Rect",this._setDrawFuncs()},drawFunc:function(e){var t=e.getContext(),n=this.getCornerRadius(),r=this.getWidth(),i=this.getHeight();t.beginPath(),n?(t.moveTo(n,0),t.lineTo(r-n,0),t.arc(r-n,n,n,3*Math.PI/2,0,!1),t.lineTo(r,i-n),t.arc(r-n,i-n,n,0,Math.PI/2,!1),t.lineTo(n,i),t.arc(n,i-n,n,Math.PI/2,Math.PI,!1),t.lineTo(0,n),t.arc(n,n,n,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,r,i),t.closePath(),e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Rect,"cornerRadius",0)}(),function(){var e=2*Math.PI-1e-4,t="Circle";Kinetic.Circle=function(e){this._initCircle(e)},Kinetic.Circle.prototype={_initCircle:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className=t,this._setDrawFuncs()},drawFunc:function(t){var n=t.getContext();n.beginPath(),n.arc(0,0,this.getRadius(),0,e,!1),n.closePath(),t.fillStroke(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius(e/2)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius(e/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Circle,"radius",0)}(),function(){var e=2*Math.PI-1e-4,t="Ellipse";Kinetic.Ellipse=function(e){this._initEllipse(e)},Kinetic.Ellipse.prototype={_initEllipse:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className=t,this._setDrawFuncs()},drawFunc:function(t){var n=t.getContext(),r=this.getRadius();n.beginPath(),n.save(),r.x!==r.y&&n.scale(1,r.y/r.x),n.arc(0,0,r.x,0,e,!1),n.restore(),n.closePath(),t.fillStroke(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius({x:e/2})},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius({y:e/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Node.addPointGetterSetter(Kinetic.Ellipse,"radius",0)}(),function(){Kinetic.Wedge=function(e){this._initWedge(e)},Kinetic.Wedge.prototype={_initWedge:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Wedge",this._setDrawFuncs()},drawFunc:function(e){var t=e.getContext();t.beginPath(),t.arc(0,0,this.getRadius(),0,this.getAngle(),this.getClockwise()),t.lineTo(0,0),t.closePath(),e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Node.addRotationGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Node.addGetterSetter(Kinetic.Wedge,"clockwise",!1)}(),function(){var e="Image",t="crop",n="set";Kinetic.Image=function(e){this._initImage(e)},Kinetic.Image.prototype={_initImage:function(t){Kinetic.Shape.call(this,t),this.className=e,this._setDrawFuncs()},drawFunc:function(e){var t,n,r,i,s,o,u=this.getWidth(),a=this.getHeight(),f=this,l=e.getContext(),c=this.getCrop();this.getFilter()&&this._applyFilter&&(this.applyFilter(),this._applyFilter=!1),o=this.filterCanvas?this.filterCanvas.getElement():this.getImage(),l.beginPath(),l.rect(0,0,u,a),l.closePath(),e.fillStroke(this),o&&(c?(n=c.x||0,r=c.y||0,i=c.width||0,s=c.height||0,t=[o,n,r,i,s,0,0,u,a]):t=[o,0,0,u,a],this.hasShadow()?e.applyShadow(this,function(){f._drawImage(l,t)}):this._drawImage(l,t))},drawHitFunc:function(e){var t=this.getWidth(),n=this.getHeight(),r=this.imageHitRegion,i=e.getContext();r?(i.drawImage(r,0,0,t,n),i.beginPath(),i.rect(0,0,t,n),i.closePath(),e.stroke(this)):(i.beginPath(),i.rect(0,0,t,n),i.closePath(),e.fillStroke(this))},applyFilter:function(){var e,t,n,r=this.getImage(),i=this.getWidth(),s=this.getHeight(),o=this.getFilter();e=this.filterCanvas?this.filterCanvas:this.filterCanvas=new Kinetic.SceneCanvas({width:i,height:s}),t=e.getContext();try{this._drawImage(t,[r,0,0,i,s]),n=t.getImageData(0,0,e.getWidth(),e.getHeight()),o.call(this,n),t.putImageData(n,0,0)}catch(u){this.clearFilter(),Kinetic.Util.warn("Unable to apply filter. "+u.message)}},clearFilter:function(){this.filterCanvas=null,this._applyFilter=!1},setCrop:function(){var e=[].slice.call(arguments),n=Kinetic.Util._getXY(e),r=Kinetic.Util._getSize(e),i=Kinetic.Util._merge(n,r);this._setAttr(t,Kinetic.Util._merge(i,this.getCrop()))},createImageHitRegion:function(e){var t,n,r,i,s,o=this,u=this.getWidth(),a=this.getHeight(),f=new Kinetic.Canvas({width:u,height:a}),l=f.getContext(),c=this.getImage();l.drawImage(c,0,0);try{for(t=l.getImageData(0,0,u,a),n=t.data,r=Kinetic.Util._hexToRgb(this.colorKey),i=0,s=n.length;s>i;i+=4)n[i+3]>0&&(n[i]=r.r,n[i+1]=r.g,n[i+2]=r.b);Kinetic.Util._getImage(t,function(t){o.imageHitRegion=t,e&&e()})}catch(h){Kinetic.Util.warn("Unable to create image hit region. "+h.message)}},clearImageHitRegion:function(){delete this.imageHitRegion},getWidth:function(){var e=this.getImage();return this.attrs.width||(e?e.width:0)},getHeight:function(){var e=this.getImage();return this.attrs.height||(e?e.height:0)},_drawImage:function(e,t){5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Node.addFilterGetterSetter=function(e,t,n){this.addGetter(e,t,n),this.addFilterSetter(e,t)},Kinetic.Node.addFilterSetter=function(e,t){var r=n+Kinetic.Util._capitalize(t);e.prototype[r]=function(e){this._setAttr(t,e),this._applyFilter=!0}},Kinetic.Node.addGetterSetter(Kinetic.Image,"image"),Kinetic.Node.addGetter(Kinetic.Image,"crop"),Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filter")}(),function(){Kinetic.Polygon=function(e){this._initPolygon(e)},Kinetic.Polygon.prototype={_initPolygon:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Polygon",this._setDrawFuncs()},drawFunc:function(e){var t=e.getContext(),n=this.getPoints(),r=n.length;t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;r>i;i++)t.lineTo(n[i].x,n[i].y);t.closePath(),e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Polygon,Kinetic.Shape),Kinetic.Node.addPointsGetterSetter(Kinetic.Polygon,"points")}(),function(){function e(e){e.fillText(this.partialText,0,0)}function t(e){e.strokeText(this.partialText,0,0)}var n="auto",r="Calibri",i="canvas",s="center",o="Change.kinetic",u="2d",a="-",f="",l="left",c="text",h="Text",p="middle",d="normal",v="px ",m=" ",g="right",y="word",b="char",w="none",E=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],S=E.length,x=document.createElement(i).getContext(u);Kinetic.Text=function(e){this._initText(e)},Kinetic.Text.prototype={_initText:function(r){var i=this;this.createAttrs(),this.attrs.width=n,this.attrs.height=n,Kinetic.Shape.call(this,r),this._fillFunc=e,this._strokeFunc=t,this.className=h,this._setDrawFuncs();for(var s=0;S>s;s++)this.on(E[s]+o,i._setTextData);this._setTextData()},drawFunc:function(e){var t=e.getContext(),n=this.getPadding(),r=(this.getFontStyle(),this.getFontSize(),this.getFontFamily(),this.getTextHeight()),i=this.getLineHeight()*r,o=this.textArr,u=o.length,a=this.getWidth();t.font=this._getContextFont(),t.textBaseline=p,t.textAlign=l,t.save(),t.translate(n,0),t.translate(0,n+r/2);for(var f=0;u>f;f++){var c=o[f],h=c.text,d=c.width;t.save(),this.getAlign()===g?t.translate(a-d-2*n,0):this.getAlign()===s&&t.translate((a-d-2*n)/2,0),this.partialText=h,e.fillStroke(this),t.restore(),t.translate(0,i)}t.restore()},drawHitFunc:function(e){var t=e.getContext(),n=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,n,r),t.closePath(),e.fillStroke(this)},setText:function(e){var t=Kinetic.Util._isString(e)?e:e.toString();this._setAttr(c,t)},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var t,n=x,r=this.getFontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:parseInt(r,10)}},_getContextFont:function(){return this.getFontStyle()+m+this.getFontSize()+v+this.getFontFamily()},_addTextLine:function(e,t){return this.textArr.push({text:e,width:t})},_getTextWidth:function(e){return x.measureText(e).width},_setTextData:function(){var e=this.getText().split("\n"),t=+this.getFontSize(),r=0,i=this.getLineHeight()*t,s=this.attrs.width,o=this.attrs.height,u=s!==n,f=o!==n,l=this.getPadding(),c=s-2*l,h=o-2*l,p=0,d=this.getWrap(),g=d!==w,y=d!==b&&g;this.textArr=[],x.save(),x.font=this.getFontStyle()+m+t+v+this.getFontFamily();for(var E=0,S=e.length;S>E;++E){var T=e[E],N=this._getTextWidth(T);if(u&&N>c)for(;T.length>0;){for(var C=0,k=T.length,L="",A=0;k>C;){var O=C+k>>>1,M=T.slice(0,O+1),_=this._getTextWidth(M);c>=_?(C=O+1,L=M,A=_):k=O}if(!L)break;if(y){var D=Math.max(L.lastIndexOf(m),L.lastIndexOf(a))+1;D>0&&(C=D,L=L.slice(0,C),A=this._getTextWidth(L))}if(this._addTextLine(L,A),p+=i,!g||f&&p+i>h)break;if(T=T.slice(C),T.length>0&&(N=this._getTextWidth(T),c>=N)){this._addTextLine(T,N),p+=i;break}}else this._addTextLine(T,N),p+=i,r=Math.max(r,N);if(f&&p+i>h)break}x.restore(),this.textHeight=t,this.textWidth=r}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Text,"fontFamily",r),Kinetic.Node.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Node.addGetterSetter(Kinetic.Text,"fontStyle",d),Kinetic.Node.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Node.addGetterSetter(Kinetic.Text,"align",l),Kinetic.Node.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Node.addGetterSetter(Kinetic.Text,"wrap",y),Kinetic.Node.addGetter(Kinetic.Text,c,f),Kinetic.Node.addSetter(Kinetic.Text,"width"),Kinetic.Node.addSetter(Kinetic.Text,"height")}(),function(){Kinetic.Line=function(e){this._initLine(e)},Kinetic.Line.prototype={_initLine:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Line",this._setDrawFuncs()},drawFunc:function(e){var t,n,r=this.getPoints(),i=r.length,s=e.getContext();for(s.beginPath(),s.moveTo(r[0].x,r[0].y),t=1;i>t;t++)n=r[t],s.lineTo(n.x,n.y);e.stroke(this)}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Node.addPointsGetterSetter(Kinetic.Line,"points")}(),function(){Kinetic.Spline=function(e){this._initSpline(e)},Kinetic.Spline.prototype={_initSpline:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Spline",this._setDrawFuncs()},drawFunc:function(e){var t,n,r,i,s=this.getPoints(),o=s.length,u=e.getContext(),a=this.getTension();if(u.beginPath(),u.moveTo(s[0].x,s[0].y),0!==a&&o>2){for(t=this.allPoints,n=t.length,r=2,u.quadraticCurveTo(t[0].x,t[0].y,t[1].x,t[1].y);n-1>r;)u.bezierCurveTo(t[r].x,t[r++].y,t[r].x,t[r++].y,t[r].x,t[r++].y);u.quadraticCurveTo(t[n-1].x,t[n-1].y,s[o-1].x,s[o-1].y)}else for(r=1;o>r;r++)i=s[r],u.lineTo(i.x,i.y);e.stroke(this)},setTension:function(e){this._setAttr("tension",e),this._setAllPoints()},setPoints:function(e){Kinetic.Node.setPoints.call(this,e),this._setAllPoints()},_setAllPoints:function(){this.allPoints=Kinetic.Util._expandPoints
(this.getPoints(),this.getTension())}},Kinetic.Util.extend(Kinetic.Spline,Kinetic.Shape),Kinetic.Node.addGetter(Kinetic.Spline,"tension",1),Kinetic.Node.addPointsGetter(Kinetic.Spline,"points")}(),function(){Kinetic.Blob=function(e){this._initBlob(e)},Kinetic.Blob.prototype={_initBlob:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Blob",this._setDrawFuncs()},drawFunc:function(e){var t,n,r,i,s=this.getPoints(),o=s.length,u=e.getContext(),a=this.getTension();if(u.beginPath(),u.moveTo(s[0].x,s[0].y),0!==a&&o>2)for(t=this.allPoints,n=t.length,r=0;n-1>r;)u.bezierCurveTo(t[r].x,t[r++].y,t[r].x,t[r++].y,t[r].x,t[r++].y);else for(r=1;o>r;r++)i=s[r],u.lineTo(i.x,i.y);u.closePath(),e.fillStroke(this)},setTension:function(e){this._setAttr("tension",e),this._setAllPoints()},setPoints:function(e){Kinetic.Node.setPoints.call(this,e),this._setAllPoints()},_setAllPoints:function(){var e=this.getPoints(),t=e.length,n=this.getTension(),r=Kinetic.Util,i=r._getControlPoints(e[t-1],e[0],e[1],n),s=r._getControlPoints(e[t-2],e[t-1],e[0],n);this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension()),this.allPoints.unshift(i[1]),this.allPoints.push(s[0]),this.allPoints.push(e[t-1]),this.allPoints.push(s[1]),this.allPoints.push(i[0]),this.allPoints.push(e[0])}},Kinetic.Util.extend(Kinetic.Blob,Kinetic.Shape),Kinetic.Node.addGetter(Kinetic.Blob,"tension",1),Kinetic.Node.addPointsGetter(Kinetic.Blob,"points")}(),function(){Kinetic.Sprite=function(e){this._initSprite(e)},Kinetic.Sprite.prototype={_initSprite:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Sprite",this._setDrawFuncs(),this.anim=new Kinetic.Animation;var t=this;this.on("animationChange",function(){t.setIndex(0)})},drawFunc:function(e){var t=this.getAnimation(),n=this.getIndex(),r=this.getAnimations()[t][n],i=e.getContext(),s=this.getImage();s&&i.drawImage(s,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},drawHitFunc:function(e){var t=this.getAnimation(),n=this.getIndex(),r=this.getAnimations()[t][n],i=e.getContext();i.beginPath(),i.rect(0,0,r.width,r.height),i.closePath(),e.fill(this)},start:function(){var e=this,t=this.getLayer();this.anim.setLayers(t),this.interval=setInterval(function(){var t=e.getIndex();e._updateIndex(),e.afterFrameFunc&&t===e.afterFrameIndex&&(e.afterFrameFunc(),delete e.afterFrameFunc,delete e.afterFrameIndex)},1e3/this.getFrameRate()),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},afterFrame:function(e,t){this.afterFrameIndex=e,this.afterFrameFunc=t},_updateIndex:function(){var e=this.getIndex(),t=this.getAnimation(),n=this.getAnimations(),r=n[t],i=r.length;i-1>e?this.setIndex(e+1):this.setIndex(0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"index",0),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"frameRate",17)}(),function(){Kinetic.Path=function(e){this._initPath(e)},Kinetic.Path.prototype={_initPath:function(e){this.dataArray=[];var t=this;Kinetic.Shape.call(this,e),this.className="Path",this._setDrawFuncs(),this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange",function(){t.dataArray=Kinetic.Path.parsePathData(this.getData())})},drawFunc:function(e){var t=this.dataArray,n=e.getContext();n.beginPath();for(var r=0;r<t.length;r++){var i=t[r].command,s=t[r].points;switch(i){case"L":n.lineTo(s[0],s[1]);break;case"M":n.moveTo(s[0],s[1]);break;case"C":n.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":n.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var o=s[0],u=s[1],a=s[2],f=s[3],l=s[4],c=s[5],h=s[6],p=s[7],d=a>f?a:f,v=a>f?1:a/f,m=a>f?f/a:1;n.translate(o,u),n.rotate(h),n.scale(v,m),n.arc(0,0,d,l,l+c,1-p),n.scale(1/v,1/m),n.rotate(-h),n.translate(-o,-u);break;case"z":n.closePath()}}e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},Kinetic.Path.getPointOnLine=function(e,t,n,r,i,s,o){void 0===s&&(s=t),void 0===o&&(o=n);var u=(i-n)/(r-t+1e-8),a=Math.sqrt(e*e/(1+u*u));t>r&&(a*=-1);var f,l=u*a;if((o-n)/(s-t+1e-8)===u)f={x:s+a,y:o+l};else{var c,h,p=this.getLineLength(t,n,r,i);if(1e-8>p)return void 0;var d=(s-t)*(r-t)+(o-n)*(i-n);d/=p*p,c=t+d*(r-t),h=n+d*(i-n);var v=this.getLineLength(s,o,c,h),m=Math.sqrt(e*e-v*v);a=Math.sqrt(m*m/(1+u*u)),t>r&&(a*=-1),l=u*a,f={x:c+a,y:h+l}}return f},Kinetic.Path.getPointOnCubicBezier=function(e,t,n,r,i,s,o,u,a){function f(e){return e*e*e}function l(e){return 3*e*e*(1-e)}function c(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}var p=u*f(e)+s*l(e)+r*c(e)+t*h(e),d=a*f(e)+o*l(e)+i*c(e)+n*h(e);return{x:p,y:d}},Kinetic.Path.getPointOnQuadraticBezier=function(e,t,n,r,i,s,o){function u(e){return e*e}function a(e){return 2*e*(1-e)}function f(e){return(1-e)*(1-e)}var l=s*u(e)+r*a(e)+t*f(e),c=o*u(e)+i*a(e)+n*f(e);return{x:l,y:c}},Kinetic.Path.getPointOnEllipticalArc=function(e,t,n,r,i,s){var o=Math.cos(s),u=Math.sin(s),a={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:e+(a.x*o-a.y*u),y:t+(a.x*u+a.y*o)}},Kinetic.Path.parsePathData=function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);for(var i=t.split("|"),s=[],o=0,u=0,r=1;r<i.length;r++){var a=i[r],f=a.charAt(0);a=a.slice(1),a=a.replace(new RegExp(",-","g"),"-"),a=a.replace(new RegExp("-","g"),",-"),a=a.replace(new RegExp("e,-","g"),"e-");var l=a.split(",");l.length>0&&""===l[0]&&l.shift();for(var c=0;c<l.length;c++)l[c]=parseFloat(l[c]);for(;l.length>0&&!isNaN(l[0]);){var h=null,p=[],d=o,v=u;switch(f){case"l":o+=l.shift(),u+=l.shift(),h="L",p.push(o,u);break;case"L":o=l.shift(),u=l.shift(),p.push(o,u);break;case"m":o+=l.shift(),u+=l.shift(),h="M",p.push(o,u),f="l";break;case"M":o=l.shift(),u=l.shift(),h="M",p.push(o,u),f="L";break;case"h":o+=l.shift(),h="L",p.push(o,u);break;case"H":o=l.shift(),h="L",p.push(o,u);break;case"v":u+=l.shift(),h="L",p.push(o,u);break;case"V":u=l.shift(),h="L",p.push(o,u);break;case"C":p.push(l.shift(),l.shift(),l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"c":p.push(o+l.shift(),u+l.shift(),o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"S":var m=o,g=u,y=s[s.length-1];"C"===y.command&&(m=o+(o-y.points[2]),g=u+(u-y.points[3])),p.push(m,g,l.shift(),l.shift()),o=l.shift(),u=l.shift(),h="C",p.push(o,u);break;case"s":var m=o,g=u,y=s[s.length-1];"C"===y.command&&(m=o+(o-y.points[2]),g=u+(u-y.points[3])),p.push(m,g,o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"Q":p.push(l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"q":p.push(o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="Q",p.push(o,u);break;case"T":var m=o,g=u,y=s[s.length-1];"Q"===y.command&&(m=o+(o-y.points[0]),g=u+(u-y.points[1])),o=l.shift(),u=l.shift(),h="Q",p.push(m,g,o,u);break;case"t":var m=o,g=u,y=s[s.length-1];"Q"===y.command&&(m=o+(o-y.points[0]),g=u+(u-y.points[1])),o+=l.shift(),u+=l.shift(),h="Q",p.push(m,g,o,u);break;case"A":var b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u;o=l.shift(),u=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E);break;case"a":var b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u;o+=l.shift(),u+=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E)}s.push({command:h||f,points:p,start:{x:d,y:v},pathLength:this.calcLength(d,v,h||f,p)})}("z"===f||"Z"===f)&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},Kinetic.Path.calcLength=function(e,n,r,i){var s,o,u,a=Kinetic.Path;switch(r){case"L":return a.getLineLength(e,n,i[0],i[1]);case"C":for(s=0,o=a.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),t=.01;1>=t;t+=.01)u=a.getPointOnCubicBezier(t,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return s;case"Q":for(s=0,o=a.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]),t=.01;1>=t;t+=.01)u=a.getPointOnQuadraticBezier(t,e,n,i[0],i[1],i[2],i[3]),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return s;case"A":s=0;var f=i[4],l=i[5],c=i[4]+l,h=Math.PI/180;if(Math.abs(f-c)<h&&(h=Math.abs(f-c)),o=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),0>l)for(t=f-h;t>c;t-=h)u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],t,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;else for(t=f+h;c>t;t+=h)u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],t,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),s+=a.getLineLength(o.x,o.y,u.x,u.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(e,t,n,r,i,s,o,u,a){var f=a*(Math.PI/180),l=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,c=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,h=l*l/(o*o)+c*c/(u*u);h>1&&(o*=Math.sqrt(h),u*=Math.sqrt(h));var p=Math.sqrt((o*o*u*u-o*o*c*c-u*u*l*l)/(o*o*c*c+u*u*l*l));i==s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*c/u,v=p*-u*l/o,m=(e+n)/2+Math.cos(f)*d-Math.sin(f)*v,g=(t+r)/2+Math.sin(f)*d+Math.cos(f)*v,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},E=w([1,0],[(l-d)/o,(c-v)/u]),S=[(l-d)/o,(c-v)/u],x=[(-1*l-d)/o,(-1*c-v)/u],T=w(S,x);return b(S,x)<=-1&&(T=Math.PI),b(S,x)>=1&&(T=0),0===s&&T>0&&(T-=2*Math.PI),1==s&&0>T&&(T+=2*Math.PI),[m,g,o,u,E,T,f,s]},Kinetic.Node.addGetterSetter(Kinetic.Path,"data")}(),function(){function e(e){e.fillText(this.partialText,0,0)}function t(e){e.strokeText(this.partialText,0,0)}var n="",r="Calibri",i="normal";Kinetic.TextPath=function(e){this._initTextPath(e)},Kinetic.TextPath.prototype={_initTextPath:function(n){var r=this;this.createAttrs(),this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,n),this._fillFunc=e,this._strokeFunc=t,this.className="TextPath",this._setDrawFuncs(),this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange",function(){r.dataArray=Kinetic.Path.parsePathData(this.attrs.data)});for(var i=["text","textStroke","textStrokeWidth"],s=0;s<i.length;s++){var o=i[s];this.on(o+"Change",r._setTextData)}r._setTextData()},drawFunc:function(e){var t=(this.charArr,e.getContext());t.font=this._getContextFont(),t.textBaseline="middle",t.textAlign="left",t.save();for(var n=this.glyphInfo,r=0;r<n.length;r++){t.save();var i=n[r].p0;n[r].p1,parseFloat(this.attrs.fontSize),t.translate(i.x,i.y),t.rotate(n[r].rotation),this.partialText=n[r].text,e.fillStroke(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(e){Kinetic.Text.prototype.setText.call(this,e)},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this._getContextFont();var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];for(var n,r,i,s=this.attrs.text.split(""),o=-1,u=0,a=function(){u=0;for(var t=e.dataArray,r=o+1;r<t.length;r++){if(t[r].pathLength>0)return o=r,t[r];"M"==t[r].command&&(n={x:t[r].points[0],y:t[r].points[1]})}return{}},f=function(t){var s=e._getTextSize(t).width,o=0,f=0;for(r=void 0;Math.abs(s-o)/s>.01&&25>f;){f++;for(var l=o;void 0===i;)i=a(),i&&l+i.pathLength<s&&(l+=i.pathLength,i=void 0);if(i==={}||void 0===n)return void 0;var c=!1;switch(i.command){case"L":Kinetic.Path.getLineLength(n.x,n.y,i.points[0],i.points[1])>s?r=Kinetic.Path.getPointOnLine(s,n.x,n.y,i.points[0],i.points[1],n.x,n.y):i=void 0;break;case"A":var h=i.points[4],p=i.points[5],d=i.points[4]+p;0===u?u=h+1e-8:s>o?u+=Math.PI/180*p/Math.abs(p):u-=Math.PI/360*p/Math.abs(p),Math.abs(u)>Math.abs(d)&&(u=d,c=!0),r=Kinetic.Path.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],u,i.points[6]);break;case"C":0===u?u=s>i.pathLength?1e-8:s/i.pathLength:s>o?u+=(s-o)/i.pathLength:u-=(o-s)/i.pathLength,u>1&&(u=1,c=!0),r=Kinetic.Path.getPointOnCubicBezier(u,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3],i.points[4],i.points[5]);break;case"Q":0===u?u=s/i.pathLength:s>o?u+=(s-o)/i.pathLength:u-=(o-s)/i.pathLength,u>1&&(u=1,c=!0),r=Kinetic.Path.getPointOnQuadraticBezier(u,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3])}void 0!==r&&(o=Kinetic.Path.getLineLength(n.x,n.y,r.x,r.y)),c&&(c=!1,i=void 0)}},l=0;l<s.length&&(f(s[l]),void 0!==n&&void 0!==r);l++){var c=Kinetic.Path.getLineLength(n.x,n.y,r.x,r.y),h=0,p=Kinetic.Path.getPointOnLine(h+c/2,n.x,n.y,r.x,r.y),d=Math.atan2(r.y-n.y,r.x-n.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:s[l],rotation:d,p0:n,p1:r}),n=r}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.TextPath,"fontFamily",r),Kinetic.Node.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Node.addGetterSetter(Kinetic.TextPath,"fontStyle",i),Kinetic.Node.addGetter(Kinetic.TextPath,"text",n)}(),function(){Kinetic.RegularPolygon=function(e){this._initRegularPolygon(e)},Kinetic.RegularPolygon.prototype={_initRegularPolygon:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="RegularPolygon",this._setDrawFuncs()},drawFunc:function(e){var t,n,r,i=e.getContext(),s=this.attrs.sides,o=this.attrs.radius;for(i.beginPath(),i.moveTo(0,0-o),t=1;s>t;t++)n=o*Math.sin(2*t*Math.PI/s),r=-1*o*Math.cos(2*t*Math.PI/s),i.lineTo(n,r);i.closePath(),e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Node.addGetterSetter(Kinetic.RegularPolygon,"sides",0)}(),function(){Kinetic.Star=function(e){this._initStar(e)},Kinetic.Star.prototype={_initStar:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Star",this._setDrawFuncs()},drawFunc:function(e){var t=e.getContext(),n=this.attrs.innerRadius,r=this.attrs.outerRadius,i=this.attrs.numPoints;t.beginPath(),t.moveTo(0,0-this.attrs.outerRadius);for(var s=1;2*i>s;s++){var o=0===s%2?r:n,u=o*Math.sin(s*Math.PI/i),a=-1*o*Math.cos(s*Math.PI/i);t.lineTo(u,a)}t.closePath(),e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Star,"numPoints",0),Kinetic.Node.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Node.addGetterSetter(Kinetic.Star,"outerRadius",0)}(),function(){var e=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],t="Change.kinetic",n="none",r="up",i="right",s="down",o="left",u="Label",a=e.length;Kinetic.Label=function(e){this._initLabel(e)},Kinetic.Label.prototype={_initLabel:function(e){var t=this;this.createAttrs(),this.className=u,Kinetic.Group.call(this,e),this.on("add",function(e){t._addListeners(e.child),t._sync()})},getText:function(){return this.get("Text")[0]},getTag:function(){return this.get("Tag")[0]},_addListeners:function(n){var r,i=this;for(r=0;a>r;r++)n.on(e[r]+t,function(){i._sync()})},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var e,t,n,u,a,l,c=this.getText(),h=this.getTag();if(c&&h){switch(e=c.getWidth(),t=c.getHeight(),n=h.getPointerDirection(),u=h.getPointerWidth(),pointerHeight=h.getPointerHeight(),a=0,l=0,n){case r:a=e/2,l=-1*pointerHeight;break;case i:a=e+u,l=t/2;break;case s:a=e/2,l=t+pointerHeight;break;case o:a=-1*u,l=t/2}h.setAttrs({x:-1*a,y:-1*l,width:e,height:t}),c.setAttrs({x:-1*a,y:-1*l})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Tag=function(e){this._initTag(e)},Kinetic.Tag.prototype={_initTag:function(e){this.createAttrs(),Kinetic.Shape.call(this,e),this.className="Tag",this._setDrawFuncs()},drawFunc:function(e){var t=e.getContext(),n=this.getWidth(),u=this.getHeight(),a=this.getPointerDirection(),l=this.getPointerWidth(),c=this.getPointerHeight();this.getCornerRadius(),t.beginPath(),t.moveTo(0,0),a===r&&(t.lineTo((n-l)/2,0),t.lineTo(n/2,-1*c),t.lineTo((n+l)/2,0)),t.lineTo(n,0),a===i&&(t.lineTo(n,(u-c)/2),t.lineTo(n+l,u/2),t.lineTo(n,(u+c)/2)),t.lineTo(n,u),a===s&&(t.lineTo((n+l)/2,u),t.lineTo(n/2,u+c),t.lineTo((n-l)/2,u)),t.lineTo(0,u),a===o&&(t.lineTo(0,(u+c)/2),t.lineTo(-1*l,u/2),t.lineTo(0,(u-c)/2)),t.closePath(),e.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Node.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Node.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Node.addGetterSetter(Kinetic.Tag,"cornerRadius",0)}(),function(){Kinetic.Filters.Grayscale=function(e){for(var t=e.data,n=0;n<t.length;n+=4){var r=.34*t[n]+.5*t[n+1]+.16*t[n+2];t[n]=r,t[n+1]=r,t[n+2]=r}}}(),function(){Kinetic.Filters.Brighten=function(e){for(var t=this.getFilterBrightness(),n=e.data,r=0;r<n.length;r+=4)n[r]+=t,n[r+1]+=t,n[r+2]+=t},Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filterBrightness",0)}(),function(){Kinetic.Filters.Invert=function(e){for(var t=e.data,n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]}}(),function(){function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function t(t,i){var s,o,u,f,l,h,p,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_=t.data,D=t.width,P=t.height,H=i+i+1,B=D-1,j=P-1,F=i+1,I=F*(F+1)/2,q=new e,R=q,U=null,z=null,W=n[i],X=r[i];for(u=1;H>u;u++)if(R=R.next=new e,u==F)var V=R;for(R.next=q,p=h=0,o=0;P>o;o++){for(x=T=N=C=v=m=g=y=0,b=F*(k=_[h]),w=F*(L=_[h+1]),E=F*(A=_[h+2]),S=F*(O=_[h+3]),v+=I*k,m+=I*L,g+=I*A,y+=I*O,R=q,u=0;F>u;u++)R.r=k,R.g=L,R.b=A,R.a=O,R=R.next;for(u=1;F>u;u++)f=h+((u>B?B:u)<<2),v+=(R.r=k=_[f])*(M=F-u),m+=(R.g=L=_[f+1])*M,g+=(R.b=A=_[f+2])*M,y+=(R.a=O=_[f+3])*M,x+=k,T+=L,N+=A,C+=O,R=R.next;for(U=q,z=V,s=0;D>s;s++)_[h+3]=O=y*W>>X,0!=O?(O=255/O,_[h]=(v*W>>X)*O,_[h+1]=(m*W>>X)*O,_[h+2]=(g*W>>X)*O):_[h]=_[h+1]=_[h+2]=0,v-=b,m-=w,g-=E,y-=S,b-=U.r,w-=U.g,E-=U.b,S-=U.a,f=p+((f=s+i+1)<B?f:B)<<2,x+=U.r=_[f],T+=U.g=_[f+1],N+=U.b=_[f+2],C+=U.a=_[f+3],v+=x,m+=T,g+=N,y+=C,U=U.next,b+=k=z.r,w+=L=z.g,E+=A=z.b,S+=O=z.a,x-=k,T-=L,N-=A,C-=O,z=z.next,h+=4;p+=D}for(s=0;D>s;s++){for(T=N=C=x=m=g=y=v=0,h=s<<2,b=F*(k=_[h]),w=F*(L=_[h+1]),E=F*(A=_[h+2]),S=F*(O=_[h+3]),v+=I*k,m+=I*L,g+=I*A,y+=I*O,R=q,u=0;F>u;u++)R.r=k,R.g=L,R.b=A,R.a=O,R=R.next;for(l=D,u=1;i>=u;u++)h=l+s<<2,v+=(R.r=k=_[h])*(M=F-u),m+=(R.g=L=_[h+1])*M,g+=(R.b=A=_[h+2])*M,y+=(R.a=O=_[h+3])*M,x+=k,T+=L,N+=A,C+=O,R=R.next,j>u&&(l+=D);for(h=s,U=q,z=V,o=0;P>o;o++)f=h<<2,_[f+3]=O=y*W>>X,O>0?(O=255/O,_[f]=(v*W>>X)*O,_[f+1]=(m*W>>X)*O,_[f+2]=(g*W>>X)*O):_[f]=_[f+1]=_[f+2]=0,v-=b,m-=w,g-=E,y-=S,b-=U.r,w-=U.g,E-=U.b,S-=U.a,f=s+((f=o+F)<j?f:j)*D<<2,v+=x+=U.r=_[f],m+=T+=U.g=_[f+1],g+=N+=U.b=_[f+2],y+=C+=U.a=_[f+3],U=U.next,b+=k=z.r,w+=L=z.g,E+=A=z.b,S+=O=z.a,x-=k,T-=L,N-=A,C-=O,z=z.next,h+=D}}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(e){var n=0|this.getFilterRadius();n>0&&t(e,n)},Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filterRadius",0)}(),function(){function e(e,t,n){var r=4*(n*e.width+t),i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function t(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function n(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function r(r,i){var s=e(r,0,0),o=e(r,r.width-1,0),u=e(r,0,r.height-1),f=e(r,r.width-1,r.height-1),l=i||10;if(t(s,o)<l&&t(o,f)<l&&t(f,u)<l&&t(u,s)<l){for(var h=n([o,s,f,u]),p=[],d=0;d<r.width*r.height;d++){var v=t(h,[r.data[4*d],r.data[4*d+1],r.data[4*d+2]]);p[d]=l>v?0:255}return p}}function i(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function s(e,t,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],u=0;n>u;u++)for(var a=0;t>a;a++){for(var f=u*t+a,l=0,c=0;i>c;c++)for(var h=0;i>h;h++){var p=u+c-s,d=a+h-s;if(p>=0&&n>p&&d>=0&&t>d){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=2040===l?255:0}return o}function o(e,t,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],u=0;n>u;u++)for(var a=0;t>a;a++){for(var f=u*t+a,l=0,c=0;i>c;c++)for(var h=0;i>h;h++){var p=u+c-s,d=a+h-s;if(p>=0&&n>p&&d>=0&&t>d){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l>=1020?255:0}return o}function u(e,t,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],u=0;n>u;u++)for(var a=0;t>a;a++){for(var f=u*t+a,l=0,c=0;i>c;c++)for(var h=0;i>h;h++){var p=u+c-s,d=a+h-s;if(p>=0&&n>p&&d>=0&&t>d){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l}return o}Kinetic.Filters.Mask=function(e){var t=this.getFilterThreshold(),n=r(e,t);return n&&(n=s(n,e.width,e.height),n=o(n,e.width,e.height),n=u(n,e.width,e.height),i(e,n)),e},Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filterThreshold",0)}(),function(e){var t="/js/recorderWorker.js",n=function(e,n){var r=n||{},i=r.bufferLen||4096;this.context=e.context,this.node=this.context.createJavaScriptNode(i,2,2);var s=new Worker(r.workerPath||t);s.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}});var o=!1,u;this.node.onaudioprocess=function(e){if(!o)return;s.postMessage({command:"record",buffer:[e.inputBuffer.getChannelData(0),e.inputBuffer.getChannelData(1)]})},this.configure=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},this.record=function(){o=!0},this.stop=function(){o=!1},this.clear=function(){s.postMessage({command:"clear"})},this.getBuffer=function(e){u=e||r.callback,s.postMessage({command:"getBuffer"})},this.exportWAV=function(e,t){u=e||r.callback,t=t||r.type||"audio/wav";if(!u)throw new Error("Callback not set");s.postMessage({command:"exportWAV",type:t})},s.onmessage=function(e){var t=e.data;u(t)},e.connect(this.node),this.node.connect(this.context.destination)};n.forceDownload=function(t,n){var r=(e.URL||e.webkitURL).createObjectURL(t),i=e.document.createElement("a");i.href=r,i.download=n||"output.wav";var s=document.createEvent("Event");s.initEvent("click",!0,!0),i.dispatchEvent(s)},e.Recorder=n}(window);var jscolor={dir:"/images/",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var e=jscolor.detectDir();jscolor.dir=e!==!1?e:"jscolor/"}return jscolor.dir},detectDir:function(){var e=location.href,t=document.getElementsByTagName("base");for(var n=0;n<t.length;n+=1)t[n].href&&(e=t[n].href);var t=document.getElementsByTagName("script");for(var n=0;n<t.length;n+=1)if(t[n].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[n].src)){var r=new jscolor.URI(t[n].src),i=r.toAbsolute(e);return i.path=i.path.replace(/[^\/]+$/,""),i.query=null,i.fragment=null,i.toString()}return!1},bind:function(){var e=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),t=document.getElementsByTagName("input");for(var n=0;n<t.length;n+=1){var r;if(!t[n].color&&t[n].className&&(r=t[n].className.match(e))){var i={};if(r[3])try{i=(new Function("return ("+r[3]+")"))()}catch(s){}t[n].color=new jscolor.color(t[n],i)}}},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return typeof e=="string"?document.getElementById(e):e},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},fireEvent:function(e,t){if(!e)return;if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}else if(document.createEventObject){var n=document.createEventObject();e.fireEvent("on"+t,n)}else e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,n=e,r=0,i=0;if(t.offsetParent)do r+=t.offsetLeft,i+=t.offsetTop;while(t=t.offsetParent);while((n=n.parentNode)&&n.nodeName.toUpperCase()!=="BODY")r-=n.scrollLeft,i-=n.scrollTop;return[r,i]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,n=0;return e||(e=window.event),typeof e.offsetX=="number"?(t=e.offsetX,n=e.offsetY):typeof e.layerX=="number"&&(t=e.layerX,n=e.layerY),{x:t,y:n}},getViewPos:function(){return typeof window.pageYOffset=="number"?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return typeof window.innerWidth=="number"?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){var t="";while(e)if(e.substr(0,3)==="../"||e.substr(0,2)==="./")e=e.replace(/^\.+/,"").substr(1);else if(e.substr(0,3)==="/./"||e==="/.")e="/"+e.substr(3);else if(e.substr(0,4)==="/../"||e==="/..")e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if(e==="."||e==="..")e="";else{var n=e.match(/^\/?[^\/]*/)[0];e=e.substr(n.length),t+=n}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return this.scheme!==null&&(e=e+this.scheme+":"),this.authority!==null&&(e=e+"//"+this.authority),this.path!==null&&(e+=this.path),this.query!==null&&(e=e+"?"+this.query),this.fragment!==null&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){var e=new jscolor.URI(e),n=this,r=new jscolor.URI;return e.scheme===null?!1:(n.scheme!==null&&n.scheme.toLowerCase()===e.scheme.toLowerCase()&&(n.scheme=null),n.scheme!==null?(r.scheme=n.scheme,r.authority=n.authority,r.path=t(n.path),r.query=n.query):(n.authority!==null?(r.authority=n.authority,r.path=t(n.path),r.query=n.query):(n.path===""?(r.path=e.path,n.query!==null?r.query=n.query:r.query=e.query):(n.path.substr(0,1)==="/"?r.path=t(n.path):(e.authority!==null&&e.path===""?r.path="/"+n.path:r.path=e.path.replace(/[^\/]+$/,"")+n.path,r.path=t(r.path)),r.query=n.query),r.authority=e.authority),r.scheme=e.scheme),r.fragment=n.fragment,r)},e&&this.parse(e)},color:function(e,t){function r(e,t,n){var r=Math.min(Math.min(e,t),n),i=Math.max(Math.max(e,t),n),s=i-r;if(s===0)return[null,0,i];var o=e===r?3+(n-t)/s:t===r?5+(e-n)/s:1+(t-e)/s;return[o===6?0:o,s/i,i]}function i(e,t,n){if(e===null)return[n,n,n];var r=Math.floor(e),i=r%2?e-r:1-(e-r),s=n*(1-t),o=n*(1-t*i);switch(r){case 6:case 0:return[n,o,s];case 1:return[o,n,s];case 2:return[s,n,o];case 3:return[s,o,n];case 4:return[o,s,n];case 5:return[n,s,o]}}function s(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function o(t,n){function h(){var e=m.pickerInsetColor.split(/\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];o.btn.style.borderColor=t}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(m.pickerCloseText)};for(var r=0,i=4;r<jscolor.images.sld[1];r+=i){var s=document.createElement("div");s.style.height=i+"px",s.style.fontSize="1px",s.style.lineHeight="0",jscolor.picker.sld.appendChild(s)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var o=jscolor.picker;o.box.onmouseup=o.box.onmouseout=function(){e.focus()},o.box.onmousedown=function(){y=!0},o.box.onmousemove=function(e){if(E||S)E&&p(e),S&&d(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),v()},"ontouchstart"in window&&o.box.addEventListener("touchmove",function(e){var t={offsetX:e.touches[0].pageX-x.X,offsetY:e.touches[0].pageY-x.Y};if(E||S)E&&p(t),S&&d(t),v();e.stopPropagation(),e.preventDefault()},!1),o.padM.onmouseup=o.padM.onmouseout=function(){E&&(E=!1,jscolor.fireEvent(b,"change"))},o.padM.onmousedown=function(e){switch(g){case 0:m.hsv[2]===0&&m.fromHSV(null,null,1);break;case 1:m.hsv[1]===0&&m.fromHSV(null,1,null)}S=!1,E=!0,p(e),v()},"ontouchstart"in window&&o.padM.addEventListener("touchstart",function(e){x={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-x.X,offsetY:e.touches[0].pageY-x.Y})}),o.sldM.onmouseup=o.sldM.onmouseout=function(){S&&(S=!1,jscolor.fireEvent(b,"change"))},o.sldM.onmousedown=function(e){E=!1,S=!0,d(e),v()},"ontouchstart"in window&&o.sldM.addEventListener("touchstart",function(e){x={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-x.X,offsetY:e.touches[0].pageY-x.Y})});var l=u(m);o.box.style.width=l[0]+"px",o.box.style.height=l[1]+"px",o.boxB.style.position="absolute",o.boxB.style.clear="both",o.boxB.style.left=t+"px",o.boxB.style.top=n+"px",o.boxB.style.zIndex=m.pickerZIndex,o.boxB.style.border=m.pickerBorder+"px solid",o.boxB.style.borderColor=m.pickerBorderColor,o.boxB.style.background=m.pickerFaceColor,o.pad.style.width=jscolor.images.pad[0]+"px",o.pad.style.height=jscolor.images.pad[1]+"px",o.padB.style.position="absolute",o.padB
.style.left=m.pickerFace+"px",o.padB.style.top=m.pickerFace+"px",o.padB.style.border=m.pickerInset+"px solid",o.padB.style.borderColor=m.pickerInsetColor,o.padM.style.position="absolute",o.padM.style.left="0",o.padM.style.top="0",o.padM.style.width=m.pickerFace+2*m.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",o.padM.style.height=o.box.style.height,o.padM.style.cursor="crosshair",o.sld.style.overflow="hidden",o.sld.style.width=jscolor.images.sld[0]+"px",o.sld.style.height=jscolor.images.sld[1]+"px",o.sldB.style.display=m.slider?"block":"none",o.sldB.style.position="absolute",o.sldB.style.right=m.pickerFace+"px",o.sldB.style.top=m.pickerFace+"px",o.sldB.style.border=m.pickerInset+"px solid",o.sldB.style.borderColor=m.pickerInsetColor,o.sldM.style.display=m.slider?"block":"none",o.sldM.style.position="absolute",o.sldM.style.right="0",o.sldM.style.top="0",o.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+m.pickerFace+2*m.pickerInset+"px",o.sldM.style.height=o.box.style.height;try{o.sldM.style.cursor="pointer"}catch(c){o.sldM.style.cursor="hand"}o.btn.style.display=m.pickerClosable?"block":"none",o.btn.style.position="absolute",o.btn.style.left=m.pickerFace+"px",o.btn.style.bottom=m.pickerFace+"px",o.btn.style.padding="0 15px",o.btn.style.height="18px",o.btn.style.border=m.pickerInset+"px solid",h(),o.btn.style.color=m.pickerButtonColor,o.btn.style.font="12px sans-serif",o.btn.style.textAlign="center";try{o.btn.style.cursor="pointer"}catch(c){o.btn.style.cursor="hand"}o.btn.onmousedown=function(){m.hidePicker()},o.btnS.style.lineHeight=o.btn.style.height;switch(g){case 0:var w="hs.png";break;case 1:var w="hv.png"}o.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",o.padM.style.backgroundRepeat="no-repeat",o.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",o.sldM.style.backgroundRepeat="no-repeat",o.pad.style.backgroundImage="url('"+jscolor.getDir()+w+"')",o.pad.style.backgroundRepeat="no-repeat",o.pad.style.backgroundPosition="0 0",a(),f(),jscolor.picker.owner=m,document.getElementsByTagName("body")[0].appendChild(o.boxB)}function u(e){var t=[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]];return t}function a(){switch(g){case 0:var e=1;break;case 1:var e=2}var t=Math.round(m.hsv[0]/6*(jscolor.images.pad[0]-1)),n=Math.round((1-m.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=m.pickerFace+m.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(m.pickerFace+m.pickerInset+n-Math.floor(jscolor.images.cross[1]/2))+"px";var r=jscolor.picker.sld.childNodes;switch(g){case 0:var s=i(m.hsv[0],m.hsv[1],1);for(var o=0;o<r.length;o+=1)r[o].style.backgroundColor="rgb("+s[0]*(1-o/r.length)*100+"%,"+s[1]*(1-o/r.length)*100+"%,"+s[2]*(1-o/r.length)*100+"%)";break;case 1:var s,u,a=[m.hsv[2],0,0],o=Math.floor(m.hsv[0]),f=o%2?m.hsv[0]-o:1-(m.hsv[0]-o);switch(o){case 6:case 0:s=[0,1,2];break;case 1:s=[1,0,2];break;case 2:s=[2,0,1];break;case 3:s=[2,1,0];break;case 4:s=[1,2,0];break;case 5:s=[0,2,1]}for(var o=0;o<r.length;o+=1)u=1-1/(r.length-1)*o,a[1]=a[0]*(1-u*f),a[2]=a[0]*(1-u),r[o].style.backgroundColor="rgb("+a[s[0]]*100+"%,"+a[s[1]]*100+"%,"+a[s[2]]*100+"%)"}}function f(){switch(g){case 0:var e=2;break;case 1:var e=1}var t=Math.round((1-m.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(m.pickerFace+m.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function l(){return jscolor.picker&&jscolor.picker.owner===m}function c(){b===e&&m.importColor(),m.pickerOnfocus&&m.hidePicker()}function h(){b!==e&&m.importColor()}function p(e){var t=jscolor.getRelMousePos(e),n=t.x-m.pickerFace-m.pickerInset,r=t.y-m.pickerFace-m.pickerInset;switch(g){case 0:m.fromHSV(n*(6/(jscolor.images.pad[0]-1)),1-r/(jscolor.images.pad[1]-1),null,k);break;case 1:m.fromHSV(n*(6/(jscolor.images.pad[0]-1)),null,1-r/(jscolor.images.pad[1]-1),k)}}function d(e){var t=jscolor.getRelMousePos(e),n=t.y-m.pickerFace-m.pickerInset;switch(g){case 0:m.fromHSV(null,null,1-n/(jscolor.images.sld[1]-1),C);break;case 1:m.fromHSV(null,1-n/(jscolor.images.sld[1]-1),null,C)}}function v(){if(m.onImmediateChange){var e;typeof m.onImmediateChange=="string"?e=new Function(m.onImmediateChange):e=m.onImmediateChange,e.call(m)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=e,this.styleElement=e,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.hidePicker=function(){l()&&s()},this.showPicker=function(){if(!l()){var t=jscolor.getElementPos(e),n=jscolor.getElementSize(e),r=jscolor.getViewPos(),i=jscolor.getViewSize(),s=u(this),a,f,c;switch(this.pickerPosition.toLowerCase()){case"left":a=1,f=0,c=-1;break;case"right":a=1,f=0,c=1;break;case"top":a=0,f=1,c=-1;break;default:a=0,f=1,c=1}var h=(n[f]+s[f])/2;if(!this.pickerSmartPosition)var p=[t[a],t[f]+n[f]-h+h*c];else var p=[-r[a]+t[a]+s[a]>i[a]?-r[a]+t[a]+n[a]/2>i[a]/2&&t[a]+n[a]-s[a]>=0?t[a]+n[a]-s[a]:t[a]:t[a],-r[f]+t[f]+n[f]+s[f]-h+h*c>i[f]?-r[f]+t[f]+n[f]/2>i[f]/2&&t[f]+n[f]-h-h*c>=0?t[f]+n[f]-h-h*c:t[f]+n[f]-h+h*c:t[f]+n[f]-h+h*c>=0?t[f]+n[f]-h+h*c:t[f]+n[f]-h-h*c];o(p[a],p[f])}},this.importColor=function(){b?this.adjust?!this.required&&/^\s*$/.test(b.value)?(b.value="",w.style.backgroundImage=w.jscStyle.backgroundImage,w.style.backgroundColor=w.jscStyle.backgroundColor,w.style.color=w.jscStyle.color,this.exportColor(T|N)):this.fromString(b.value)||this.exportColor():this.fromString(b.value,T)||(w.style.backgroundImage=w.jscStyle.backgroundImage,w.style.backgroundColor=w.jscStyle.backgroundColor,w.style.color=w.jscStyle.color,this.exportColor(T|N)):this.exportColor()},this.exportColor=function(e){if(!(e&T)&&b){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),b.value=t}!(e&N)&&w&&(w.style.backgroundImage="none",w.style.backgroundColor="#"+this.toString(),w.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),!(e&C)&&l()&&a(),!(e&k)&&l()&&f()},this.fromHSV=function(e,t,n,r){e!==null&&(e=Math.max(0,this.minH,Math.min(6,this.maxH,e))),t!==null&&(t=Math.max(0,this.minS,Math.min(1,this.maxS,t))),n!==null&&(n=Math.max(0,this.minV,Math.min(1,this.maxV,n))),this.rgb=i(e===null?this.hsv[0]:this.hsv[0]=e,t===null?this.hsv[1]:this.hsv[1]=t,n===null?this.hsv[2]:this.hsv[2]=n),this.exportColor(r)},this.fromRGB=function(e,t,n,s){e!==null&&(e=Math.max(0,Math.min(1,e))),t!==null&&(t=Math.max(0,Math.min(1,t))),n!==null&&(n=Math.max(0,Math.min(1,n)));var o=r(e===null?this.rgb[0]:e,t===null?this.rgb[1]:t,n===null?this.rgb[2]:n);o[0]!==null&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,o[0]))),o[2]!==0&&(this.hsv[1]=o[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,o[1]))),this.hsv[2]=o[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,o[2]));var u=i(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=u[0],this.rgb[1]=u[1],this.rgb[2]=u[2],this.exportColor(s)},this.fromString=function(e,t){var n=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return n?(n[1].length===6?this.fromRGB(parseInt(n[1].substr(0,2),16)/255,parseInt(n[1].substr(2,2),16)/255,parseInt(n[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(n[1].charAt(0)+n[1].charAt(0),16)/255,parseInt(n[1].charAt(1)+n[1].charAt(1),16)/255,parseInt(n[1].charAt(2)+n[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var m=this,g=this.pickerMode.toLowerCase()==="hvs"?1:0,y=!1,b=jscolor.fetchElement(this.valueElement),w=jscolor.fetchElement(this.styleElement),E=!1,S=!1,x={},T=1,N=2,C=4,k=8;jscolor.addEvent(e,"focus",function(){m.pickerOnfocus&&m.showPicker()}),jscolor.addEvent(e,"blur",function(){y?y=!1:window.setTimeout(function(){y||c(),y=!1},0)});if(b){var L=function(){m.fromString(b.value,T),v()};jscolor.addEvent(b,"keyup",L),jscolor.addEvent(b,"input",L),jscolor.addEvent(b,"blur",h),b.setAttribute("autocomplete","off")}w&&(w.jscStyle={backgroundImage:w.style.backgroundImage,backgroundColor:w.style.backgroundColor,color:w.style.color});switch(g){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};jscolor.install();var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-37775884-1"]),_gaq.push(["_setDomainName","jenniferdewalt.com"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(e){e.fn.disableSelection=function(){return this.attr("unselectable","on").css("user-select","none").on("selectstart",!1)}}(jQuery),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),$(document).ready(function(){var e={click_counter:clickCounter,one_page:onePage,make_a_dude:makeADude,keep_it_up:keepItUpGame,view_graph:viewGraph,king_of_comments:kingOfComments,pixshow:pixShow,your_space:yourSpace,hangman:hangmanGame,pv_calculator:pvCalculator,tiny_notes:tinyNotes,capture:captureGame,text_scroller:textScroller,hollywood:hollywoodSign,liquor_likes:liquorLikes,fishy_friend:fishyFriend,snare:snare,quick_words:quickWords,countdown:countdownClock,hourglass:hourglass,skinny_drinks:skinnyDrinks,pinwheel:pinwheel,typing_test:typingTest,swivel:swivelGame,mastermind:mastermindGame,sparklers:sparklers,postbored:postbored,text_to_braille:textToBraille,no_one_watching:noOneWatching,tos:tos,song_machine:songMachine,globulator:globulator,drying_paint:dryingPaint,word_clock:wordClock,emergency_off:emergencyOff,infinite_descent:infiniteDescent,wish:wish,serious_question:seriousQuestion,algae_tank:algaeTank,colorworks:colorWorks,effects:effects,down_the_weight:downTheWeight,check_sketch:checkSketch,window_sizer:windowSizer,image_palette:imagePalette,splodin_bacon:splodinBacon,glob_glob:globGlob,forest:forest,mishmosh:mishmosh,todo:nothing,button_maker:buttonMaker,brick_smasher:brickSmasher,balloon:balloon,plinky:plinky,screwdriver:screwdriver,confused_twitter:confusedTwitter,picnic:picnic,share_a_secret:shareASecret,here:herePage,photobooth:photobooth,cat_wall:catWall,word_cloud:wordCloud,sharks:sharks,need_drink:needDrink,signature:signature,image_editor:imageEditor,other_side:otherSide,open_note:openNote,more_drop_shadow:moreDropShadow,elevation:elevationPage,whats_my_ip:nothing,must_write:mustWrite,boom:boomPage,color_picker:colorPickerPage,tweet_time:tweetTime,morse_coder:morseCoder,ransom_note:ransomNote,moment_of_peace:momentOfPeace,pollsie:pollsie,audio_recorder:audioRecorder,salon:salonGalleries,portrait:portraitPhotos,letter_storm:letterStorm,lights_on:lightsOn},t=window.location.pathname.replace(/^\//,"").replace(/\/.*/,"");e[t]()});var TodoTodo=Backbone.Model.extend({urlRoot:"todos"}),TodoTodosCollection=Backbone.Collection.extend({model:TodoTodo,url:"todo/todos"});(function(){this.JST||(this.JST={}),this.JST["templates/todo_todos/index"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div>\n	<h1>Your To Do List</h1>\n	<ul id="todos_list"></ul>\n</div>\n\n\n<form id="todo_form">\n	<h2>Add a new To Do</h2>\n	<div class="form_field" id="title_wrapper"><label>Title:</label><input maxlength="200" type="text" id="title_input"></div>\n	<div class="form_field" id="description_wrapper"><label>Description:</label><input maxlength="200" type="text" id="description_input"></div>\n	<div class="form_field" id="submit_wrapper"><input class="btn" type="submit" val="Submit"></div>\n</form>\n');return __p.join("")}}).call(this),function(){this.JST||(this.JST={}),this.JST["templates/todo_todos/todo"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="title">',get("title"),'</div>\n<div class="description">',get("description"),'</div>\n<a class="delete">X</a>\n');return __p.join("")}}.call(this);var TodoTodosIndexFormView=Backbone.View.extend({events:{submit:"handleSubmit"},handleSubmit:function(e){e.preventDefault();var t=e.target[0].value,n=e.target[1].value;e.target[0].value="",e.target[1].value="";var r=new TodoTodo({title:t,description:n});r.save(),this.collection.add(r)}}),TodoTodosIndexListView=Backbone.View.extend({initialize:function(){this.render(),this.collection.on("add",this.render,this),this.collection.on("remove",this.render,this)},render:function(){this.$el.html(""),this.collection.each(function(e){this.renderTodo(e)},this)},renderTodo:function(e){var t=new TodoTodosIndexTodoView({tagName:"li",model:e});this.$el.append(t.render().el)}}),TodoTodosIndexTodoView=Backbone.View.extend({events:{"click .delete":"remove"},render:function(){return this.$el.html(render("todo_todos/todo",this.model)),this},remove:function(){this.model.destroy()}}),TodoTodosIndexView=Backbone.View.extend({initialize:function(){this.initial_data=$("#data").data("response"),this.collection=new TodoTodosCollection(this.initial_data),this.render(),this.todo_todos_index_list_view=new TodoTodosIndexListView({el:"#todos_list",collection:this.collection}),this.todo_todos_index_form_view=new TodoTodosIndexFormView({el:"#todo_form",collection:this.collection})},render:function(){this.$el.html(""),this.$el.html(render("todo_todos/index",{}))}}),BbRouter=Backbone.Router.extend({routes:{"todo/todos":"index"},index:function(){var e=new TodoTodosIndexView({el:"#todos_index_container"})}});new BbRouter,$(document).ready(function(){Backbone.history.start({pushState:!0})});